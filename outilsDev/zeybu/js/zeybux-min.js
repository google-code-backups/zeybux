function TemplateData(){this.infobulle='<!-- BEGIN membres --><div class="ui-helper-hidden com-infobulle com-widget-window ui-widget ui-widget-content ui-corner-all" id="ifb-{membres.nom}"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Erreurs : </div><!-- BEGIN erreurs --><div class="com-widget-content"><ul><li>N°{membres.erreurs.code} : {membres.erreurs.message}</li></ul></div><!-- END erreurs --></div><!-- END membres -->';this.infobulleLog="<!-- BEGIN erreurs --><ul><li>N°{erreurs.code} : {erreurs.message}</li></ul><!-- END erreurs -->"}function ActionInfobulles(){this.affect=function(a,b){switch(b){case 116:var c=this;a.find("#action-ifb-116").click(function(){var f=new IdentificationTemplate();var d=f.connexion;var e=$(d).dialog({autoOpen:true,modal:true,draggable:false,resizable:false,width:370,buttons:{Connexion:function(){c.identifier($(this))}},close:function(g,h){$(this).remove()}});e.find("input").keyup(function(g){if(g.keyCode=="13"){c.identifier(e)}})});break}return a};this.identifier=function(c){var a=new IdentificationVO();a={login:c.find(":input[name=login]").val(),pass:c.find(":input[name=pass]").val()};var b=new IdentificationValid();var d=b.validAjout(a);Infobulle.init();if(d.valid){$.post("./index.php?m=Identification&v=Identification","pParam="+$.toJSON(a),function(f){Infobulle.init();if(f.valid){var g=new TemplateVR();g.valid=false;g.log.valid=false;var e=new VRerreur();e.code=ERR_305_CODE;e.message=ERR_305_MSG;g.log.erreurs.push(e);Infobulle.generer(g,"");$(c).dialog("close")}else{Infobulle.generer(f,"")}},"json")}else{Infobulle.generer(d)}}}String.prototype.checkLength=function(b,a){return !(this.toString().length>a||this.toString().length<b)};Number.prototype.checkLength=function(b,a){return !(this.toString().length>a||this.toString().length<b)};String.prototype.isEmpty=function(){return !(this.toString().length>0)};Number.prototype.isEmpty=function(){return !(this.toString().length>0)};String.prototype.isInt=function(){return !isNaN(parseInt(this.toString()))};Number.prototype.isInt=function(){return !isNaN(parseInt(this.toString()))};String.prototype.isFloat=function(){return !isNaN(parseFloat(this.toString()))};Number.prototype.isFloat=function(){return !isNaN(parseFloat(this.toString()))};function isArray(a){if(a){return a.constructor==Array}return false}String.prototype.checkRegexp=function(b){var a=new RegExp(b);return a.test(this.toString())};String.prototype.checkCourriel=function(){var a=/^[\w.-]+@[\w.-]+\.[a-zA-Z]{2,6}$/g;return this.toString().checkRegexp(a)};String.prototype.checkTime=function(){var a=/^[0-9]{2}[:]{1}[0-9]{2}[:]{1}[0-9]{2}$/g;return this.toString().checkRegexp(a)};String.prototype.checkTimeExist=function(){var a=this.toString().split(":");if(a.length==3){return parseInt(a[0])>=0&&parseInt(a[0])<24&&parseInt(a[1])>=0&&parseInt(a[1])<60&&parseInt(a[2])>=0&&parseInt(a[2])<60}return false};String.prototype.checkDate=function(a){if(a===""){a="db"}if(a=="db"){var b=/^[0-9]{4}[-]{1}[0-9]{2}[-]{1}[0-9]{2}$/g}else{if(a=="fr"){var b=/^[0-9]{2}[/]{1}[0-9]{2}[/]{1}[0-9]{4}$/g}else{return false}}return this.toString().checkRegexp(b)};String.prototype.checkDateExist=function(type){if(type===""){type="db"}if(type=="db"){var lSplit="-";var lIndexAnnee=0;var lIndexDate=2}else{if(type=="fr"){var lSplit="/";var lIndexAnnee=2;var lIndexDate=0}else{return false}}var ladate=this.toString().split(lSplit);if((ladate.length!=3)||isNaN(parseInt(ladate[0]))||isNaN(parseInt(ladate[1]))||isNaN(parseInt(ladate[2]))){return false}var unedate=new Date(eval(ladate[lIndexAnnee]),eval(ladate[1])-1,eval(ladate[lIndexDate]));var annee=unedate.getYear();if((Math.abs(annee)+"").length<4){annee=annee+1900}return((unedate.getDate()==eval(ladate[lIndexDate]))&&(unedate.getMonth()==eval(ladate[1])-1)&&(annee==eval(ladate[lIndexAnnee])))};String.prototype.checkDateTime=function(){var a=this.toString().split(" ");if(a.length==2){return(a[0].checkDate("db")&&a[1].checkTime())}return false};String.prototype.checkDateTimeExist=function(){var a=this.toString().split(" ");if(a.length==2){return(a[0].checkDateExist("db")&&a[1].checkTimeExist())}return false};function dateTimeEstPLusGrandeEgale(k,c,e){if(e===""){e="db"}if(e=="db"){var h="-";var l=0;var g=2}else{if(e=="fr"){var h="/";var l=2;var g=0}else{return false}}if(k.checkDateTime(e)&&c.checkDateTime(e)&&k.checkDateTimeExist(e)&&c.checkDateTimeExist(e)){var d=k.split(" ");var j=d[0].split(h);var b=d[1].replace(":","");j=j[l]+j[1]+j[g]+b;var f=c.split(" ");var a=f[0].split(h);var b=f[1].replace(":","");a=a[l]+a[1]+a[g]+b;return j>=a}return false}function dateEstPLusGrandeEgale(a,g,c){if(c===""){c="db"}if(c=="db"){var b="-";var e=0;var f=2}else{if(c=="fr"){var b="/";var e=2;var f=0}else{return false}}if(a.checkDate(c)&&g.checkDate(c)&&a.checkDateExist(c)&&g.checkDateExist(c)){var h=a.split(b);h=h[e]+h[1]+h[f];var d=g.split(b);d=d[e]+d[1]+d[f];return h>=d}return false}function timeEstPLusGrandeEgale(a,c){if(a.checkTime()&&c.checkTime()&&a.checkTimeExist()&&c.checkTimeExist()){var d=a.replace(":","");var b=c.replace(":","");return d>=b}return false}const ERR_101_CODE=101;const ERR_101_MSG="La valeur entrée est trop longue.";const ERR_102_CODE=102;const ERR_102_MSG="Le format du courriel n'est pas valide.";const ERR_103_CODE=103;const ERR_103_MSG="Le format de la date n'est pas valide.";const ERR_104_CODE=104;const ERR_104_MSG="Lidentifiant de l'objet n'est pas valide.";const ERR_105_CODE=105;const ERR_105_MSG="La date saisie n'existe pas.";const ERR_106_CODE=106;const ERR_106_MSG="Le format de l'heure n'est pas valide.";const ERR_107_CODE=107;const ERR_107_MSG="L'heure saisie n'existe pas.";const ERR_108_CODE=108;const ERR_108_MSG="Ce champ doit être de type entier.";const ERR_109_CODE=109;const ERR_109_MSG="Ce champ doit être de type float.";const ERR_110_CODE=110;const ERR_110_MSG='Le champ "Lots" doit être de type tableau.';const ERR_111_CODE=111;const ERR_111_MSG='Le champ "Produits" doit être de type tableau.';const ERR_112_CODE=112;const ERR_112_MSG="Des éléments du marché sont encore en édition.";const ERR_113_CODE=113;const ERR_113_MSG="Problème technique lors de l'enregistrement.";const ERR_114_CODE=114;const ERR_114_MSG="Plusieures lignes dans la base au lieu d'une attendue.";const ERR_115_CODE=115;const ERR_115_MSG="Le champ doit être de type tableau.";const ERR_116_CODE=116;const ERR_116_MSG='Session expirée. Veuillez vous <span class="action-ifb com-cursor-pointer" id="action-ifb-116">reconnecter</span>.';const ERR_201_CODE=201;const ERR_201_MSG="Ce champ est obligatoire.";const ERR_202_CODE=202;const ERR_202_MSG="La date de fin des réservations doit être avant celle du marché.";const ERR_203_CODE=203;const ERR_203_MSG="L'heure de fin des réservations doit être avant celle du marché.";const ERR_204_CODE=204;const ERR_204_MSG="L'heure de fin du marché doit être après celle du début.";const ERR_205_CODE=205;const ERR_205_MSG="La quantité max par adhérent doit être plus petite que le stock.";const ERR_206_CODE=206;const ERR_206_MSG="La taille du lot doit être plus petite que quantité max par adhérent.";const ERR_207_CODE=207;const ERR_207_MSG="Le marché doit comporter au moins un produit.";const ERR_208_CODE=208;const ERR_208_MSG="La date de fin du marché doit être après celle du début.";const ERR_209_CODE=209;const ERR_209_MSG="La date ne doit pas être passée.";const ERR_210_CODE=210;const ERR_210_MSG="Un produit demandé n'existe pas dans le système.";const ERR_211_CODE=211;const ERR_211_MSG="Ce produit est déjà présent dans le marché.";const ERR_212_CODE=212;const ERR_212_MSG="Aucune réservation pour ce marché.";const ERR_213_CODE=213;const ERR_213_MSG="Il faut entrer un prix pour ce produit.";const ERR_214_CODE=214;const ERR_214_MSG="Il faut entrer une quantité pour ce produit.";const ERR_215_CODE=215;const ERR_215_MSG="Ce champ doit être positif.";const ERR_216_CODE=216;const ERR_216_MSG="Aucune donnée pour l'id donné.";const ERR_217_CODE=217;const ERR_217_MSG="Quantité commandée supérieure à la quantité maximale autorisée.";const ERR_218_CODE=218;const ERR_218_MSG="Quantité commandée supérieure à la quantité restant en stock.";const ERR_219_CODE=219;const ERR_219_MSG="Pas de nouveau marché.";const ERR_220_CODE=220;const ERR_220_MSG="Vous avez déjà une réservation pour ce marché.";const ERR_221_CODE=221;const ERR_221_MSG="Les réservations sont cloturées pour ce marché.";const ERR_222_CODE=222;const ERR_222_MSG="Erreur d'identification.";const ERR_223_CODE=223;const ERR_223_MSG="Les mots de passe doivent être identiques.";const ERR_224_CODE=224;const ERR_224_MSG="Ce champ doit être au format courriel.";const ERR_225_CODE=225;const ERR_225_MSG="La date d'anniversaire ne peut pas être après celle d'adhésion.";const ERR_226_CODE=226;const ERR_226_MSG="L'adhérent doit pouvoir accéder à un module au minimum.";const ERR_227_CODE=227;const ERR_227_MSG="Aucun numéro de compte ne correspond à celui saisit.";const ERR_228_CODE=228;const ERR_228_MSG="Erreur dans la base sur le numéro de compte.";const ERR_229_CODE=229;const ERR_229_MSG="Un des modules n'existe pas.";const ERR_230_CODE=230;const ERR_230_MSG="La date ne peut pas être future.";const ERR_231_CODE=231;const ERR_231_MSG="Impossible de supprimer cet adhérent.";const ERR_232_CODE=232;const ERR_232_MSG="Sélectionner un producteur.";const ERR_233_CODE=233;const ERR_233_MSG="Sélectionner un produit.";const ERR_234_CODE=234;const ERR_234_MSG="Un producteur demandé n'existe pas dans le système.";const ERR_235_CODE=235;const ERR_235_MSG="Le mot de passe actuel n'est pas valide.";const ERR_236_CODE=236;const ERR_236_MSG="Choisir une option.";const ERR_301_CODE=301;const ERR_301_MSG="Enregistrement Terminé.";const ERR_302_CODE=302;const ERR_302_MSG="Mot de passe mis à jour.";const ERR_303_CODE=303;const ERR_303_MSG="Réservation supprimée.";const ERR_304_CODE=304;const ERR_304_MSG="Quantité maximale de réservation atteinte pour ce produit.";const ERR_305_CODE=305;const ERR_305_MSG="Connexion réussie.";const ERR_306_CODE=306;const ERR_306_MSG="Compte mis à jour.";(function(a){a.fn.checkLength=function(c,b){this.removeClass("ui-state-error");if(this.val().length>b||this.val().length<c){this.addClass("ui-state-error");return false}else{return true}};a.fn.checkRegexp=function(b){this.removeClass("ui-state-error");if(!(b.test(this.val()))){this.addClass("ui-state-error");return false}else{return true}};a.fn.inputToText=function(c){this.hide();if(this.context.nodeName=="SELECT"){this.after('<span name="'+this.attr("name")+'">'+this.children("option:selected").text()+"</span>")}else{var b=this.val();if(c==="montant"){b=b.numberFrToDb();if(isNaN(b)||b.isEmpty()){b=0}b=parseFloat(b).nombreFormate(2,","," ")}this.after('<span name="'+this.attr("name")+'">'+b+"</span>")}return this};a.fn.textToInput=function(){this.show();this.next().hide();return this}})(jQuery);Array.max=function(a){return Math.max.apply(Math,a)};Array.min=function(a){return Math.min.apply(Math,a)};function getDateAujourdhuiDb(){lDate=new Date();lAnnee=lDate.getFullYear();lMois=lDate.getMonth()+1;if(lMois<10){lMois="0"+lMois}lJour=lDate.getDate();if(lJour<10){lJour="0"+lJour}return lAnnee+"-"+lMois+"-"+lJour}function getTimeAujourdhuiDb(){lDate=new Date();lHeure=lDate.getHours();if(lHeure<10){lHeure="0"+lHeure}lMinute=lDate.getMinutes();if(lMinute<10){lMinute="0"+lMinute}lSeconde=lDate.getSeconds();if(lSeconde<10){lSeconde="0"+lSeconde}return lHeure+":"+lMinute+":"+lSeconde}function getDateTimeAujourdhuiDb(){return getDateAujourdhuiDb()+" "+getTimeAujourdhuiDb()}String.prototype.nombreFormate=function(a,b,c){return parseFloat(this).nombreFormate(a,b,c)};Number.prototype.nombreFormate=function(n,d,a){var c=String(this),g,o="",b="";if(n==undefined){n=2}if(d==undefined){d="."}if(a==undefined){a=" "}function m(p){var j="";while(p.length%3!=0){p="0"+p}for(g=0;g<p.length;g+=3){if(g==p.length-1){a=""}j+=p.substr(g,3)+a}while(j.substr(0,1)=="0"){j=j.substr(1)}if(j==" "){j="0 "}return j.substr(0,j.lastIndexOf(a))}if(c.indexOf(".")==-1){for(g=0;g<n;g++){b+="0"}o=m(c)+d+b}else{var l=(c.substr(c.indexOf(".")+1));if(l.length>n){var k=l.length-n;var f=1;for(g=0;g<k;g++){f*=10}var e="";for(g=0;g<l.length;g++){if(l[g]=="0"){e+="0"}else{g=l.length}}b=e+Math.round(Number(l)/f)}else{if(l.length<n){var k=n-l.length;var h="";for(g=0;g<k;g++){h+="0"}b=l+h}else{b=l}}o=m(c.substr(0,c.indexOf(".")))+String(d)+b}return o};String.prototype.template=function(k,e){var c=this.toString();var j=[];function d(l){regexp=new RegExp("<!-- BEGIN (.*?) -->(.*)","g");splits=regexp.exec(l);if(splits!=null){j.push(splits[1]);d(splits[2])}}d(c);for(var b in j){c=c.replace("<!-- BEGIN "+j[b]+" -->","{"+j[b].split(".")[j[b].split(".").length-1]+"{");c=c.replace("<!-- END "+j[b]+" -->","}"+j[b].split(".")[j[b].split(".").length-1]+"}")}regexp=new RegExp("{(\\w*){(.*)}\\1}","g");splits=regexp.exec(c);if(splits){var a=splits[0];var h=splits[1];var f=splits[2];var g="";for(tag in k){if(typeof(tag)=="string"){if(e!=null){lTag=e+"."+tag}else{lTag=tag}regexp=new RegExp("{"+lTag+"}","g");f=f.replace(regexp,k[tag])}}for(tag in k[h]){if(e!=null){lBnameOut=e+"."+h}else{lBnameOut=h}g+=f.template(k[h][tag],lBnameOut)}c=c.replace(a,g);c=c.template(k)}for(tag in k){if(typeof(tag)=="string"){if(e!=null){lTag=e+"."+tag}else{lTag=tag}regexp=new RegExp("{"+lTag+"}","g");c=c.replace(regexp,k[tag])}}return c.replace(/{\w+}/g,"")};function Infobulles(){this.init=function(){$(".com-infobulle").remove();$(".ui-state-error").removeClass("ui-state-error");$("#contenu_message_information").text("");$("#widget_message_information").hide()};this.generation=function(h,b){var c=false;var f=new Array();f.membres=new Array();if(!h.valid){for(i in h){if(i!="valid"){if(h[i].valid===false&&h[i].erreurs){var g=new Array();g.nom=b+i;g.erreurs=new Array();for(err in h[i].erreurs){var j=new Array();j.code=h[i].erreurs[err].code;if(String(j.code)[0]==3){c=true}j.message=h[i].erreurs[err].message;g.erreurs.push(j)}if(i=="log"||$("#"+b+i).length==0){var a=$("#contenu_message_information").html()+TemplateData.infobulleLog.template(g);a=$(a);if(a.find(".action-ifb").size()>0){var d=new ActionInfobulles();$(g.erreurs).each(function(){a=d.affect(a,this.code)})}$("#contenu_message_information").html(a);if(c){$("#widget_message_information").delay(gTempsTransition).fadeIn(gTempsTransitionUnique).delay(gTempsTransitionMsgInfo).fadeOut(gTempsTransitionUnique)}else{$("#widget_message_information").delay(gTempsTransition).fadeIn(gTempsTransitionUnique)}}else{f.membres.push(g);$("#"+b+i).addClass("ui-state-error");Infobulle.afficher($("#"+b+i))}}else{if(!(h[i].valid===true)||(h[i].valid===false&&!h[i].erreurs)){this.generation(h[i],b+i)}}}}}$("body").append(TemplateData.infobulle.template(f))};this.generer=function(b,a){this.init();if(!a){lNomObj=""}else{lNomObj=a}this.generation(b,lNomObj)};this.afficher=function(d){var b;function c(){var l="#ifb-"+d.attr("id");b=$(l);b.hide();var j=d.height()+8;var e=d.width()/2;var k=d.offset();var h=k;h.top=k.top+j;h.left=k.left+e;var g=$("#site").offset();var f=g;if((h.left+b.width())>(f.left+$("#site").width())){h.left-=b.width()}if((h.top+b.height())>(f.top+$("#site").height())){h.top-=(b.height()+2*d.height()+8)}b.css("position","absolute").css("z-index","2000");b.css(h).fadeIn(gTempsTransitionUnique)}function a(){b.stop().fadeTo(0,1).fadeOut(gTempsTransitionUnique)}d.hover(function(){c()},function(){a()})}}String.prototype.dateFrToDb=function(){var a=this.toString();if(a!==""){if(a.checkDateExist("fr")&&a.checkDate("fr")){return a[6]+a[7]+a[8]+a[9]+"-"+a[3]+a[4]+"-"+a[0]+a[1]}}return""};String.prototype.dateDbToFr=function(){var a=this.toString();if(a!==""){if(a.checkDateExist("db")&&a.checkDate("db")){return a[8]+a[9]+"/"+a[5]+a[6]+"/"+a[0]+a[1]+a[2]+a[3]}}return""};String.prototype.numberFrToDb=function(){var a=this.toString();if(a!==""){return a.replace(",",".").replace(" ","")}return""};String.prototype.extractDbDate=function(){var a=this.toString();if(a!==""){return a[0]+a[1]+a[2]+a[3]+a[4]+a[5]+a[6]+a[7]+a[8]+a[9]}return""};String.prototype.extractDbHeure=function(){var a=this.toString();if(a!==""){return a[11]+a[12]}return""};String.prototype.extractDbMinute=function(){var a=this.toString();if(a!==""){return a[14]+a[15]}return""};function ProduitBonDeCommandeVO(){this.id="";this.quantite="";this.prix=""}function IdentificationVO(){this.id="";this.login="";this.pass=""}function ExportBonLivraisonVO(){this.id="";this.pParam="";this.export_type="";this.id_commande="";this.format=""}function NomProduitVO(){this.id="";this.nom="";this.description="";this.idCategorie=""}function CommandeCompleteVO(){this.id="";this.numero="";this.nom="";this.description="";this.dateMarcheDebut="";this.timeMarcheDebut="";this.dateMarcheFin="";this.timeMarcheFin="";this.dateFinReservation="";this.timeFinReservation="";this.archive="";this.produits=new Array()}function RechargementCompteVO(){this.id="";this.montant="";this.typePaiement="";this.champComplementaireObligatoire="";this.champComplementaire=""}function ProduitCommandeVO(){this.id="";this.idNom="";this.nom="";this.description="";this.idCategorie="";this.categorie="";this.descriptionCategorie="";this.unite="";this.qteMaxCommande="";this.qteRestante="";this.idProducteur="";this.lots=new Array()}function ProduitsBonDeCommandeVO(){this.id="";this.id_commande="";this.id_producteur="";this.export_type="";this.produits=new Array()}function ProduitBonDeLivraisonVO(){this.id="";this.quantite="";this.quantiteSolidaire="";this.prix=""}function ProduitsBonDeLivraisonVO(){this.id="";this.id_commande="";this.id_producteur="";this.export_type="";this.produits=new Array();this.typePaiement="";this.total="";this.typePaiementChampComplementaireObligatoire="";this.typePaiementChampComplementaire=""}function ExportListeReservationVO(){this.id="";this.pParam="";this.export_type="";this.id_commande="";this.id_produits="";this.format=""}function ListeReservationCommandeVO(){this.id="";this.commandes=new Array()}function ReservationCommandeVO(){this.id="";this.stoQuantite="";this.stoIdDetailCommande=""}function InfoAdherentVO(){this.id="";this.motPasse="";this.motPasseNouveau="";this.motPasseConfirm=""}function DetailCommandeVO(){this.id="";this.idProduit="";this.taille="";this.prix=""}function AchatCommandeVO(){this.id="";this.idCompte="";this.produits=new Array();this.produitsSolidaire=new Array();this.rechargement="";this.NbProduits=0;this.NbProduitsSolidaire=0}function ProducteurVO(){this.id="";this.nom="";this.prenom="";this.dateNaissance="";this.compte="";this.commentaire="";this.courrielPrincipal="";this.courrielSecondaire="";this.telephonePrincipal="";this.telephoneSecondaire="";this.adresse="";this.codePostal="";this.ville=""}function AdherentVO(){this.id="";this.motPasse="";this.motPasseConfirm="";this.numero="";this.compte="";this.nom="";this.prenom="";this.courrielPrincipal="";this.courrielSecondaire="";this.telephonePrincipal="";this.telephoneSecondaire="";this.adresse="";this.codePostal="";this.ville="";this.dateNaissance="";this.dateAdhesion="";this.commentaire="";this.modules=new Array()}function ExportBonReservationVO(){this.id="";this.pParam="";this.export_type="";this.id_commande="";this.format=""}function ProduitAchatVO(){this.id="";this.quantite="";this.prix=""}function ProduitsBonDeCommandeVR(){this.valid=true;this.log=new VRelement();this.id=new VRelement();this.id_commande=new VRelement();this.id_producteur=new VRelement();this.export_type=new VRelement();this.produits=new Array()}function DetailCommandeVR(){this.valid=true;this.log=new VRelement();this.id=new VRelement();this.idProduit=new VRelement();this.taille=new VRelement();this.prix=new VRelement()}function IdentificationVR(){this.valid=true;this.log=new VRelement();this.id=new VRelement();this.login=new VRelement();this.pass=new VRelement()}function ListeReservationCommandeVR(){this.valid=true;this.log=new VRelement();this.id=new VRelement();this.commandes=new Array()}function InfoAdherentVR(){this.valid=true;this.log=new VRelement();this.id=new VRelement();this.motPasse=new VRelement();this.motPasseNouveau=new VRelement();this.motPasseConfirm=new VRelement()}function ExportBonReservationVR(){this.valid=true;this.log=new VRelement();this.id=new VRelement();this.pParam=new VRelement();this.export_type=new VRelement();this.id_commande=new VRelement();this.format=new VRelement()}function NomProduitVR(){this.valid=true;this.log=new VRelement();this.id=new VRelement();this.nom=new VRelement();this.description=new VRelement();this.idCategorie=new VRelement()}function ProduitBonDeLivraisonVR(){this.valid=true;this.log=new VRelement();this.id=new VRelement();this.quantite=new VRelement();this.quantiteSolidaire=new VRelement();this.prix=new VRelement()}function ProduitCommandeVR(){this.valid=true;this.log=new VRelement();this.id=new VRelement();this.idNom=new VRelement();this.nom=new VRelement();this.description=new VRelement();this.idCategorie=new VRelement();this.categorie=new VRelement();this.descriptionCategorie=new VRelement();this.unite=new VRelement();this.qteMaxCommande=new VRelement();this.qteRestante=new VRelement();this.idProducteur=new VRelement();this.lots=new Array()}function ReservationCommandeVR(){this.valid=true;this.log=new VRelement();this.id=new VRelement();this.stoQuantite=new VRelement();this.stoIdDetailCommande=new VRelement()}function AdherentVR(){this.valid=true;this.log=new VRelement();this.id=new VRelement();this.motPasse=new VRelement();this.motPasseConfirm=new VRelement();this.numero=new VRelement();this.compte=new VRelement();this.nom=new VRelement();this.prenom=new VRelement();this.courrielPrincipal=new VRelement();this.courrielSecondaire=new VRelement();this.telephonePrincipal=new VRelement();this.telephoneSecondaire=new VRelement();this.adresse=new VRelement();this.codePostal=new VRelement();this.ville=new VRelement();this.dateNaissance=new VRelement();this.dateAdhesion=new VRelement();this.commentaire=new VRelement();this.modules=new Array()}function ExportListeReservationVR(){this.valid=true;this.log=new VRelement();this.id=new VRelement();this.pParam=new VRelement();this.export_type=new VRelement();this.id_commande=new VRelement();this.id_produits=new VRelement();this.format=new VRelement()}function RechargementCompteVR(){this.valid=true;this.log=new VRelement();this.id=new VRelement();this.montant=new VRelement();this.typePaiement=new VRelement();this.champComplementaireObligatoire=new VRelement();this.champComplementaire=new VRelement()}function ExportBonLivraisonVR(){this.valid=true;this.log=new VRelement();this.id=new VRelement();this.pParam=new VRelement();this.export_type=new VRelement();this.id_commande=new VRelement();this.format=new VRelement()}function VRelement(){this.valid=true;this.erreurs=new Array()}function VRerreur(){this.code="";this.message=""}function TemplateVR(){this.valid=true;this.log=new VRelement()}function CommandeCompleteVR(){this.valid=true;this.log=new VRelement();this.id=new VRelement();this.numero=new VRelement();this.nom=new VRelement();this.description=new VRelement();this.dateMarcheDebut=new VRelement();this.timeMarcheDebut=new VRelement();this.dateMarcheFin=new VRelement();this.timeMarcheFin=new VRelement();this.dateFinReservation=new VRelement();this.timeFinReservation=new VRelement();this.archive=new VRelement();this.produits=new Array()}function ProduitsBonDeLivraisonVR(){this.valid=true;this.log=new VRelement();this.id=new VRelement();this.id_commande=new VRelement();this.id_producteur=new VRelement();this.export_type=new VRelement();this.produits=new Array();this.typePaiement=new VRelement();this.total=new VRelement();this.typePaiementChampComplementaireObligatoire=new VRelement();this.typePaiementChampComplementaire=new VRelement()}function ProduitAchatVR(){this.valid=true;this.log=new VRelement();this.id=new VRelement();this.quantite=new VRelement();this.prix=new VRelement()}function ProduitBonDeCommandeVR(){this.valid=true;this.log=new VRelement();this.id=new VRelement();this.quantite=new VRelement();this.prix=new VRelement()}function AchatCommandeVR(){this.valid=true;this.log=new VRelement();this.id=new VRelement();this.idCompte=new VRelement();this.produits=new Array();this.produitsSolidaire=new Array();this.rechargement=new VRelement()}function ProducteurVR(){this.valid=true;this.log=new VRelement();this.id=new VRelement();this.nom=new VRelement();this.prenom=new VRelement();this.dateNaissance=new VRelement();this.compte=new VRelement();this.commentaire=new VRelement();this.courrielPrincipal=new VRelement();this.courrielSecondaire=new VRelement();this.telephonePrincipal=new VRelement();this.telephoneSecondaire=new VRelement();this.adresse=new VRelement();this.codePostal=new VRelement();this.ville=new VRelement()}function ListeReservationCommandeValid(){this.validAjout=function(b){var c=new ListeReservationCommandeVR();if(isArray(b.commandes)){if(b.commandes.length>0){$(b.commandes).each(function(){var e=new ReservationCommandeValid();var d=e.validAjout(this);if(!d.valid){c.valid=false}c.commandes.push(d)})}else{c.valid=false;c.log.valid=false;var a=new VRerreur();a.code=ERR_207_CODE;a.message=ERR_207_MSG;c.log.erreurs.push(a)}}else{c.valid=false;c.log.valid=false;var a=new VRerreur();a.code=ERR_115_CODE;a.message=ERR_115_MSG;c.log.erreurs.push(a)}return c};this.validDelete=function(b){var c=new ListeReservationCommandeVR();if(isNaN(parseInt(b.id))){c.valid=false;c.id.valid=false;var a=new VRerreur();a.code=ERR_104_CODE;a.message=ERR_104_MSG;c.id.erreurs.push(a)}return c};this.validUpdate=function(b){var d=this.validDelete(b);if(d.valid){var c=new ListeReservationCommandeVR();if(isArray(b.commandes)){if(b.commandes.length>0){$(b.commandes).each(function(){var f=new ReservationCommandeValid();var e=f.validAjout(this);if(!e.valid){c.valid=false}c.commandes.push(e)})}else{c.valid=false;c.log.valid=false;var a=new VRerreur();a.code=ERR_207_CODE;a.message=ERR_207_MSG;c.log.erreurs.push(a)}}else{c.valid=false;c.log.valid=false;var a=new VRerreur();a.code=ERR_115_CODE;a.message=ERR_115_MSG;c.log.erreurs.push(a)}return c}return d}}function ProduitAchatValid(){this.validAjout=function(b){var c=new ProduitAchatVR();if(isNaN(parseInt(b.id))){c.valid=false;c.log.valid=false;var a=new VRerreur();a.code=ERR_104_CODE;a.message=ERR_104_MSG;c.log.erreurs.push(a)}if(!b.quantite.checkLength(0,12)){c.valid=false;c.quantite.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.quantite.erreurs.push(a)}if(b.quantite!=""&&!b.quantite.isFloat()){c.valid=false;c.quantite.valid=false;var a=new VRerreur();a.code=ERR_109_CODE;a.message=ERR_109_MSG;c.quantite.erreurs.push(a)}if(!b.prix.checkLength(0,12)){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.prix.erreurs.push(a)}if(b.prix!=""&&!b.prix.isFloat()){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_109_CODE;a.message=ERR_109_MSG;c.prix.erreurs.push(a)}if((isNaN(b.quantite)||b.quantite==0)&&(!isNaN(b.prix)&&b.prix!=0)){c.valid=false;c.quantite.valid=false;var a=new VRerreur();a.code=ERR_214_CODE;a.message=ERR_214_MSG;c.quantite.erreurs.push(a)}if(b.quantite<0){c.valid=false;c.quantite.valid=false;var a=new VRerreur();a.code=ERR_215_CODE;a.message=ERR_215_MSG;c.quantite.erreurs.push(a)}if((isNaN(b.prix)||b.prix==0)&&(!isNaN(b.quantite)&&b.quantite!=0)){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_213_CODE;a.message=ERR_213_MSG;c.prix.erreurs.push(a)}if(b.prix<0){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_215_CODE;a.message=ERR_215_MSG;c.prix.erreurs.push(a)}return c};this.validDelete=function(b){var c=new ProduitAchatVR();if(isNaN(parseInt(b.id))){c.valid=false;c.id.valid=false;var a=new VRerreur();a.code=ERR_104_CODE;a.message=ERR_104_MSG;c.id.erreurs.push(a)}return c};this.validUpdate=function(b){var d=this.validDelete(b);if(d.valid){var c=new ProduitAchatVR();if(isNaN(parseInt(b.id))){c.valid=false;c.log.valid=false;var a=new VRerreur();a.code=ERR_104_CODE;a.message=ERR_104_MSG;c.log.erreurs.push(a)}if(!b.quantite.checkLength(0,12)){c.valid=false;c.quantite.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.quantite.erreurs.push(a)}if(b.quantite!=""&&!b.quantite.isFloat()){c.valid=false;c.quantite.valid=false;var a=new VRerreur();a.code=ERR_109_CODE;a.message=ERR_109_MSG;c.quantite.erreurs.push(a)}if(!b.prix.checkLength(0,12)){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.prix.erreurs.push(a)}if(b.prix!=""&&!b.prix.isFloat()){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_109_CODE;a.message=ERR_109_MSG;c.prix.erreurs.push(a)}if((isNaN(b.quantite)||b.quantite==0)&&(!isNaN(b.prix)&&b.prix!=0)){c.valid=false;c.quantite.valid=false;var a=new VRerreur();a.code=ERR_214_CODE;a.message=ERR_214_MSG;c.quantite.erreurs.push(a)}if(b.quantite<0){c.valid=false;c.quantite.valid=false;var a=new VRerreur();a.code=ERR_215_CODE;a.message=ERR_215_MSG;c.quantite.erreurs.push(a)}if((isNaN(b.prix)||b.prix==0)&&(!isNaN(b.quantite)&&b.quantite!=0)){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_213_CODE;a.message=ERR_213_MSG;c.prix.erreurs.push(a)}if(b.prix<0){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_215_CODE;a.message=ERR_215_MSG;c.prix.erreurs.push(a)}return c}return d}}function AchatCommandeValid(){this.validAjout=function(a){var h=new AchatCommandeVR();if(isNaN(parseInt(a.id))){h.valid=false;h.log.valid=false;var d=new VRerreur();d.code=ERR_104_CODE;d.message=ERR_104_MSG;h.log.erreurs.push(d)}if(!a.idCompte.checkLength(0,11)){h.valid=false;h.log.valid=false;var d=new VRerreur();d.code=ERR_101_CODE;d.message=ERR_101_MSG;h.log.erreurs.push(d)}if(!a.idCompte.isInt()){h.valid=false;h.log.valid=false;var d=new VRerreur();d.code=ERR_108_CODE;d.message=ERR_108_MSG;h.log.erreurs.push(d)}if(a.idCompte.isEmpty()){h.valid=false;h.log.valid=false;var d=new VRerreur();d.code=ERR_201_CODE;d.message=ERR_201_MSG;h.log.erreurs.push(d)}if(a.NbProduits>0){if(isArray(a.produits)){if(a.produits.length>0){var f=new ProduitAchatValid();var b=0;var j=0;while(a.produits[b]){var c=f.validAjout(a.produits[b]);if(!c.valid){h.valid=false}if(!a.produits[b].id.isEmpty()){h.produits[a.produits[b].id]=c}else{h.produits.push(c)}if(!isNaN(a.produits[b].quantite)&&a.produits[b].quantite!=0){j++}b++}}}else{h.valid=false;h.log.valid=false;var d=new VRerreur();d.code=ERR_111_CODE;d.message=ERR_111_MSG;h.log.erreurs.push(d)}}if(a.NbProduitsSolidaire>0){if(isArray(a.produitsSolidaire)){if(a.produitsSolidaire.length>0){var f=new ProduitAchatValid();var b=0;var g=0;while(a.produitsSolidaire[b]){var c=f.validAjout(a.produitsSolidaire[b]);if(!c.valid){h.valid=false}if(!a.produitsSolidaire[b].id.isEmpty()){h.produitsSolidaire[a.produitsSolidaire[b].id]=c}else{h.produitsSolidaire.push(c)}if(!isNaN(a.produitsSolidaire[b].quantite)&&a.produitsSolidaire[b].quantite!=0){g++}b++}}}else{h.valid=false;h.log.valid=false;var d=new VRerreur();d.code=ERR_115_CODE;d.message=ERR_115_MSG;h.log.erreurs.push(d)}}if(j==0&&g==0){h.valid=false;h.log.valid=false;var d=new VRerreur();d.code=ERR_207_CODE;d.message=ERR_207_MSG;h.log.erreurs.push(d)}if(!a.rechargement.montant.isEmpty()&&a.rechargement.montant!=0){var e=new RechargementCompteValid();h.rechargement=e.validAjout(a.rechargement);if(!h.rechargement.valid){h.valid=false}}return h};this.validDelete=function(b){var c=new AchatCommandeVR();if(isNaN(parseInt(b.id))){c.valid=false;c.id.valid=false;var a=new VRerreur();a.code=ERR_104_CODE;a.message=ERR_104_MSG;c.id.erreurs.push(a)}return c};this.validUpdate=function(f){var h=this.validDelete(f);if(h.valid){var g=new AchatCommandeVR();if(isNaN(parseInt(f.id))){g.valid=false;g.log.valid=false;var c=new VRerreur();c.code=ERR_104_CODE;c.message=ERR_104_MSG;g.log.erreurs.push(c)}if(!f.idCompte.checkLength(0,11)){g.valid=false;g.idCompte.valid=false;var c=new VRerreur();c.code=ERR_101_CODE;c.message=ERR_101_MSG;g.idCompte.erreurs.push(c)}if(!f.idCompte.isInt()){g.valid=false;g.idCompte.valid=false;var c=new VRerreur();c.code=ERR_108_CODE;c.message=ERR_108_MSG;g.idCompte.erreurs.push(c)}if(f.idCompte.isEmpty()){g.valid=false;g.idCompte.valid=false;var c=new VRerreur();c.code=ERR_201_CODE;c.message=ERR_201_MSG;g.idCompte.erreurs.push(c)}if(isArray(f.produits)){if(f.produits.length>0){var b=new ProduitAchatValid();var e=0;while(f.produits[e]){var d=b.validAjout(f.produits[e]);if(!d.valid){g.valid=false}if(!f.produits[e].id.isEmpty()){g.produits[f.produits[e].id]=d}else{g.produits.push(d)}e++}}else{g.valid=false;g.log.valid=false;var c=new VRerreur();c.code=ERR_207_CODE;c.message=ERR_207_MSG;g.log.erreurs.push(c)}}else{g.valid=false;g.log.valid=false;var c=new VRerreur();c.code=ERR_111_CODE;c.message=ERR_111_MSG;g.log.erreurs.push(c)}if(!isNaN(f.rechargement.montant)&&f.rechargement.montant!=0){var a=new RechargementCompteValid();g.rechargement=a.validAjout(f.rechargement);if(!g.rechargement.valid){g.valid=false}}return g}return h}}function DetailCommandeValid(){this.validAjout=function(b){var c=new DetailCommandeVR();if(!b.idProduit.checkLength(0,11)){c.valid=false;c.idProduit.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.idProduit.erreurs.push(a)}if(b.idProduit!=""&&!b.idProduit.isInt()){c.valid=false;c.idProduit.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.idProduit.erreurs.push(a)}if(!b.taille.checkLength(0,12)){c.valid=false;c.taille.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.taille.erreurs.push(a)}if(!b.taille.isInt()){c.valid=false;c.taille.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.taille.erreurs.push(a)}if(!b.prix.checkLength(0,12)){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.prix.erreurs.push(a)}if(!b.prix.isFloat()){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_109_CODE;a.message=ERR_109_MSG;c.prix.erreurs.push(a)}if(b.taille.isEmpty()){c.valid=false;c.taille.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.taille.erreurs.push(a)}if(b.prix.isEmpty()){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.prix.erreurs.push(a)}if(parseFloat(b.taille)<=0){c.valid=false;c.taille.valid=false;var a=new VRerreur();a.code=ERR_215_CODE;a.message=ERR_215_MSG;c.taille.erreurs.push(a)}if(parseFloat(b.prix)<=0){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_215_CODE;a.message=ERR_215_MSG;c.prix.erreurs.push(a)}return c};this.validDelete=function(b){var c=new DetailCommandeVR();if(isNaN(parseInt(b.id))){c.valid=false;c.id.valid=false;var a=new VRerreur();a.code=ERR_104_CODE;a.message=ERR_104_MSG;c.id.erreurs.push(a)}return c};this.validUpdate=function(b){var d=this.validDelete(b);if(d.valid){var c=new DetailCommandeVR();if(!b.idProduit.checkLength(0,11)){c.valid=false;c.idProduit.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.idProduit.erreurs.push(a)}if(!b.idProduit.isInt()){c.valid=false;c.idProduit.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.idProduit.erreurs.push(a)}if(!b.taille.checkLength(0,12)){c.valid=false;c.taille.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.taille.erreurs.push(a)}if(!b.taille.isInt()){c.valid=false;c.taille.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.taille.erreurs.push(a)}if(!b.prix.checkLength(0,12)){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.prix.erreurs.push(a)}if(!b.prix.isFloat()){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_109_CODE;a.message=ERR_109_MSG;c.prix.erreurs.push(a)}if(b.idProduit.isEmpty()){c.valid=false;c.idProduit.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.idProduit.erreurs.push(a)}if(b.taille.isEmpty()){c.valid=false;c.taille.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.taille.erreurs.push(a)}if(b.prix.isEmpty()){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.prix.erreurs.push(a)}if(parseFloat(b.taille)<=0){c.valid=false;c.taille.valid=false;var a=new VRerreur();a.code=ERR_215_CODE;a.message=ERR_215_MSG;c.taille.erreurs.push(a)}if(parseFloat(b.prix)<=0){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_215_CODE;a.message=ERR_215_MSG;c.prix.erreurs.push(a)}return c}return d}}function ProduitBonDeCommandeValid(){this.validAjout=function(b){var c=new ProduitBonDeCommandeVR();if(!b.quantite.checkLength(0,12)){c.valid=false;c.quantite.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.quantite.erreurs.push(a)}if(!b.quantite.isFloat()){c.valid=false;c.quantite.valid=false;var a=new VRerreur();a.code=ERR_109_CODE;a.message=ERR_109_MSG;c.quantite.erreurs.push(a)}if(!b.prix.checkLength(0,12)){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.prix.erreurs.push(a)}if(!b.prix.isFloat()){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_109_CODE;a.message=ERR_109_MSG;c.prix.erreurs.push(a)}if(b.quantite.isEmpty()){c.valid=false;c.quantite.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.quantite.erreurs.push(a)}if(b.prix.isEmpty()){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.prix.erreurs.push(a)}if(b.quantite<=0){c.valid=false;c.quantite.valid=false;var a=new VRerreur();a.code=ERR_215_CODE;a.message=ERR_215_MSG;c.quantite.erreurs.push(a)}if(b.prix<=0){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_215_CODE;a.message=ERR_215_MSG;c.prix.erreurs.push(a)}return c};this.validDelete=function(b){var c=new ProduitBonDeCommandeVR();if(isNaN(parseInt(b.id))){c.valid=false;c.id.valid=false;var a=new VRerreur();a.code=ERR_104_CODE;a.message=ERR_104_MSG;c.id.erreurs.push(a)}return c};this.validUpdate=function(b){var d=this.validDelete(b);if(d.valid){var c=new ProduitBonDeCommandeVR();if(!b.quantite.checkLength(0,12)){c.valid=false;c.quantite.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.quantite.erreurs.push(a)}if(!b.quantite.isFloat()){c.valid=false;c.quantite.valid=false;var a=new VRerreur();a.code=ERR_109_CODE;a.message=ERR_109_MSG;c.quantite.erreurs.push(a)}if(!b.prix.checkLength(0,12)){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.prix.erreurs.push(a)}if(!b.prix.isFloat()){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_109_CODE;a.message=ERR_109_MSG;c.prix.erreurs.push(a)}if(b.quantite.isEmpty()){c.valid=false;c.quantite.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.quantite.erreurs.push(a)}if(b.prix.isEmpty()){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.prix.erreurs.push(a)}return c}return d}}function ProduitsBonDeCommandeValid(){this.validAjout=function(e){var f=new ProduitsBonDeCommandeVR();if(!e.id_commande.checkLength(0,11)){f.valid=false;f.id_commande.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;f.id_commande.erreurs.push(b)}if(!e.id_commande.isInt()){f.valid=false;f.id_commande.valid=false;var b=new VRerreur();b.code=ERR_108_CODE;b.message=ERR_108_MSG;f.id_commande.erreurs.push(b)}if(!e.id_producteur.checkLength(0,11)){f.valid=false;f.id_producteur.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;f.id_producteur.erreurs.push(b)}if(!e.id_producteur.isInt()){f.valid=false;f.id_producteur.valid=false;var b=new VRerreur();b.code=ERR_108_CODE;b.message=ERR_108_MSG;f.id_producteur.erreurs.push(b)}if(!e.export_type.checkLength(0,1)){f.valid=false;f.export_type.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;f.export_type.erreurs.push(b)}if(!e.export_type.isInt()){f.valid=false;f.export_type.valid=false;var b=new VRerreur();b.code=ERR_108_CODE;b.message=ERR_108_MSG;f.export_type.erreurs.push(b)}if(!isArray(e.produits)){f.valid=false;f.log.valid=false;var b=new VRerreur();b.code=ERR_115_CODE;b.message=ERR_115_MSG;f.log.erreurs.push(b)}if(e.id_commande.isEmpty()){f.valid=false;f.id_commande.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.id_commande.erreurs.push(b)}if(e.id_producteur.isEmpty()){f.valid=false;f.id_producteur.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.id_producteur.erreurs.push(b)}if(e.export_type.isEmpty()){f.valid=false;f.export_type.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.export_type.erreurs.push(b)}if(e.produits.length>0){var a=new ProduitBonDeCommandeValid();var d=0;while(e.produits[d]){var c=a.validAjout(e.produits[d]);if(!c.valid){f.valid=false}f.produits[e.produits[d].id]=c;d++}}else{f.valid=false;f.log.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.log.erreurs.push(b)}return f};this.validDelete=function(b){var c=new ProduitsBonDeCommandeVR();if(isNaN(parseInt(b.id))){c.valid=false;c.id.valid=false;var a=new VRerreur();a.code=ERR_104_CODE;a.message=ERR_104_MSG;c.id.erreurs.push(a)}return c};this.validUpdate=function(b){var d=this.validDelete(b);if(d.valid){var c=new ProduitsBonDeCommandeVR();if(!b.id_commande.checkLength(0,11)){c.valid=false;c.id_commande.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.id_commande.erreurs.push(a)}if(!b.id_commande.isInt()){c.valid=false;c.id_commande.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.id_commande.erreurs.push(a)}if(!b.id_producteur.checkLength(0,11)){c.valid=false;c.id_producteur.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.id_producteur.erreurs.push(a)}if(!b.id_producteur.isInt()){c.valid=false;c.id_producteur.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.id_producteur.erreurs.push(a)}if(!b.export_type.checkLength(0,1)){c.valid=false;c.export_type.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.export_type.erreurs.push(a)}if(!b.export_type.isInt()){c.valid=false;c.export_type.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.export_type.erreurs.push(a)}if(!isArray(b.produits)){c.valid=false;c.log.valid=false;var a=new VRerreur();a.code=ERR_115_CODE;a.message=ERR_115_MSG;c.log.erreurs.push(a)}if(b.id_commande.isEmpty()){c.valid=false;c.id_commande.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.id_commande.erreurs.push(a)}if(b.id_producteur.isEmpty()){c.valid=false;c.id_producteur.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.id_producteur.erreurs.push(a)}if(b.export_type.isEmpty()){c.valid=false;c.export_type.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.export_type.erreurs.push(a)}return c}return d}}function ProducteurValid(){this.validAjout=function(c){var d=new ProducteurVR();if(!c.nom.checkLength(0,50)){d.valid=false;d.nom.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.nom.erreurs.push(a)}if(!c.prenom.checkLength(0,50)){d.valid=false;d.prenom.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.prenom.erreurs.push(a)}if(c.dateNaissance!=""&&!c.dateNaissance.checkDate("db")){d.valid=false;d.dateNaissance.valid=false;var a=new VRerreur();a.code=ERR_103_CODE;a.message=ERR_103_MSG;d.dateNaissance.erreurs.push(a)}if(c.dateNaissance!=""&&!c.dateNaissance.checkDateExist("db")){d.valid=false;d.dateNaissance.valid=false;var a=new VRerreur();a.code=ERR_105_CODE;a.message=ERR_105_MSG;d.dateNaissance.erreurs.push(a)}if(!c.compte.checkLength(0,30)){d.valid=false;d.compte.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.compte.erreurs.push(a)}if(!c.commentaire.checkLength(0,500)){d.valid=false;d.commentaire.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.commentaire.erreurs.push(a)}if(!c.courrielPrincipal.checkLength(0,100)){d.valid=false;d.courrielPrincipal.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.courrielPrincipal.erreurs.push(a)}if(c.courrielPrincipal!=""&&!c.courrielPrincipal.checkCourriel()){d.valid=false;d.courrielPrincipal.valid=false;var a=new VRerreur();a.code=ERR_102_CODE;a.message=ERR_102_MSG;d.courrielPrincipal.erreurs.push(a)}if(!c.courrielSecondaire.checkLength(0,100)){d.valid=false;d.courrielSecondaire.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.courrielSecondaire.erreurs.push(a)}if(c.courrielSecondaire!=""&&!c.courrielSecondaire.checkCourriel()){d.valid=false;d.courrielSecondaire.valid=false;var a=new VRerreur();a.code=ERR_102_CODE;a.message=ERR_102_MSG;d.courrielSecondaire.erreurs.push(a)}if(!c.telephonePrincipal.checkLength(0,20)){d.valid=false;d.telephonePrincipal.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.telephonePrincipal.erreurs.push(a)}if(!c.telephoneSecondaire.checkLength(0,20)){d.valid=false;d.telephoneSecondaire.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.telephoneSecondaire.erreurs.push(a)}if(!c.adresse.checkLength(0,300)){d.valid=false;d.adresse.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.adresse.erreurs.push(a)}if(!c.codePostal.checkLength(0,10)){d.valid=false;d.codePostal.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.codePostal.erreurs.push(a)}if(!c.ville.checkLength(0,100)){d.valid=false;d.ville.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.ville.erreurs.push(a)}if(c.nom.isEmpty()){d.valid=false;d.nom.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;d.nom.erreurs.push(a)}if(c.prenom.isEmpty()){d.valid=false;d.prenom.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;d.prenom.erreurs.push(a)}var b=getDateAujourdhuiDb();if(c.dateNaissance!=""&&!dateEstPLusGrandeEgale(b,c.dateNaissance,"db")){d.valid=false;d.dateNaissance.valid=false;var a=new VRerreur();a.code=ERR_230_CODE;a.message=ERR_230_MSG;d.dateNaissance.erreurs.push(a)}return d};this.validDelete=function(b){var c=new ProducteurVR();if(isNaN(parseInt(b.id))){c.valid=false;c.id.valid=false;var a=new VRerreur();a.code=ERR_104_CODE;a.message=ERR_104_MSG;c.id.erreurs.push(a)}return c};this.validUpdate=function(c){var e=this.validDelete(c);if(e.valid){var d=new ProducteurVR();if(!c.nom.checkLength(0,50)){d.valid=false;d.nom.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.nom.erreurs.push(a)}if(!c.prenom.checkLength(0,50)){d.valid=false;d.prenom.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.prenom.erreurs.push(a)}if(c.dateNaissance!=""&&!c.dateNaissance.checkDate("db")){d.valid=false;d.dateNaissance.valid=false;var a=new VRerreur();a.code=ERR_103_CODE;a.message=ERR_103_MSG;d.dateNaissance.erreurs.push(a)}if(c.dateNaissance!=""&&!c.dateNaissance.checkDateExist("db")){d.valid=false;d.dateNaissance.valid=false;var a=new VRerreur();a.code=ERR_105_CODE;a.message=ERR_105_MSG;d.dateNaissance.erreurs.push(a)}if(!c.compte.checkLength(0,30)){d.valid=false;d.compte.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.compte.erreurs.push(a)}if(!c.commentaire.checkLength(0,500)){d.valid=false;d.commentaire.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.commentaire.erreurs.push(a)}if(!c.courrielPrincipal.checkLength(0,100)){d.valid=false;d.courrielPrincipal.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.courrielPrincipal.erreurs.push(a)}if(c.courrielPrincipal!=""&&!c.courrielPrincipal.checkCourriel()){d.valid=false;d.courrielPrincipal.valid=false;var a=new VRerreur();a.code=ERR_102_CODE;a.message=ERR_102_MSG;d.courrielPrincipal.erreurs.push(a)}if(!c.courrielSecondaire.checkLength(0,100)){d.valid=false;d.courrielSecondaire.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.courrielSecondaire.erreurs.push(a)}if(c.courrielSecondaire!=""&&!c.courrielSecondaire.checkCourriel()){d.valid=false;d.courrielSecondaire.valid=false;var a=new VRerreur();a.code=ERR_102_CODE;a.message=ERR_102_MSG;d.courrielSecondaire.erreurs.push(a)}if(!c.telephonePrincipal.checkLength(0,20)){d.valid=false;d.telephonePrincipal.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.telephonePrincipal.erreurs.push(a)}if(!c.telephoneSecondaire.checkLength(0,20)){d.valid=false;d.telephoneSecondaire.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.telephoneSecondaire.erreurs.push(a)}if(!c.adresse.checkLength(0,300)){d.valid=false;d.adresse.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.adresse.erreurs.push(a)}if(!c.codePostal.checkLength(0,10)){d.valid=false;d.codePostal.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.codePostal.erreurs.push(a)}if(!c.ville.checkLength(0,100)){d.valid=false;d.ville.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.ville.erreurs.push(a)}if(c.nom.isEmpty()){d.valid=false;d.nom.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;d.nom.erreurs.push(a)}if(c.prenom.isEmpty()){d.valid=false;d.prenom.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;d.prenom.erreurs.push(a)}var b=getDateAujourdhuiDb();if(c.dateNaissance!=""&&!dateEstPLusGrandeEgale(b,c.dateNaissance,"db")){d.valid=false;d.dateNaissance.valid=false;var a=new VRerreur();a.code=ERR_230_CODE;a.message=ERR_230_MSG;d.dateNaissance.erreurs.push(a)}return d}return e}}function ProduitsBonDeLivraisonValid(){this.validAjout=function(e){var f=new ProduitsBonDeLivraisonVR();if(!e.id_commande.checkLength(0,11)){f.valid=false;f.id_commande.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;f.id_commande.erreurs.push(b)}if(!e.id_commande.isInt()){f.valid=false;f.id_commande.valid=false;var b=new VRerreur();b.code=ERR_108_CODE;b.message=ERR_108_MSG;f.id_commande.erreurs.push(b)}if(!e.id_producteur.checkLength(0,11)){f.valid=false;f.id_producteur.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;f.id_producteur.erreurs.push(b)}if(!e.id_producteur.isInt()){f.valid=false;f.id_producteur.valid=false;var b=new VRerreur();b.code=ERR_108_CODE;b.message=ERR_108_MSG;f.id_producteur.erreurs.push(b)}if(!e.export_type.checkLength(0,1)){f.valid=false;f.export_type.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;f.export_type.erreurs.push(b)}if(!e.export_type.isInt()){f.valid=false;f.export_type.valid=false;var b=new VRerreur();b.code=ERR_108_CODE;b.message=ERR_108_MSG;f.export_type.erreurs.push(b)}if(!isArray(e.produits)){f.valid=false;f.log.valid=false;var b=new VRerreur();b.code=ERR_115_CODE;b.message=ERR_115_MSG;f.log.erreurs.push(b)}if(!e.typePaiement.checkLength(0,11)){f.valid=false;f.typePaiement.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;f.typePaiement.erreurs.push(b)}if(!e.typePaiement.isInt()){f.valid=false;f.typePaiement.valid=false;var b=new VRerreur();b.code=ERR_108_CODE;b.message=ERR_108_MSG;f.typePaiement.erreurs.push(b)}if(!e.total.checkLength(0,12)){f.valid=false;f.total.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;f.total.erreurs.push(b)}if(!e.total.isFloat()){f.valid=false;f.total.valid=false;var b=new VRerreur();b.code=ERR_109_CODE;b.message=ERR_109_MSG;f.total.erreurs.push(b)}if(!e.typePaiementChampComplementaireObligatoire.checkLength(0,1)){f.valid=false;f.typePaiementChampComplementaireObligatoire.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;f.typePaiementChampComplementaireObligatoire.erreurs.push(b)}if(!e.typePaiementChampComplementaireObligatoire.isInt()){f.valid=false;f.typePaiementChampComplementaireObligatoire.valid=false;var b=new VRerreur();b.code=ERR_108_CODE;b.message=ERR_108_MSG;f.typePaiementChampComplementaireObligatoire.erreurs.push(b)}if(e.typePaiementChampComplementaire!=""&&!e.typePaiementChampComplementaire.checkLength(0,50)){f.valid=false;f.typePaiementChampComplementaire.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;f.typePaiementChampComplementaire.erreurs.push(b)}if(e.id_commande.isEmpty()){f.valid=false;f.id_commande.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.id_commande.erreurs.push(b)}if(e.id_producteur.isEmpty()){f.valid=false;f.id_producteur.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.id_producteur.erreurs.push(b)}if(e.export_type.isEmpty()){f.valid=false;f.export_type.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.export_type.erreurs.push(b)}if(e.typePaiement.isEmpty()){f.valid=false;f.typePaiement.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.typePaiement.erreurs.push(b)}if(e.total.isEmpty()){f.valid=false;f.total.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.total.erreurs.push(b)}if(e.typePaiement==0){f.valid=false;f.typePaiement.valid=false;var b=new VRerreur();b.code=ERR_236_CODE;b.message=ERR_236_MSG;f.typePaiement.erreurs.push(b)}if(e.total<=0){f.valid=false;f.total.valid=false;var b=new VRerreur();b.code=ERR_215_CODE;b.message=ERR_215_MSG;f.total.erreurs.push(b)}if(e.typePaiementChampComplementaireObligatoire.isEmpty()){f.valid=false;f.typePaiementChampComplementaireObligatoire.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.typePaiementChampComplementaireObligatoire.erreurs.push(b)}if(e.typePaiementChampComplementaireObligatoire==1&&e.typePaiementChampComplementaire.isEmpty()){f.valid=false;f.typePaiementChampComplementaire.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.typePaiementChampComplementaire.erreurs.push(b)}if(e.produits.length>0){var a=new ProduitBonDeLivraisonValid();var d=0;while(e.produits[d]){var c=a.validAjout(e.produits[d]);if(!c.valid){f.valid=false}f.produits[e.produits[d].id]=c;d++}}else{f.valid=false;f.log.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.log.erreurs.push(b)}return f};this.validDelete=function(b){var c=new ProduitsBonDeLivraisonVR();if(isNaN(parseInt(b.id))){c.valid=false;c.id.valid=false;var a=new VRerreur();a.code=ERR_104_CODE;a.message=ERR_104_MSG;c.id.erreurs.push(a)}return c};this.validUpdate=function(b){var d=this.validDelete(b);if(d.valid){var c=new ProduitsBonDeLivraisonVR();if(!b.id_commande.checkLength(0,11)){c.valid=false;c.id_commande.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.id_commande.erreurs.push(a)}if(!b.id_commande.isInt()){c.valid=false;c.id_commande.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.id_commande.erreurs.push(a)}if(!b.id_producteur.checkLength(0,11)){c.valid=false;c.id_producteur.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.id_producteur.erreurs.push(a)}if(!b.id_producteur.isInt()){c.valid=false;c.id_producteur.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.id_producteur.erreurs.push(a)}if(!b.export_type.checkLength(0,1)){c.valid=false;c.export_type.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.export_type.erreurs.push(a)}if(!b.export_type.isInt()){c.valid=false;c.export_type.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.export_type.erreurs.push(a)}if(!isArray(b.produits)){c.valid=false;c.log.valid=false;var a=new VRerreur();a.code=ERR_115_CODE;a.message=ERR_115_MSG;c.log.erreurs.push(a)}if(b.id_commande.isEmpty()){c.valid=false;c.id_commande.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.id_commande.erreurs.push(a)}if(b.id_producteur.isEmpty()){c.valid=false;c.id_producteur.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.id_producteur.erreurs.push(a)}if(b.export_type.isEmpty()){c.valid=false;c.export_type.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.export_type.erreurs.push(a)}return c}return d}}function InfoAdherentValid(){this.validAjout=function(b){var c=new InfoAdherentVR();if(!b.motPasse.checkLength(0,100)){c.valid=false;c.motPasse.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.motPasse.erreurs.push(a)}if(!b.motPasseNouveau.checkLength(0,100)){c.valid=false;c.motPasseNouveau.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.motPasseNouveau.erreurs.push(a)}if(!b.motPasseConfirm.checkLength(0,100)){c.valid=false;c.motPasseConfirm.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.motPasseConfirm.erreurs.push(a)}if(b.motPasse.isEmpty()){c.valid=false;c.motPasse.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.motPasse.erreurs.push(a)}if(b.motPasseNouveau.isEmpty()){c.valid=false;c.motPasseNouveau.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.motPasseNouveau.erreurs.push(a)}if(b.motPasseConfirm.isEmpty()){c.valid=false;c.motPasseConfirm.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.motPasseConfirm.erreurs.push(a)}if(b.motPasseNouveau!==b.motPasseConfirm){c.valid=false;c.motPasseNouveau.valid=false;var a=new VRerreur();a.code=ERR_223_CODE;a.message=ERR_223_MSG;c.motPasseNouveau.erreurs.push(a)}return c};this.validDelete=function(b){var c=new InfoAdherentVR();if(isNaN(parseInt(b.id))){c.valid=false;c.id.valid=false;var a=new VRerreur();a.code=ERR_104_CODE;a.message=ERR_104_MSG;c.id.erreurs.push(a)}return c};this.validUpdate=function(b){var d=this.validDelete(b);if(d.valid){var c=new InfoAdherentVR();if(!b.motPasse.checkLength(0,100)){c.valid=false;c.motPasse.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.motPasse.erreurs.push(a)}if(!b.motPasseNouveau.checkLength(0,100)){c.valid=false;c.motPasseNouveau.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.motPasseNouveau.erreurs.push(a)}if(!b.motPasseConfirm.checkLength(0,100)){c.valid=false;c.motPasseConfirm.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.motPasseConfirm.erreurs.push(a)}if(b.motPasse.isEmpty()){c.valid=false;c.motPasse.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.motPasse.erreurs.push(a)}if(b.motPasseNouveau.isEmpty()){c.valid=false;c.motPasseNouveau.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.motPasseNouveau.erreurs.push(a)}if(b.motPasseConfirm.isEmpty()){c.valid=false;c.motPasseConfirm.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.motPasseConfirm.erreurs.push(a)}if(b.motPasseNouveau!==b.motPasseConfirm){c.valid=false;c.motPasseNouveau.valid=false;var a=new VRerreur();a.code=ERR_223_CODE;a.message=ERR_223_MSG;c.motPasseNouveau.erreurs.push(a)}return c}return d}}function ProduitBonDeLivraisonValid(){this.validAjout=function(b){var c=new ProduitBonDeLivraisonVR();if(!b.quantite.checkLength(0,12)){c.valid=false;c.quantite.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.quantite.erreurs.push(a)}if(!b.quantite.isFloat()){c.valid=false;c.quantite.valid=false;var a=new VRerreur();a.code=ERR_109_CODE;a.message=ERR_109_MSG;c.quantite.erreurs.push(a)}if(!b.prix.checkLength(0,12)){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.prix.erreurs.push(a)}if(!b.prix.isFloat()){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_109_CODE;a.message=ERR_109_MSG;c.prix.erreurs.push(a)}if(b.quantiteSolidaire!=""&&!b.quantiteSolidaire.checkLength(0,12)){c.valid=false;c.quantiteSolidaire.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.quantiteSolidaire.erreurs.push(a)}if(b.quantiteSolidaire!=""&&!b.quantiteSolidaire.isFloat()){c.valid=false;c.quantiteSolidaire.valid=false;var a=new VRerreur();a.code=ERR_109_CODE;a.message=ERR_109_MSG;c.quantiteSolidaire.erreurs.push(a)}if(b.quantite.isEmpty()){c.valid=false;c.quantite.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.quantite.erreurs.push(a)}if(b.prix.isEmpty()){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.prix.erreurs.push(a)}if(b.quantite<=0){c.valid=false;c.quantite.valid=false;var a=new VRerreur();a.code=ERR_215_CODE;a.message=ERR_215_MSG;c.quantite.erreurs.push(a)}if(b.quantiteSolidaire!=""&&b.quantiteSolidaire<=0){c.valid=false;c.quantiteSolidaire.valid=false;var a=new VRerreur();a.code=ERR_215_CODE;a.message=ERR_215_MSG;c.quantiteSolidaire.erreurs.push(a)}if(b.prix<=0){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_215_CODE;a.message=ERR_215_MSG;c.prix.erreurs.push(a)}return c};this.validDelete=function(b){var c=new ProduitBonDeLivraisonVR();if(isNaN(parseInt(b.id))){c.valid=false;c.id.valid=false;var a=new VRerreur();a.code=ERR_104_CODE;a.message=ERR_104_MSG;c.id.erreurs.push(a)}return c};this.validUpdate=function(b){var d=this.validDelete(b);if(d.valid){var c=new ProduitBonDeLivraisonVR();if(!b.quantite.checkLength(0,12)){c.valid=false;c.quantite.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.quantite.erreurs.push(a)}if(!b.quantite.isFloat()){c.valid=false;c.quantite.valid=false;var a=new VRerreur();a.code=ERR_109_CODE;a.message=ERR_109_MSG;c.quantite.erreurs.push(a)}if(!b.prix.checkLength(0,12)){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.prix.erreurs.push(a)}if(!b.prix.isFloat()){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_109_CODE;a.message=ERR_109_MSG;c.prix.erreurs.push(a)}if(b.quantite.isEmpty()){c.valid=false;c.quantite.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.quantite.erreurs.push(a)}if(b.prix.isEmpty()){c.valid=false;c.prix.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.prix.erreurs.push(a)}return c}return d}}function AdherentValid(){this.validAjout=function(c){var d=new AdherentVR();if(!c.motPasse.checkLength(0,100)){d.valid=false;d.motPasse.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.motPasse.erreurs.push(a)}if(!c.motPasseConfirm.checkLength(0,100)){d.valid=false;d.motPasseConfirm.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.motPasseConfirm.erreurs.push(a)}if(!c.numero.checkLength(0,5)){d.valid=false;d.numero.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.numero.erreurs.push(a)}if(!c.compte.checkLength(0,30)){d.valid=false;d.compte.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.compte.erreurs.push(a)}if(!c.nom.checkLength(0,50)){d.valid=false;d.nom.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.nom.erreurs.push(a)}if(!c.prenom.checkLength(0,50)){d.valid=false;d.prenom.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.prenom.erreurs.push(a)}if(!c.courrielPrincipal.checkLength(0,100)){d.valid=false;d.courrielPrincipal.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.courrielPrincipal.erreurs.push(a)}if(!c.courrielSecondaire.checkLength(0,100)){d.valid=false;d.courrielSecondaire.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.courrielSecondaire.erreurs.push(a)}if(!c.telephonePrincipal.checkLength(0,20)){d.valid=false;d.telephonePrincipal.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.telephonePrincipal.erreurs.push(a)}if(!c.telephoneSecondaire.checkLength(0,20)){d.valid=false;d.telephoneSecondaire.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.telephoneSecondaire.erreurs.push(a)}if(!c.adresse.checkLength(0,300)){d.valid=false;d.adresse.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.adresse.erreurs.push(a)}if(!c.codePostal.checkLength(0,10)){d.valid=false;d.codePostal.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.codePostal.erreurs.push(a)}if(!c.ville.checkLength(0,100)){d.valid=false;d.ville.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.ville.erreurs.push(a)}if(c.dateNaissance!=""&&!c.dateNaissance.checkDate("db")){d.valid=false;d.dateNaissance.valid=false;var a=new VRerreur();a.code=ERR_103_CODE;a.message=ERR_103_MSG;d.dateNaissance.erreurs.push(a)}if(c.dateNaissance!=""&&!c.dateNaissance.checkDateExist("db")){d.valid=false;d.dateNaissance.valid=false;var a=new VRerreur();a.code=ERR_105_CODE;a.message=ERR_105_MSG;d.dateNaissance.erreurs.push(a)}if(!c.dateAdhesion.checkDate("db")){d.valid=false;d.dateAdhesion.valid=false;var a=new VRerreur();a.code=ERR_103_CODE;a.message=ERR_103_MSG;d.dateAdhesion.erreurs.push(a)}if(!c.dateAdhesion.checkDateExist("db")){d.valid=false;d.dateAdhesion.valid=false;var a=new VRerreur();a.code=ERR_105_CODE;a.message=ERR_105_MSG;d.dateAdhesion.erreurs.push(a)}if(!c.commentaire.checkLength(0,500)){d.valid=false;d.commentaire.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.commentaire.erreurs.push(a)}if(c.motPasse.isEmpty()){d.valid=false;d.motPasse.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;d.motPasse.erreurs.push(a)}if(c.motPasseConfirm.isEmpty()){d.valid=false;d.motPasseConfirm.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;d.motPasseConfirm.erreurs.push(a)}if(c.nom.isEmpty()){d.valid=false;d.nom.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;d.nom.erreurs.push(a)}if(c.prenom.isEmpty()){d.valid=false;d.prenom.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;d.prenom.erreurs.push(a)}if(c.dateAdhesion.isEmpty()){d.valid=false;d.dateAdhesion.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;d.dateAdhesion.erreurs.push(a)}if(c.motPasse!==c.motPasseConfirm){d.valid=false;d.motPasse.valid=false;var a=new VRerreur();a.code=ERR_223_CODE;a.message=ERR_223_MSG;d.motPasse.erreurs.push(a)}if(c.courrielPrincipal!=""&&!c.courrielPrincipal.checkCourriel()){d.valid=false;d.courrielPrincipal.valid=false;var a=new VRerreur();a.code=ERR_224_CODE;a.message=ERR_224_MSG;d.courrielPrincipal.erreurs.push(a)}if(c.courrielSecondaire!=""&&!c.courrielSecondaire.checkCourriel()){d.valid=false;d.courrielSecondaire.valid=false;var a=new VRerreur();a.code=ERR_224_CODE;a.message=ERR_224_MSG;d.courrielSecondaire.erreurs.push(a)}var b=getDateAujourdhuiDb();if(!dateEstPLusGrandeEgale(b,c.dateAdhesion,"db")){d.valid=false;d.dateAdhesion.valid=false;var a=new VRerreur();a.code=ERR_230_CODE;a.message=ERR_230_MSG;d.dateAdhesion.erreurs.push(a)}if(c.dateNaissance!=""&&!dateEstPLusGrandeEgale(c.dateAdhesion,c.dateNaissance,"db")){d.valid=false;d.dateNaissance.valid=false;var a=new VRerreur();a.code=ERR_225_CODE;a.message=ERR_225_MSG;d.dateNaissance.erreurs.push(a)}if(c.dateNaissance!=""&&!dateEstPLusGrandeEgale(b,c.dateNaissance,"db")){d.valid=false;d.dateNaissance.valid=false;var a=new VRerreur();a.code=ERR_230_CODE;a.message=ERR_230_MSG;d.dateNaissance.erreurs.push(a)}if(isArray(c.modules)){if(c.modules.length<=0){d.valid=false;d.log.valid=false;var a=new VRerreur();a.code=ERR_226_CODE;a.message=ERR_226_MSG;d.log.erreurs.push(a)}}else{d.valid=false;d.log.valid=false;var a=new VRerreur();a.code=ERR_115_CODE;a.message=ERR_115_MSG;d.log.erreurs.push(a)}return d};this.validDelete=function(b){var c=new AdherentVR();if(isNaN(parseInt(b.id))){c.valid=false;c.id.valid=false;var a=new VRerreur();a.code=ERR_104_CODE;a.message=ERR_104_MSG;c.id.erreurs.push(a)}return c};this.validUpdate=function(c){var e=this.validDelete(c);if(e.valid){var d=new AdherentVR();if(!c.motPasse.checkLength(0,100)){d.valid=false;d.motPasse.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.motPasse.erreurs.push(a)}if(!c.motPasseConfirm.checkLength(0,100)){d.valid=false;d.motPasseConfirm.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.motPasseConfirm.erreurs.push(a)}if(!c.numero.checkLength(0,5)){d.valid=false;d.numero.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.numero.erreurs.push(a)}if(!c.compte.checkLength(0,30)){d.valid=false;d.compte.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.compte.erreurs.push(a)}if(!c.nom.checkLength(0,50)){d.valid=false;d.nom.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.nom.erreurs.push(a)}if(!c.prenom.checkLength(0,50)){d.valid=false;d.prenom.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.prenom.erreurs.push(a)}if(!c.courrielPrincipal.checkLength(0,100)){d.valid=false;d.courrielPrincipal.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.courrielPrincipal.erreurs.push(a)}if(!c.courrielSecondaire.checkLength(0,100)){d.valid=false;d.courrielSecondaire.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.courrielSecondaire.erreurs.push(a)}if(!c.telephonePrincipal.checkLength(0,20)){d.valid=false;d.telephonePrincipal.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.telephonePrincipal.erreurs.push(a)}if(!c.telephoneSecondaire.checkLength(0,20)){d.valid=false;d.telephoneSecondaire.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.telephoneSecondaire.erreurs.push(a)}if(!c.adresse.checkLength(0,300)){d.valid=false;d.adresse.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.adresse.erreurs.push(a)}if(!c.codePostal.checkLength(0,10)){d.valid=false;d.codePostal.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.codePostal.erreurs.push(a)}if(!c.ville.checkLength(0,100)){d.valid=false;d.ville.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.ville.erreurs.push(a)}if(c.dateNaissance!=""&&!c.dateNaissance.checkDate("db")){d.valid=false;d.dateNaissance.valid=false;var a=new VRerreur();a.code=ERR_103_CODE;a.message=ERR_103_MSG;d.dateNaissance.erreurs.push(a)}if(c.dateNaissance!=""&&!c.dateNaissance.checkDateExist("db")){d.valid=false;d.dateNaissance.valid=false;var a=new VRerreur();a.code=ERR_105_CODE;a.message=ERR_105_MSG;d.dateNaissance.erreurs.push(a)}if(!c.dateAdhesion.checkDate("db")){d.valid=false;d.dateAdhesion.valid=false;var a=new VRerreur();a.code=ERR_103_CODE;a.message=ERR_103_MSG;d.dateAdhesion.erreurs.push(a)}if(!c.dateAdhesion.checkDateExist("db")){d.valid=false;d.dateAdhesion.valid=false;var a=new VRerreur();a.code=ERR_105_CODE;a.message=ERR_105_MSG;d.dateAdhesion.erreurs.push(a)}if(!c.commentaire.checkLength(0,500)){d.valid=false;d.commentaire.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;d.commentaire.erreurs.push(a)}if(c.nom.isEmpty()){d.valid=false;d.nom.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;d.nom.erreurs.push(a)}if(c.prenom.isEmpty()){d.valid=false;d.prenom.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;d.prenom.erreurs.push(a)}if(c.dateAdhesion.isEmpty()){d.valid=false;d.dateAdhesion.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;d.dateAdhesion.erreurs.push(a)}if(c.compte.isEmpty()){d.valid=false;d.compte.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;d.compte.erreurs.push(a)}if((c.motPasse!=""||c.motPasseConfirm!="")&&c.motPasse!==c.motPasseConfirm){d.valid=false;d.motPasse.valid=false;var a=new VRerreur();a.code=ERR_223_CODE;a.message=ERR_223_MSG;d.motPasse.erreurs.push(a)}if(c.courrielPrincipal!=""&&!c.courrielPrincipal.checkCourriel()){d.valid=false;d.courrielPrincipal.valid=false;var a=new VRerreur();a.code=ERR_224_CODE;a.message=ERR_224_MSG;d.courrielPrincipal.erreurs.push(a)}if(c.courrielSecondaire!=""&&!c.courrielSecondaire.checkCourriel()){d.valid=false;d.courrielSecondaire.valid=false;var a=new VRerreur();a.code=ERR_224_CODE;a.message=ERR_224_MSG;d.courrielSecondaire.erreurs.push(a)}var b=getDateAujourdhuiDb();if(!dateEstPLusGrandeEgale(b,c.dateAdhesion,"db")){d.valid=false;d.dateAdhesion.valid=false;var a=new VRerreur();a.code=ERR_230_CODE;a.message=ERR_230_MSG;d.dateAdhesion.erreurs.push(a)}if(c.dateNaissance!=""&&!dateEstPLusGrandeEgale(c.dateAdhesion,c.dateNaissance,"db")){d.valid=false;d.dateNaissance.valid=false;var a=new VRerreur();a.code=ERR_225_CODE;a.message=ERR_225_MSG;d.dateNaissance.erreurs.push(a)}if(c.dateNaissance!=""&&!dateEstPLusGrandeEgale(b,c.dateNaissance,"db")){d.valid=false;d.dateNaissance.valid=false;var a=new VRerreur();a.code=ERR_230_CODE;a.message=ERR_230_MSG;d.dateNaissance.erreurs.push(a)}if(isArray(c.modules)){if(c.modules.length<=0){d.valid=false;d.log.valid=false;var a=new VRerreur();a.code=ERR_226_CODE;a.message=ERR_226_MSG;d.log.erreurs.push(a)}}else{d.valid=false;d.log.valid=false;var a=new VRerreur();a.code=ERR_115_CODE;a.message=ERR_115_MSG;d.log.erreurs.push(a)}return d}return e}}function RechargementCompteValid(){this.validAjout=function(b){var c=new RechargementCompteVR();if(isNaN(parseInt(b.id))){c.valid=false;c.log.valid=false;var a=new VRerreur();a.code=ERR_104_CODE;a.message=ERR_104_MSG;c.log.erreurs.push(a)}if(!b.montant.checkLength(0,12)){c.valid=false;c.montant.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.montant.erreurs.push(a)}if(!b.montant.isFloat()){c.valid=false;c.montant.valid=false;var a=new VRerreur();a.code=ERR_109_CODE;a.message=ERR_109_MSG;c.montant.erreurs.push(a)}if(!b.typePaiement.checkLength(0,11)){c.valid=false;c.typePaiement.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.typePaiement.erreurs.push(a)}if(!b.typePaiement.isInt()){c.valid=false;c.typePaiement.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.typePaiement.erreurs.push(a)}if(!b.champComplementaireObligatoire.checkLength(0,1)){c.valid=false;c.champComplementaireObligatoire.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.champComplementaireObligatoire.erreurs.push(a)}if(!b.champComplementaireObligatoire.isInt()){c.valid=false;c.champComplementaireObligatoire.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.champComplementaireObligatoire.erreurs.push(a)}if(b.champComplementaire!=""&&!b.champComplementaire.checkLength(0,50)){c.valid=false;c.champComplementaire.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.champComplementaire.erreurs.push(a)}if(b.montant.isEmpty()){c.valid=false;c.montant.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.montant.erreurs.push(a)}if(b.montant<0){c.valid=false;c.montant.valid=false;var a=new VRerreur();a.code=ERR_215_CODE;a.message=ERR_215_MSG;c.montant.erreurs.push(a)}if(b.typePaiement.isEmpty()||b.typePaiement==0){c.valid=false;c.typePaiement.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.typePaiement.erreurs.push(a)}if(b.champComplementaireObligatoire.isEmpty()){c.valid=false;c.champComplementaireObligatoire.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.champComplementaireObligatoire.erreurs.push(a)}if(b.champComplementaireObligatoire==1&&b.champComplementaire.isEmpty()){c.valid=false;c.champComplementaire.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.champComplementaire.erreurs.push(a)}return c};this.validDelete=function(b){var c=new RechargementCompteVR();if(isNaN(parseInt(b.id))){c.valid=false;c.id.valid=false;var a=new VRerreur();a.code=ERR_104_CODE;a.message=ERR_104_MSG;c.id.erreurs.push(a)}return c};this.validUpdate=function(b){var d=this.validDelete(b);if(d.valid){var c=new RechargementCompteVR();if(isNaN(parseInt(b.id))){c.valid=false;c.log.valid=false;var a=new VRerreur();a.code=ERR_104_CODE;a.message=ERR_104_MSG;c.log.erreurs.push(a)}if(!b.montant.checkLength(0,12)){c.valid=false;c.montant.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.montant.erreurs.push(a)}if(!b.montant.isFloat()){c.valid=false;c.montant.valid=false;var a=new VRerreur();a.code=ERR_109_CODE;a.message=ERR_109_MSG;c.montant.erreurs.push(a)}if(!b.typePaiement.checkLength(0,11)){c.valid=false;c.typePaiement.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.typePaiement.erreurs.push(a)}if(!b.typePaiement.isInt()){c.valid=false;c.typePaiement.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.typePaiement.erreurs.push(a)}if(!b.champComplementaireObligatoire.checkLength(0,1)){c.valid=false;c.champComplementaireObligatoire.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.champComplementaireObligatoire.erreurs.push(a)}if(!b.champComplementaireObligatoire.isInt()){c.valid=false;c.champComplementaireObligatoire.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.champComplementaireObligatoire.erreurs.push(a)}if(b.champComplementaire!=""&&!b.champComplementaire.checkLength(0,50)){c.valid=false;c.champComplementaire.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.champComplementaire.erreurs.push(a)}if(b.montant.isEmpty()){c.valid=false;c.montant.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.montant.erreurs.push(a)}if(b.montant<0){c.valid=false;c.montant.valid=false;var a=new VRerreur();a.code=ERR_215_CODE;a.message=ERR_215_MSG;c.montant.erreurs.push(a)}if(b.typePaiement.isEmpty()){c.valid=false;c.log.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.log.erreurs.push(a)}if(b.champComplementaireObligatoire.isEmpty()){c.valid=false;c.champComplementaireObligatoire.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.champComplementaireObligatoire.erreurs.push(a)}if(b.champComplementaireObligatoire==1&&b.champComplementaire.isEmpty()){c.valid=false;c.champComplementaire.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.champComplementaire.erreurs.push(a)}return c}return d}}function ReservationCommandeValid(){this.validAjout=function(b){var c=new ReservationCommandeVR();if(!b.stoQuantite.checkLength(0,12)){c.valid=false;c.stoQuantite.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.stoQuantite.erreurs.push(a)}if(!b.stoQuantite.isFloat()){c.valid=false;c.stoQuantite.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.stoQuantite.erreurs.push(a)}if(!b.stoIdDetailCommande.checkLength(0,11)){c.valid=false;c.stoIdDetailCommande.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.stoIdDetailCommande.erreurs.push(a)}if(!b.stoIdDetailCommande.isFloat()){c.valid=false;c.stoIdDetailCommande.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.stoIdDetailCommande.erreurs.push(a)}if(b.stoQuantite.isEmpty()){c.valid=false;c.stoQuantite.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.stoQuantite.erreurs.push(a)}if(b.stoIdDetailCommande.isEmpty()){c.valid=false;c.stoIdDetailCommande.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.stoIdDetailCommande.erreurs.push(a)}return c};this.validDelete=function(b){var c=new ReservationCommandeVR();if(isNaN(parseInt(b.id))){c.valid=false;c.id.valid=false;var a=new VRerreur();a.code=ERR_104_CODE;a.message=ERR_104_MSG;c.id.erreurs.push(a)}return c};this.validUpdate=function(b){var d=this.validDelete(b);if(d.valid){var c=new ReservationCommandeVR();if(!b.stoQuantite.checkLength(0,12)){c.valid=false;c.stoQuantite.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.stoQuantite.erreurs.push(a)}if(!b.stoQuantite.isFloat()){c.valid=false;c.stoQuantite.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.stoQuantite.erreurs.push(a)}if(!b.stoIdDetailCommande.checkLength(0,11)){c.valid=false;c.stoIdDetailCommande.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.stoIdDetailCommande.erreurs.push(a)}if(!b.stoIdDetailCommande.isFloat()){c.valid=false;c.stoIdDetailCommande.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.stoIdDetailCommande.erreurs.push(a)}if(b.stoQuantite.isEmpty()){c.valid=false;c.stoQuantite.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.stoQuantite.erreurs.push(a)}if(b.stoIdDetailCommande.isEmpty()){c.valid=false;c.stoIdDetailCommande.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.stoIdDetailCommande.erreurs.push(a)}return c}return d}}function ExportBonReservationValid(){this.validAjout=function(b){var c=new ExportBonReservationVR();if(!b.pParam.checkLength(0,1)){c.valid=false;c.pParam.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.pParam.erreurs.push(a)}if(!b.pParam.isInt()){c.valid=false;c.pParam.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.pParam.erreurs.push(a)}if(!b.export_type.checkLength(0,1)){c.valid=false;c.export_type.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.export_type.erreurs.push(a)}if(!b.export_type.isInt()){c.valid=false;c.export_type.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.export_type.erreurs.push(a)}if(!b.id_commande.checkLength(0,11)){c.valid=false;c.id_commande.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.id_commande.erreurs.push(a)}if(!b.id_commande.isInt()){c.valid=false;c.id_commande.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.id_commande.erreurs.push(a)}if(!b.format.checkLength(0,1)){c.valid=false;c.format.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.format.erreurs.push(a)}if(!b.format.isInt()){c.valid=false;c.format.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.format.erreurs.push(a)}if(b.pParam.isEmpty()){c.valid=false;c.pParam.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.pParam.erreurs.push(a)}if(b.export_type.isEmpty()){c.valid=false;c.export_type.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.export_type.erreurs.push(a)}if(b.id_commande.isEmpty()){c.valid=false;c.id_commande.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.id_commande.erreurs.push(a)}if(b.format.isEmpty()){c.valid=false;c.format.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.format.erreurs.push(a)}return c};this.validDelete=function(b){var c=new ExportBonReservationVR();if(isNaN(parseInt(b.id))){c.valid=false;c.id.valid=false;var a=new VRerreur();a.code=ERR_104_CODE;a.message=ERR_104_MSG;c.id.erreurs.push(a)}return c};this.validUpdate=function(b){var d=this.validDelete(b);if(d.valid){var c=new ExportBonReservationVR();if(!b.pParam.checkLength(0,1)){c.valid=false;c.pParam.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.pParam.erreurs.push(a)}if(!b.pParam.isInt()){c.valid=false;c.pParam.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.pParam.erreurs.push(a)}if(!b.export_type.checkLength(0,1)){c.valid=false;c.export_type.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.export_type.erreurs.push(a)}if(!b.export_type.isInt()){c.valid=false;c.export_type.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.export_type.erreurs.push(a)}if(!b.id_commande.checkLength(0,11)){c.valid=false;c.id_commande.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.id_commande.erreurs.push(a)}if(!b.id_commande.isInt()){c.valid=false;c.id_commande.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.id_commande.erreurs.push(a)}if(!b.format.checkLength(0,1)){c.valid=false;c.format.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.format.erreurs.push(a)}if(!b.format.isInt()){c.valid=false;c.format.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.format.erreurs.push(a)}if(b.pParam.isEmpty()){c.valid=false;c.pParam.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.pParam.erreurs.push(a)}if(b.export_type.isEmpty()){c.valid=false;c.export_type.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.export_type.erreurs.push(a)}if(b.id_commande.isEmpty()){c.valid=false;c.id_commande.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.id_commande.erreurs.push(a)}if(b.format.isEmpty()){c.valid=false;c.format.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.format.erreurs.push(a)}return c}return d}}function ExportBonLivraisonValid(){this.validAjout=function(b){var c=new ExportBonLivraisonVR();if(!b.pParam.checkLength(0,1)){c.valid=false;c.pParam.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.pParam.erreurs.push(a)}if(!b.pParam.isInt()){c.valid=false;c.pParam.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.pParam.erreurs.push(a)}if(!b.export_type.checkLength(0,1)){c.valid=false;c.export_type.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.export_type.erreurs.push(a)}if(!b.export_type.isInt()){c.valid=false;c.export_type.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.export_type.erreurs.push(a)}if(!b.id_commande.checkLength(0,11)){c.valid=false;c.id_commande.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.id_commande.erreurs.push(a)}if(!b.id_commande.isInt()){c.valid=false;c.id_commande.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.id_commande.erreurs.push(a)}if(!b.format.checkLength(0,1)){c.valid=false;c.format.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.format.erreurs.push(a)}if(!b.format.isInt()){c.valid=false;c.format.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.format.erreurs.push(a)}if(b.pParam.isEmpty()){c.valid=false;c.pParam.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.pParam.erreurs.push(a)}if(b.export_type.isEmpty()){c.valid=false;c.export_type.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.export_type.erreurs.push(a)}if(b.id_commande.isEmpty()){c.valid=false;c.id_commande.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.id_commande.erreurs.push(a)}if(b.format.isEmpty()){c.valid=false;c.format.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.format.erreurs.push(a)}return c};this.validDelete=function(b){var c=new ExportBonLivraisonVR();if(isNaN(parseInt(b.id))){c.valid=false;c.id.valid=false;var a=new VRerreur();a.code=ERR_104_CODE;a.message=ERR_104_MSG;c.id.erreurs.push(a)}return c};this.validUpdate=function(b){var d=this.validDelete(b);if(d.valid){var c=new ExportBonLivraisonVR();if(!b.pParam.checkLength(0,1)){c.valid=false;c.pParam.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.pParam.erreurs.push(a)}if(!b.pParam.isInt()){c.valid=false;c.pParam.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.pParam.erreurs.push(a)}if(!b.export_type.checkLength(0,1)){c.valid=false;c.export_type.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.export_type.erreurs.push(a)}if(!b.export_type.isInt()){c.valid=false;c.export_type.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.export_type.erreurs.push(a)}if(!b.id_commande.checkLength(0,11)){c.valid=false;c.id_commande.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.id_commande.erreurs.push(a)}if(!b.id_commande.isInt()){c.valid=false;c.id_commande.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.id_commande.erreurs.push(a)}if(!b.format.checkLength(0,1)){c.valid=false;c.format.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.format.erreurs.push(a)}if(!b.format.isInt()){c.valid=false;c.format.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.format.erreurs.push(a)}if(b.pParam.isEmpty()){c.valid=false;c.pParam.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.pParam.erreurs.push(a)}if(b.export_type.isEmpty()){c.valid=false;c.export_type.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.export_type.erreurs.push(a)}if(b.id_commande.isEmpty()){c.valid=false;c.id_commande.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.id_commande.erreurs.push(a)}if(b.format.isEmpty()){c.valid=false;c.format.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.format.erreurs.push(a)}return c}return d}}function CommandeCompleteValid(){this.validAjout=function(e){var f=new CommandeCompleteVR();if(!e.numero.checkLength(0,11)){f.valid=false;f.numero.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;f.numero.erreurs.push(b)}if(!e.nom.checkLength(0,100)){f.valid=false;f.nom.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;f.nom.erreurs.push(b)}if(!e.dateMarcheDebut.checkDate("db")){f.valid=false;f.dateMarcheDebut.valid=false;var b=new VRerreur();b.code=ERR_103_CODE;b.message=ERR_103_MSG;f.dateMarcheDebut.erreurs.push(b)}if(!e.dateMarcheDebut.checkDateExist("db")){f.valid=false;f.dateMarcheDebut.valid=false;var b=new VRerreur();b.code=ERR_105_CODE;b.message=ERR_105_MSG;f.dateMarcheDebut.erreurs.push(b)}if(!e.timeMarcheDebut.checkTime()){f.valid=false;f.timeMarcheDebut.valid=false;var b=new VRerreur();b.code=ERR_106_CODE;b.message=ERR_106_MSG;f.timeMarcheDebut.erreurs.push(b)}if(!e.timeMarcheDebut.checkTimeExist()){f.valid=false;f.timeMarcheDebut.valid=false;var b=new VRerreur();b.code=ERR_107_CODE;b.message=ERR_107_MSG;f.timeMarcheDebut.erreurs.push(b)}if(!e.dateMarcheFin.checkDate("db")){f.valid=false;f.dateMarcheFin.valid=false;var b=new VRerreur();b.code=ERR_103_CODE;b.message=ERR_103_MSG;f.dateMarcheFin.erreurs.push(b)}if(!e.dateMarcheFin.checkDateExist("db")){f.valid=false;f.dateMarcheFin.valid=false;var b=new VRerreur();b.code=ERR_105_CODE;b.message=ERR_105_MSG;f.dateMarcheFin.erreurs.push(b)}if(!e.timeMarcheFin.checkTime()){f.valid=false;f.timeMarcheFin.valid=false;var b=new VRerreur();b.code=ERR_106_CODE;b.message=ERR_106_MSG;f.timeMarcheFin.erreurs.push(b)}if(!e.timeMarcheFin.checkTimeExist()){f.valid=false;f.timeMarcheFin.valid=false;var b=new VRerreur();b.code=ERR_107_CODE;b.message=ERR_107_MSG;f.timeMarcheFin.erreurs.push(b)}if(!e.dateFinReservation.checkDate("db")){f.valid=false;f.dateFinReservation.valid=false;var b=new VRerreur();b.code=ERR_103_CODE;b.message=ERR_103_MSG;f.dateFinReservation.erreurs.push(b)}if(!e.dateFinReservation.checkDateExist("db")){f.valid=false;f.dateFinReservation.valid=false;var b=new VRerreur();b.code=ERR_105_CODE;b.message=ERR_105_MSG;f.dateFinReservation.erreurs.push(b)}if(!e.timeFinReservation.checkTime()){f.valid=false;f.timeFinReservation.valid=false;var b=new VRerreur();b.code=ERR_106_CODE;b.message=ERR_106_MSG;f.timeFinReservation.erreurs.push(b)}if(!e.timeFinReservation.checkTimeExist()){f.valid=false;f.timeFinReservation.valid=false;var b=new VRerreur();b.code=ERR_107_CODE;b.message=ERR_107_MSG;f.timeFinReservation.erreurs.push(b)}if(!e.archive.checkLength(0,1)){f.valid=false;f.archive.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;f.archive.erreurs.push(b)}if(e.dateMarcheDebut.isEmpty()){f.valid=false;f.dateMarcheDebut.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.dateMarcheDebut.erreurs.push(b)}if(e.timeMarcheDebut.isEmpty()){f.valid=false;f.timeMarcheDebut.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.timeMarcheDebut.erreurs.push(b)}if(e.dateMarcheFin.isEmpty()){f.valid=false;f.dateMarcheFin.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.dateMarcheFin.erreurs.push(b)}if(e.timeMarcheFin.isEmpty()){f.valid=false;f.timeMarcheFin.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.timeMarcheFin.erreurs.push(b)}if(e.dateFinReservation.isEmpty()){f.valid=false;f.dateFinReservation.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.dateFinReservation.erreurs.push(b)}if(e.timeFinReservation.isEmpty()){f.valid=false;f.timeFinReservation.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.timeFinReservation.erreurs.push(b)}if(e.archive.isEmpty()){f.valid=false;f.archive.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.archive.erreurs.push(b)}if(!dateTimeEstPLusGrandeEgale(e.dateMarcheDebut+" "+e.timeMarcheDebut,e.dateFinReservation+" "+e.timeFinReservation,"db")){if(!dateEstPLusGrandeEgale(e.dateMarcheDebut,e.dateFinReservation,"db")){f.valid=false;f.dateMarcheDebut.valid=false;f.dateFinReservation.valid=false;var b=new VRerreur();b.code=ERR_202_CODE;b.message=ERR_202_MSG;f.dateMarcheDebut.erreurs.push(b);f.dateFinReservation.erreurs.push(b)}else{if(timeEstPLusGrandeEgale(e.timeFinReservation,e.timeMarcheDebut)){f.valid=false;f.timeMarcheDebut.valid=false;f.timeFinReservation.valid=false;var b=new VRerreur();b.code=ERR_203_CODE;b.message=ERR_203_MSG;f.timeMarcheDebut.erreurs.push(b);f.timeFinReservation.erreurs.push(b)}}}if(timeEstPLusGrandeEgale(e.timeMarcheDebut,e.timeMarcheFin)){f.valid=false;f.timeMarcheDebut.valid=false;f.timeMarcheFin.valid=false;var b=new VRerreur();b.code=ERR_204_CODE;b.message=ERR_204_MSG;f.timeMarcheDebut.erreurs.push(b);f.timeMarcheFin.erreurs.push(b)}if(!dateEstPLusGrandeEgale(e.dateMarcheDebut,getDateAujourdhuiDb(),"db")){f.valid=false;f.dateMarcheDebut.valid=false;var b=new VRerreur();b.code=ERR_209_CODE;b.message=ERR_209_MSG;f.dateMarcheDebut.erreurs.push(b)}if(!dateEstPLusGrandeEgale(e.dateMarcheFin,getDateAujourdhuiDb(),"db")){f.valid=false;f.dateMarcheFin.valid=false;var b=new VRerreur();b.code=ERR_209_CODE;b.message=ERR_209_MSG;f.dateMarcheFin.erreurs.push(b)}if(!dateEstPLusGrandeEgale(e.dateFinReservation,getDateAujourdhuiDb(),"db")){f.valid=false;f.dateFinReservation.valid=false;var b=new VRerreur();b.code=ERR_209_CODE;b.message=ERR_209_MSG;f.dateFinReservation.erreurs.push(b)}if(isArray(e.produits)){if(e.produits.length>0){var a=new ProduitCommandeValid();var d=0;while(e.produits[d]){var c=a.validAjout(e.produits[d]);if(!c.valid){f.valid=false}f.produits[e.produits[d].idNom]=c;d++}}else{f.valid=false;f.log.valid=false;var b=new VRerreur();b.code=ERR_207_CODE;b.message=ERR_207_MSG;f.log.erreurs.push(b)}}else{f.valid=false;f.log.valid=false;var b=new VRerreur();b.code=ERR_111_CODE;b.message=ERR_111_MSG;f.log.erreurs.push(b)}return f};this.validDelete=function(b){var c=new CommandeCompleteVR();if(isNaN(parseInt(b.id))){c.valid=false;c.id.valid=false;var a=new VRerreur();a.code=ERR_104_CODE;a.message=ERR_104_MSG;c.id.erreurs.push(a)}return c};this.validUpdate=function(e){var g=this.validDelete(e);if(g.valid){var f=new CommandeCompleteVR();if(!e.numero.checkLength(0,11)){f.valid=false;f.numero.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;f.numero.erreurs.push(b)}if(!e.nom.checkLength(0,100)){f.valid=false;f.nom.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;f.nom.erreurs.push(b)}if(!e.dateMarcheDebut.checkDate("db")){f.valid=false;f.dateMarcheDebut.valid=false;var b=new VRerreur();b.code=ERR_103_CODE;b.message=ERR_103_MSG;f.dateMarcheDebut.erreurs.push(b)}if(!e.dateMarcheDebut.checkDateExist("db")){f.valid=false;f.dateMarcheDebut.valid=false;var b=new VRerreur();b.code=ERR_105_CODE;b.message=ERR_105_MSG;f.dateMarcheDebut.erreurs.push(b)}if(!e.timeMarcheDebut.checkTime()){f.valid=false;f.timeMarcheDebut.valid=false;var b=new VRerreur();b.code=ERR_106_CODE;b.message=ERR_106_MSG;f.timeMarcheDebut.erreurs.push(b)}if(!e.timeMarcheDebut.checkTimeExist()){f.valid=false;f.timeMarcheDebut.valid=false;var b=new VRerreur();b.code=ERR_107_CODE;b.message=ERR_107_MSG;f.timeMarcheDebut.erreurs.push(b)}if(!e.dateMarcheFin.checkDate("db")){f.valid=false;f.dateMarcheFin.valid=false;var b=new VRerreur();b.code=ERR_103_CODE;b.message=ERR_103_MSG;f.dateMarcheFin.erreurs.push(b)}if(!e.dateMarcheFin.checkDateExist("db")){f.valid=false;f.dateMarcheFin.valid=false;var b=new VRerreur();b.code=ERR_105_CODE;b.message=ERR_105_MSG;f.dateMarcheFin.erreurs.push(b)}if(!e.timeMarcheFin.checkTime()){f.valid=false;f.timeMarcheFin.valid=false;var b=new VRerreur();b.code=ERR_106_CODE;b.message=ERR_106_MSG;f.timeMarcheFin.erreurs.push(b)}if(!e.timeMarcheFin.checkTimeExist()){f.valid=false;f.timeMarcheFin.valid=false;var b=new VRerreur();b.code=ERR_107_CODE;b.message=ERR_107_MSG;f.timeMarcheFin.erreurs.push(b)}if(!e.dateFinReservation.checkDate("db")){f.valid=false;f.dateFinReservation.valid=false;var b=new VRerreur();b.code=ERR_103_CODE;b.message=ERR_103_MSG;f.dateFinReservation.erreurs.push(b)}if(!e.dateFinReservation.checkDateExist("db")){f.valid=false;f.dateFinReservation.valid=false;var b=new VRerreur();b.code=ERR_105_CODE;b.message=ERR_105_MSG;f.dateFinReservation.erreurs.push(b)}if(!e.timeFinReservation.checkTime()){f.valid=false;f.timeFinReservation.valid=false;var b=new VRerreur();b.code=ERR_106_CODE;b.message=ERR_106_MSG;f.timeFinReservation.erreurs.push(b)}if(!e.timeFinReservation.checkTimeExist()){f.valid=false;f.timeFinReservation.valid=false;var b=new VRerreur();b.code=ERR_107_CODE;b.message=ERR_107_MSG;f.timeFinReservation.erreurs.push(b)}if(!e.archive.checkLength(0,1)){f.valid=false;f.archive.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;f.archive.erreurs.push(b)}if(e.dateMarcheDebut.isEmpty()){f.valid=false;f.dateMarcheDebut.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.dateMarcheDebut.erreurs.push(b)}if(e.timeMarcheDebut.isEmpty()){f.valid=false;f.timeMarcheDebut.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.timeMarcheDebut.erreurs.push(b)}if(e.dateMarcheFin.isEmpty()){f.valid=false;f.dateMarcheFin.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.dateMarcheFin.erreurs.push(b)}if(e.timeMarcheFin.isEmpty()){f.valid=false;f.timeMarcheFin.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.timeMarcheFin.erreurs.push(b)}if(e.dateFinReservation.isEmpty()){f.valid=false;f.dateFinReservation.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.dateFinReservation.erreurs.push(b)}if(e.timeFinReservation.isEmpty()){f.valid=false;f.timeFinReservation.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.timeFinReservation.erreurs.push(b)}if(e.archive.isEmpty()){f.valid=false;f.archive.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.archive.erreurs.push(b)}if(!dateTimeEstPLusGrandeEgale(e.dateMarcheDebut+" "+e.timeMarcheDebut,e.dateFinReservation+" "+e.timeFinReservation,"db")){if(!dateEstPLusGrandeEgale(e.dateMarcheDebut,e.dateFinReservation,"db")){f.valid=false;f.dateMarcheDebut.valid=false;f.dateFinReservation.valid=false;var b=new VRerreur();b.code=ERR_202_CODE;b.message=ERR_202_MSG;f.dateMarcheDebut.erreurs.push(b);f.dateFinReservation.erreurs.push(b)}else{if(timeEstPLusGrandeEgale(e.timeFinReservation,e.timeMarcheDebut)){f.valid=false;f.timeMarcheDebut.valid=false;f.timeFinReservation.valid=false;var b=new VRerreur();b.code=ERR_203_CODE;b.message=ERR_203_MSG;f.timeMarcheDebut.erreurs.push(b);f.timeFinReservation.erreurs.push(b)}}}if(timeEstPLusGrandeEgale(e.timeMarcheDebut,e.timeMarcheFin)){f.valid=false;f.timeMarcheDebut.valid=false;f.timeMarcheFin.valid=false;var b=new VRerreur();b.code=ERR_204_CODE;b.message=ERR_204_MSG;f.timeMarcheDebut.erreurs.push(b);f.timeMarcheFin.erreurs.push(b)}if(isArray(e.produits)){if(e.produits.length>0){var a=new ProduitCommandeValid();var d=0;while(e.produits[d]){var c=a.validAjout(e.produits[d]);if(!c.valid){f.valid=false}f.produits[e.produits[d].idNom]=c;d++}}else{f.valid=false;f.log.valid=false;var b=new VRerreur();b.code=ERR_207_CODE;b.message=ERR_207_MSG;f.log.erreurs.push(b)}}else{f.valid=false;f.log.valid=false;var b=new VRerreur();b.code=ERR_111_CODE;b.message=ERR_111_MSG;f.log.erreurs.push(b)}return f}return g}}function ExportListeReservationValid(){this.validAjout=function(b){var c=new ExportListeReservationVR();if(!b.pParam.checkLength(0,1)){c.valid=false;c.pParam.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.pParam.erreurs.push(a)}if(!b.pParam.isInt()){c.valid=false;c.pParam.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.pParam.erreurs.push(a)}if(!b.export_type.checkLength(0,1)){c.valid=false;c.export_type.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.export_type.erreurs.push(a)}if(!b.export_type.isInt()){c.valid=false;c.export_type.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.export_type.erreurs.push(a)}if(!b.id_commande.checkLength(0,11)){c.valid=false;c.id_commande.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.id_commande.erreurs.push(a)}if(!b.id_commande.isInt()){c.valid=false;c.id_commande.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.id_commande.erreurs.push(a)}if(!b.format.checkLength(0,1)){c.valid=false;c.format.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.format.erreurs.push(a)}if(!b.format.isInt()){c.valid=false;c.format.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.format.erreurs.push(a)}if(b.pParam.isEmpty()){c.valid=false;c.pParam.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.pParam.erreurs.push(a)}if(b.export_type.isEmpty()){c.valid=false;c.export_type.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.export_type.erreurs.push(a)}if(b.id_commande.isEmpty()){c.valid=false;c.id_commande.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.id_commande.erreurs.push(a)}if(b.id_produits.isEmpty()){c.valid=false;c.id_produits.valid=false;var a=new VRerreur();a.code=ERR_233_CODE;a.message=ERR_233_MSG;c.id_produits.erreurs.push(a)}if(b.format.isEmpty()){c.valid=false;c.format.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.format.erreurs.push(a)}return c};this.validDelete=function(b){var c=new ExportListeReservationVR();if(isNaN(parseInt(b.id))){c.valid=false;c.id.valid=false;var a=new VRerreur();a.code=ERR_104_CODE;a.message=ERR_104_MSG;c.id.erreurs.push(a)}return c};this.validUpdate=function(b){var d=this.validDelete(b);if(d.valid){var c=new ExportListeReservationVR();if(!b.pParam.checkLength(0,1)){c.valid=false;c.pParam.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.pParam.erreurs.push(a)}if(!b.pParam.isInt()){c.valid=false;c.pParam.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.pParam.erreurs.push(a)}if(!b.export_type.checkLength(0,1)){c.valid=false;c.export_type.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.export_type.erreurs.push(a)}if(!b.export_type.isInt()){c.valid=false;c.export_type.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.export_type.erreurs.push(a)}if(!b.id_commande.checkLength(0,11)){c.valid=false;c.id_commande.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.id_commande.erreurs.push(a)}if(!b.id_commande.isInt()){c.valid=false;c.id_commande.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.id_commande.erreurs.push(a)}if(!b.format.checkLength(0,1)){c.valid=false;c.format.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.format.erreurs.push(a)}if(!b.format.isInt()){c.valid=false;c.format.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.format.erreurs.push(a)}if(b.pParam.isEmpty()){c.valid=false;c.pParam.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.pParam.erreurs.push(a)}if(b.export_type.isEmpty()){c.valid=false;c.export_type.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.export_type.erreurs.push(a)}if(b.id_commande.isEmpty()){c.valid=false;c.id_commande.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.id_commande.erreurs.push(a)}if(b.id_produits.isEmpty()){c.valid=false;c.id_produits.valid=false;var a=new VRerreur();a.code=ERR_233_CODE;a.message=ERR_233_MSG;c.id_produits.erreurs.push(a)}if(b.format.isEmpty()){c.valid=false;c.format.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.format.erreurs.push(a)}return c}return d}}function NomProduitValid(){this.validAjout=function(b){var c=new NomProduitVR();if(!b.nom.checkLength(0,50)){c.valid=false;c.nom.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.nom.erreurs.push(a)}if(!b.description.checkLength(0,500)){c.valid=false;c.description.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.description.erreurs.push(a)}if(!b.idCategorie.checkLength(0,11)){c.valid=false;c.idCategorie.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.idCategorie.erreurs.push(a)}if(!b.idCategorie.isInt()){c.valid=false;c.idCategorie.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.idCategorie.erreurs.push(a)}if(b.nom.isEmpty()){c.valid=false;c.nom.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.nom.erreurs.push(a)}if(b.idCategorie.isEmpty()){c.valid=false;c.idCategorie.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.idCategorie.erreurs.push(a)}return c};this.validDelete=function(b){var c=new NomProduitVR();if(isNaN(parseInt(b.id))){c.valid=false;c.id.valid=false;var a=new VRerreur();a.code=ERR_104_CODE;a.message=ERR_104_MSG;c.id.erreurs.push(a)}return c};this.validUpdate=function(b){var d=this.validDelete(b);if(d.valid){var c=new NomProduitVR();if(!b.nom.checkLength(0,50)){c.valid=false;c.nom.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.nom.erreurs.push(a)}if(!b.description.checkLength(0,500)){c.valid=false;c.description.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.description.erreurs.push(a)}if(!b.idCategorie.checkLength(0,11)){c.valid=false;c.idCategorie.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.idCategorie.erreurs.push(a)}if(!b.idCategorie.isInt()){c.valid=false;c.idCategorie.valid=false;var a=new VRerreur();a.code=ERR_108_CODE;a.message=ERR_108_MSG;c.idCategorie.erreurs.push(a)}if(b.nom.isEmpty()){c.valid=false;c.nom.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.nom.erreurs.push(a)}if(b.idCategorie.isEmpty()){c.valid=false;c.idCategorie.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.idCategorie.erreurs.push(a)}return c}return d}}function IdentificationValid(){this.validAjout=function(b){var c=new IdentificationVR();if(!b.login.checkLength(0,20)){c.valid=false;c.login.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.login.erreurs.push(a)}if(!b.pass.checkLength(0,100)){c.valid=false;c.pass.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.pass.erreurs.push(a)}if(b.login.isEmpty()){c.valid=false;c.login.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.login.erreurs.push(a)}if(b.pass.isEmpty()){c.valid=false;c.pass.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.pass.erreurs.push(a)}return c};this.validDelete=function(b){var c=new IdentificationVR();if(isNaN(parseInt(b.id))){c.valid=false;c.id.valid=false;var a=new VRerreur();a.code=ERR_104_CODE;a.message=ERR_104_MSG;c.id.erreurs.push(a)}return c};this.validUpdate=function(b){var d=this.validDelete(b);if(d.valid){var c=new IdentificationVR();if(!b.login.checkLength(0,20)){c.valid=false;c.login.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.login.erreurs.push(a)}if(!b.pass.checkLength(0,100)){c.valid=false;c.pass.valid=false;var a=new VRerreur();a.code=ERR_101_CODE;a.message=ERR_101_MSG;c.pass.erreurs.push(a)}if(b.login.isEmpty()){c.valid=false;c.login.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.login.erreurs.push(a)}if(b.pass.isEmpty()){c.valid=false;c.pass.valid=false;var a=new VRerreur();a.code=ERR_201_CODE;a.message=ERR_201_MSG;c.pass.erreurs.push(a)}return c}return d}}function ProduitCommandeValid(){this.validAjout=function(d,f){var g=new ProduitCommandeVR();if(!d.idNom.checkLength(0,11)){g.valid=false;g.idNom.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;g.idNom.erreurs.push(b)}if(!d.idNom.isInt()){g.valid=false;g.idNom.valid=false;var b=new VRerreur();b.code=ERR_108_CODE;b.message=ERR_108_MSG;g.idNom.erreurs.push(b)}if(!d.idProducteur.checkLength(0,11)){g.valid=false;g.idProducteur.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;g.idProducteur.erreurs.push(b)}if(!d.idProducteur.isInt()){g.valid=false;g.idProducteur.valid=false;var b=new VRerreur();b.code=ERR_108_CODE;b.message=ERR_108_MSG;g.idProducteur.erreurs.push(b)}if(!d.nom.checkLength(0,50)){g.valid=false;g.nom.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;g.nom.erreurs.push(b)}if(!d.idCategorie.checkLength(0,11)){g.valid=false;g.idCategorie.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;g.idCategorie.erreurs.push(b)}if(d.idCategorie!=""&&!d.idCategorie.isInt()){g.valid=false;g.idCategorie.valid=false;var b=new VRerreur();b.code=ERR_108_CODE;b.message=ERR_108_MSG;g.idCategorie.erreurs.push(b)}if(!d.categorie.checkLength(0,50)){g.valid=false;g.categorie.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;g.categorie.erreurs.push(b)}if(!d.unite.checkLength(0,20)){g.valid=false;g.unite.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;g.unite.erreurs.push(b)}if(!d.qteMaxCommande.checkLength(0,12)){g.valid=false;g.qteMaxCommande.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;g.qteMaxCommande.erreurs.push(b)}if(!d.qteMaxCommande.isFloat()){g.valid=false;g.qteMaxCommande.valid=false;var b=new VRerreur();b.code=ERR_109_CODE;b.message=ERR_109_MSG;g.qteMaxCommande.erreurs.push(b)}if(!d.qteRestante.checkLength(0,12)){g.valid=false;g.qteRestante.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;g.qteRestante.erreurs.push(b)}if(!d.qteRestante.isFloat()){g.valid=false;g.qteRestante.valid=false;var b=new VRerreur();b.code=ERR_109_CODE;b.message=ERR_109_MSG;g.qteRestante.erreurs.push(b)}if(d.idNom.isEmpty()){g.valid=false;g.idNom.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;g.idNom.erreurs.push(b)}if(d.idProducteur.isEmpty()){g.valid=false;g.idProducteur.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;g.idProducteur.erreurs.push(b)}if(d.unite.isEmpty()){g.valid=false;g.unite.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;g.unite.erreurs.push(b)}if(d.qteMaxCommande.isEmpty()){g.valid=false;g.qteMaxCommande.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;g.qteMaxCommande.erreurs.push(b)}if(d.qteRestante.isEmpty()){g.valid=false;g.qteRestante.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;g.qteRestante.erreurs.push(b)}if(d.idNom<1){g.valid=false;g.idNom.valid=false;var b=new VRerreur();b.code=ERR_233_CODE;b.message=ERR_233_MSG;g.idNom.erreurs.push(b)}if(d.idProducteur<1){g.valid=false;g.idProducteur.valid=false;var b=new VRerreur();b.code=ERR_232_CODE;b.message=ERR_232_MSG;g.idProducteur.erreurs.push(b)}if(parseFloat(d.qteMaxCommande)<=0){g.valid=false;g.qteMaxCommande.valid=false;var b=new VRerreur();b.code=ERR_215_CODE;b.message=ERR_215_MSG;g.qteMaxCommande.erreurs.push(b)}if(parseFloat(d.qteRestante)<=0){g.valid=false;g.qteRestante.valid=false;var b=new VRerreur();b.code=ERR_215_CODE;b.message=ERR_215_MSG;g.qteRestante.erreurs.push(b)}if(parseFloat(d.qteMaxCommande)>parseFloat(d.qteRestante)){g.valid=false;g.qteRestante.valid=false;g.qteMaxCommande.valid=false;var b=new VRerreur();b.code=ERR_205_CODE;b.message=ERR_205_MSG;g.qteRestante.erreurs.push(b);g.qteMaxCommande.erreurs.push(b)}if(f!="simple"){if(isArray(d.lots)){var e=new DetailCommandeValid();var c=0;while(d.lots[c]){var a=e.validAjout(d.lots[c]);if(!a.valid){g.valid=false}if(parseFloat(d.lots[c].taille)>parseFloat(d.qteMaxCommande)){g.valid=false;a.valid=false;a.taille.valid=false;var b=new VRerreur();b.code=ERR_206_CODE;b.message=ERR_206_MSG;a.taille.erreurs.push(b)}g.lots.push(a);c++}}else{g.valid=false;g.log.valid=false;var b=new VRerreur();b.code=ERR_110_CODE;b.message=ERR_110_MSG;g.log.erreurs.push(b)}}return g};this.validDelete=function(b){var c=new ProduitCommandeVR();if(isNaN(parseInt(b.id))){c.valid=false;c.id.valid=false;var a=new VRerreur();a.code=ERR_104_CODE;a.message=ERR_104_MSG;c.id.erreurs.push(a)}return c};this.validUpdate=function(d){var g=this.validDelete(d);if(g.valid){var f=new ProduitCommandeVR();if(!d.idNom.checkLength(0,11)){f.valid=false;f.idNom.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;f.idNom.erreurs.push(b)}if(!d.idNom.isInt()){f.valid=false;f.idNom.valid=false;var b=new VRerreur();b.code=ERR_108_CODE;b.message=ERR_108_MSG;f.idNom.erreurs.push(b)}if(!d.idProducteur.checkLength(0,11)){f.valid=false;f.idProducteur.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;f.idProducteur.erreurs.push(b)}if(!d.idProducteur.isInt()){f.valid=false;f.idProducteur.valid=false;var b=new VRerreur();b.code=ERR_108_CODE;b.message=ERR_108_MSG;f.idProducteur.erreurs.push(b)}if(!d.nom.checkLength(0,50)){f.valid=false;f.nom.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;f.nom.erreurs.push(b)}if(!d.idCategorie.checkLength(0,11)){f.valid=false;f.idCategorie.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;f.idCategorie.erreurs.push(b)}if(d.idCategorie!=""&&!d.idCategorie.isInt()){f.valid=false;f.idCategorie.valid=false;var b=new VRerreur();b.code=ERR_108_CODE;b.message=ERR_108_MSG;f.idCategorie.erreurs.push(b)}if(!d.categorie.checkLength(0,50)){f.valid=false;f.categorie.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;f.categorie.erreurs.push(b)}if(!d.unite.checkLength(0,20)){f.valid=false;f.unite.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;f.unite.erreurs.push(b)}if(!d.qteMaxCommande.checkLength(0,12)){f.valid=false;f.qteMaxCommande.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;f.qteMaxCommande.erreurs.push(b)}if(!d.qteMaxCommande.isFloat()){f.valid=false;f.qteMaxCommande.valid=false;var b=new VRerreur();b.code=ERR_109_CODE;b.message=ERR_109_MSG;f.qteMaxCommande.erreurs.push(b)}if(!d.qteRestante.checkLength(0,12)){f.valid=false;f.qteRestante.valid=false;var b=new VRerreur();b.code=ERR_101_CODE;b.message=ERR_101_MSG;f.qteRestante.erreurs.push(b)}if(!d.qteRestante.isFloat()){f.valid=false;f.qteRestante.valid=false;var b=new VRerreur();b.code=ERR_109_CODE;b.message=ERR_109_MSG;f.qteRestante.erreurs.push(b)}if(d.idNom.isEmpty()){f.valid=false;f.idNom.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.idNom.erreurs.push(b)}if(d.idProducteur.isEmpty()){f.valid=false;f.idProducteur.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.idProducteur.erreurs.push(b)}if(d.unite.isEmpty()){f.valid=false;f.unite.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.unite.erreurs.push(b)}if(d.qteMaxCommande.isEmpty()){f.valid=false;f.qteMaxCommande.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.qteMaxCommande.erreurs.push(b)}if(d.qteRestante.isEmpty()){f.valid=false;f.qteRestante.valid=false;var b=new VRerreur();b.code=ERR_201_CODE;b.message=ERR_201_MSG;f.qteRestante.erreurs.push(b)}if(d.idNom<1){f.valid=false;f.idNom.valid=false;var b=new VRerreur();b.code=ERR_233_CODE;b.message=ERR_233_MSG;f.idNom.erreurs.push(b)}if(d.idProducteur<1){f.valid=false;f.idProducteur.valid=false;var b=new VRerreur();b.code=ERR_232_CODE;b.message=ERR_232_MSG;f.idProducteur.erreurs.push(b)}if(parseFloat(d.qteMaxCommande)<=0){f.valid=false;f.qteMaxCommande.valid=false;var b=new VRerreur();b.code=ERR_215_CODE;b.message=ERR_215_MSG;f.qteMaxCommande.erreurs.push(b)}if(parseFloat(d.qteRestante)<=0){f.valid=false;f.qteRestante.valid=false;var b=new VRerreur();b.code=ERR_215_CODE;b.message=ERR_215_MSG;f.qteRestante.erreurs.push(b)}if(parseFloat(d.qteMaxCommande)>parseFloat(d.qteRestante)){f.valid=false;f.qteRestante.valid=false;f.qteMaxCommande.valid=false;var b=new VRerreur();b.code=ERR_205_CODE;b.message=ERR_205_MSG;f.qteRestante.erreurs.push(b);f.qteMaxCommande.erreurs.push(b)}if(isArray(d.lots)){var e=new DetailCommandeValid();var c=0;while(d.lots[c]){var a=e.validAjout(d.lots[c]);if(!a.valid){f.valid=false}if(parseFloat(d.lots[c].taille)>parseFloat(d.qteMaxCommande)){f.valid=false;a.valid=false;a.taille.valid=false;var b=new VRerreur();b.code=ERR_206_CODE;b.message=ERR_206_MSG;a.taille.erreurs.push(b)}f.lots.push(a);c++}}else{f.valid=false;f.log.valid=false;var b=new VRerreur();b.code=ERR_110_CODE;b.message=ERR_110_MSG;f.log.erreurs.push(b)}return f}return g}}function CaisseTemplate(){this.listeCommandePage='<div id="contenu"><div id="liste_commande_int"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Les Marchés en cours</div><table class="com-table"><tr class="ui-widget ui-widget-header"><th class="com-table-th lst-resa-th-num">N°</th><th class="com-table-th">Date de cloture des Réservations</th><th class="com-table-th">Marché</th>	<th class="com-table-th"></th></tr><!-- BEGIN commande --><tr><td class="com-table-td com-text-align-right">{commande.numero}</td><td class="com-table-td">Le {commande.dateFinReservation} à {commande.heureFinReservation}H{commande.minuteFinReservation}</td><td class="com-table-td">Le {commande.dateMarcheDebut} de {commande.heureMarcheDebut}H{commande.minuteMarcheDebut} à {commande.heureMarcheFin}H{commande.minuteMarcheFin}</td><td class="com-table-td lst-resa-btn-commander"><button class="btn-marche ui-state-default ui-corner-all com-button com-center" id="{commande.id}" >Vente</button></td></tr><!-- END commande --></table></div></div></div></div>';this.listeCommandeVide='<div id="contenu"><div class="com-barre-menu-2"><button class="ui-state-default ui-corner-top com-button" id="lien-marche-archive"><span class="com-float-left">Les Marchés cloturés</span><span class="com-float-left ui-icon ui-icon-arrowthick-1-e"></span></button></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Les Marchés en cours</div><p id="texte-liste-vide">Aucun Marché en cours.</p></div></div>';this.listeMarcheVide='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Vente</div><p id="texte-liste-vide">Aucune réservation en cours.</p></div></div>';this.listeAdherentCommandePage='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Vente du Marché n°{comNumero}</div><div class="recherche com-widget-header ui-widget ui-widget-header ui-corner-all"><form id="filter-form"> <span class="conteneur-icon com-float-left ui-widget-content ui-corner-left" title="Chercher"><span class="ui-icon ui-icon-search"></span></span><input class="com-input-text ui-widget-content ui-corner-right" name="filter" id="filter" value="" maxlength="30" size="15" type="text" /></form></div><table class="com-table"><thead><tr class="ui-widget ui-widget-header com-cursor-pointer"><th class="com-table-th com-underline-hover marche-com-th-num-adh"><span class="ui-icon span-icon"></span>Numéro Adhérent</th><th class="com-table-th com-underline-hover marche-com-th-num-adh"><span class="ui-icon span-icon"></span>Numéro Compte</th><th class="com-table-th com-underline-hover marche-com-th-nom"><span class="ui-icon span-icon"></span>Nom</th>	<th class="com-table-th com-underline-hover"><span class="ui-icon span-icon"></span>Prénom</th></tr></thead><tbody><!-- BEGIN listeAdherentCommande --><tr class="com-cursor-pointer achat-commande-ligne" ><td class="com-table-td com-underline-hover"><span class="ui-helper-hidden id-adherent">{listeAdherentCommande.adhId}</span>{listeAdherentCommande.adhNumero}</td><td class="com-table-td com-underline-hover">{listeAdherentCommande.adhLabelCompte}</td><td class="com-table-td com-underline-hover">{listeAdherentCommande.adhNom}</td><td class="com-table-td com-underline-hover">{listeAdherentCommande.adhPrenom}</td></tr><!-- END listeAdherentCommande --></tbody></table></div></div></div>';this.achatCommandePage='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Vente du Marché n°{comNumero}</div><div class="com-widget-content"><div id="resa-info-commande">{adhNumero} :  {adhPrenom} {adhNom}<br/>N° de Compte : {adhCompte}</div><div><span>Solde Actuel : </span><span>{adhSolde} {sigleMonetaire}</span><br/><span>Nouveau Solde : </span><span id="nouveau-solde">{adhNouveauSolde}</span> <span id="nouveau-solde-sigle">{sigleMonetaire}</span></div></div></div><div class="com-float-left"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all" id="achat-pdt-widget"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Achat</div><div class="com-widget-content"><table class="achat-commande-table-pdt"><thead><tr><th>Produit</th><th>Quantité</th><th></th><th>Prix</th><th></th></tr></thead><tbody><!-- BEGIN produits --><tr class="ligne-produit"><td><span class="produit-id ui-helper-hidden">{produits.proId}</span>{produits.nproNom}</td><td class="com-text-align-right td-qte"><input type="text" value="{produits.stoQuantite}" class="com-numeric produit-quantite com-input-text ui-widget-content ui-corner-all" id="produits{produits.proId}quantite" maxlength="12" size="3"/> </td><td class="td-unite">{produits.proUniteMesure}</td><td class="com-text-align-right td-qte" ><input type="text" value="{produits.proPrix}" class="com-numeric produit-prix com-input-text ui-widget-content ui-corner-all" id="produits{produits.proId}prix" maxlength="12" size="3"/></td><td><span>{sigleMonetaire}</span></td></tr><!-- END produits --></tbody><tfoot><tr><td colspan="2"></td><td class="com-text-align-right" >Total :</td><td class="com-text-align-right" ><span id="total-achat">{total}</span></td><td><span>{sigleMonetaire}</span></td></tr></tfoot></table></div></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all" id="achat-pdt-solidaire-widget" ><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Achat Solidaire</div><div class="com-widget-content"><table class="achat-commande-table-pdt"><thead><tr><th>Produit</th><th>Quantité</th><th></th><th>Prix</th><th></th></tr></thead><tbody><!-- BEGIN produitsSolidaire --><tr class="ligne-produit-solidaire"><td><span class="produit-id ui-helper-hidden">{produitsSolidaire.proId}</span>{produitsSolidaire.nproNom}</td><td class="com-text-align-right td-qte"><input type="text" value="0" class="com-numeric produit-solidaire-quantite com-input-text ui-widget-content ui-corner-all" id="produitsSolidaire{produitsSolidaire.proId}quantite" maxlength="12" size="3"/> </td><td class="td-unite">{produitsSolidaire.proUniteMesure}</td><td class="com-text-align-right td-qte" ><input type="text" value="0" class="com-numeric produit-solidaire-prix com-input-text ui-widget-content ui-corner-all" id="produitsSolidaire{produitsSolidaire.proId}prix" maxlength="12" size="3"/></td><td><span>{sigleMonetaire}</span></td></tr><!-- END produitsSolidaire --></tbody><tfoot><tr><td colspan="2"></td><td class="com-text-align-right" >Total :</td><td class="com-text-align-right" ><span id="total-achat-solidaire">0,00</span></td><td><span>{sigleMonetaire}</span></td></tr></tfoot></table></div></div></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all com-float-left" id="achat-rechgt-widget"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Rechargement du compte</div><div class="com-widget-content"><table><thead><tr><th>Montant</th><th>Type de Paiement</th><th id="label-champ-complementaire"></th></tr></thead><tbody><tr><td><input type="text" name="montant-rechargement" value="" class="com-numeric com-input-text ui-widget-content ui-corner-all" id="rechargementmontant" maxlength="12" size="3"/> <span>{sigleMonetaire}</span></td><td class="com-center"><select name="typepaiement" id="rechargementtypePaiement"><option value="0">== Choisir ==</option><!-- BEGIN typePaiement --><option value="{typePaiement.tppId}">{typePaiement.tppType}</option><!-- END typePaiement --></select></td><td id="td-champ-complementaire"><input type="text" name="champ-complementaire" value="" class="com-input-text ui-widget-content ui-corner-all" id="rechargementchampComplementaire" maxlength="50" size="15"/></td></tr></tbody></table></div></div><div class="com-clear-float-left com-widget-header ui-widget ui-widget-header ui-corner-all com-center"><button type="button" id="btn-annuler" class="com-btn-edt-multiples ui-state-default ui-corner-all com-button com-center">Annuler</button><button type="button" class="ui-helper-hidden com-btn-edt-multiples ui-state-default ui-corner-all com-button com-center" id="btn-modifier">Modifier</button><button type="button" id="btn-valider" class="ui-state-default ui-corner-all com-button com-center">Valider</button></div></div>';this.achatCommandeSucces='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Achat</div><div class="com-widget-content"><p class="com-msg-confirm-icon"><span class="com-float-left ui-icon ui-icon-check"></span>Achat effectué avec succès.<br/><br/><button id="btn-annuler" class="ui-state-default ui-corner-all com-button com-center">Retourner à la liste des réservations</button></p></div></div></div>'}function GestionProducteurTemplate(){this.formulaireAjoutProducteur='<div id="contenu"><div id="formulaire_ajout_producteur"><form><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Information du producteur</div><div class="com-widget-content"><table class="com-table-form"><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Nom *</th><td class="com-table-form-td"><input type="hidden" name="{NAME_ID}" value="{VALUE_ID}" /><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="nom" value="{nom}" maxlength="50" id="nom"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Prénom *</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="prenom" value="{prenom}" maxlength="50" id="prenom"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Date de Naissance (jj/mm/aaaa)</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="date_naissance" value="{dateNaissance}" maxlength="10" id="dateNaissance"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Lier un compte<input type="checkbox" name="lien_numero_compte" /></th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="numero_compte" value="{compte}" maxlength="5" disabled="disabled" id="compte"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Commentaire</th><td class="com-table-form-td"><textarea class="com-input-text ui-widget-content ui-corner-all" name="commentaire" id="commentaire">{commentaire}</textarea></td></tr></table></div></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Coordonnées du producteur</div><div class="com-widget-content"><table class="com-table-form"><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Courriel Principal</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="courriel_principal" value="{courrielPrincipal}" maxlength="100" id="courrielPrincipal"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Courriel Secondaire</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" ype="text" name="courriel_secondaire" value="{courrielSecondaire}" maxlength="100" id="courrielSecondaire"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Téléphone Principal</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="telephone_principal" value="{telephonePrincipal}" maxlength="20" id="telephonePrincipal"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Téléphone Secondaire</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="telephone_secondaire" value="{telephoneSecondaire}" maxlength="20" id="telephoneSecondaire"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Adresse</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="adresse" value="{adresse}" maxlength="300" id="adresse"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Code Postal</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="code_postal" value="{codePostal}" maxlength="10" id="codePostal"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Ville</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="ville" value="{ville}" maxlength="100" id="ville"/></td></tr><tr><td colspan="2" class="com-center com-ligne-submit"><input class="ui-state-default ui-corner-all com-button com-center" type="submit" value="Valider" /></td></tr></table></div></div></form></div></div>';this.ajoutProducteurSucces='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Nouveau Producteur</div><div class="com-widget-content"><p class="com-msg-confirm-icon" ><span class="com-float-left ui-icon ui-icon-check"></span>Le producteur {numero} a été ajouté avec succès.</p></div></div></div>';this.modifierProducteurSucces='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Modification d\'un Producteur</div><div class="com-widget-content"><p class="com-msg-confirm-icon" ><span class="com-float-left ui-icon ui-icon-check"></span>Le producteur {numero} a été mis à jour avec succès.</p></div></div></div>';this.supprimerProducteurSucces='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Suppression d\'un Producteur</div><div class="com-widget-content"><p class="com-msg-confirm-icon" ><span class="com-float-left ui-icon ui-icon-check"></span>Le producteur {numero} a été supprimé avec succès.</p></div></div></div>';this.listeProducteur='<div id="contenu"><div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Les Producteurs</div><div id="liste-adh-recherche" class="recherche com-widget-header ui-widget ui-widget-header ui-corner-all"><form id="filter-form"><div><span class="conteneur-icon com-float-left ui-widget-content ui-corner-left" title="Chercher"><span class="ui-icon ui-icon-search"></span></span><input class="com-input-text ui-widget-content ui-corner-right" name="filter" id="filter" value="" maxlength="30" size="15" type="text" /></div></form></div><table class="com-table"><thead><tr class="ui-widget ui-widget-header"><th class="com-table-th com-underline-hover liste-adh-th-num com-cursor-pointer"><span class="ui-icon span-icon"></span>N°</th><th class="com-table-th com-underline-hover liste-adh-th-nom com-cursor-pointer"><span class="ui-icon span-icon"></span>Nom</th><th class="com-table-th com-underline-hover liste-adh-th-nom com-cursor-pointer"><span class="ui-icon span-icon"></span>Prénom</th><th class="com-table-th com-underline-hover com-cursor-pointer"><span class="ui-icon span-icon"></span>Courriel</th><th class="com-table-th com-underline-hover com-cursor-pointer"><span class="ui-icon span-icon"></span>Téléphone</th></tr></thead><tbody><!-- BEGIN listeProducteur --><tr class="com-cursor-pointer compte-ligne" ><td class="com-table-td com-underline-hover"><span class="ui-helper-hidden id-producteur">{listeProducteur.prdtId}</span>{listeProducteur.prdtNumero}</td><td class="com-table-td com-underline-hover">{listeProducteur.prdtNom}</td><td class="com-table-td com-underline-hover">{listeProducteur.prdtPrenom}</td><td class="com-table-td com-underline-hover">{listeProducteur.prdtCourrielPrincipal}</td><td class="com-table-td com-underline-hover">{listeProducteur.prdtTelephonePrincipal}</td></tr><!-- END listeProducteur --></tbody></table></div></div></div></div>';this.listeProducteurVide='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Les Producteurs</div><p id="texte-liste-vide">Aucun producteur dans la base.</p></div></div>';this.dialogSuppressionProducteur='<div id="dialog-supp-prdt" title="Supprimer le producteur {prdtNumero}"><p class="ui-state-error ui-corner-all"><span class="ui-icon ui-icon-alert com-float-left"></span>ATTENTION : Voulez-vous réellement supprimer le producteur : {prdtNumero}</p></div>';this.infoCompteProducteur='<div id="info_compte_solde_adherent_ext"><div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Informations<span class="com-btn-header-multiples ui-widget-content ui-corner-all com-cursor-pointer" id="btn-supp" title="Supprimer"><span class="ui-icon ui-icon-trash"></span></span><span class="com-btn-header-multiples ui-widget-content ui-corner-all com-cursor-pointer" id="btn-edt" title="Modifier"><span class="ui-icon ui-icon-pencil"></span></span></div><div class="com-widget-content"><div>Numéro du producteur : {prdtNumero}</div><div>Numéro de Compte : {cptLabel}</div><div>Nom : {prdtNom}</div><div>Prénom : {prdtPrenom}</div><div>Date de naissance : {prdtDateNaissance}</div><div>Commentaire : {prdtCommentaire}</div></div></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Coordonnées</div><div class="com-widget-content"><div>Courriel Principal : {prdtCourrielPrincipal}</div><div>Courriel Secondaire : {prdtCourrielSecondaire}</div><div>Téléphone Principal : {prdtTelephonePrincipal}</div><div>Téléphone Secondaire : {prdtTelephoneSecondaire}</div><div>Adresse : {prdtAdresse}</div><div>Ville : {prdtVille}</div><div>Code Postal : {prdtCodePostal}</div></div></div></div></div>';this.listeOperationProducteur='<div id="liste_operation_adherent_ext"><div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Liste des Opérations</span></div>	<div><div id="content-nav-liste-operation" class="ui-helper-clearfix ui-state-default ui-corner-all"><form>	<span id="icone-nav-liste-operation-w" class="prev ui-helper-hidden ui-state-default ui-corner-all com-button" ><span class="ui-icon ui-icon-circle-arrow-w"></span></span>	<span id="page-compteur">Page : <span type="text" class="pagedisplay"></span></span>	<span id="icone-nav-liste-operation-e" class="next ui-state-default ui-corner-all com-button" ><span class="ui-icon ui-icon-circle-arrow-e"></span></span>	<input type="hidden" class="pagesize" value="10"></form></div><table id="table-operation" class="com-table"><thead><tr class="ui-widget ui-widget-header" ><th class="com-table-th">Date</th><th class="com-table-th">Libellé</th><th class="com-table-th">Type de paiement</th><th class="com-table-th">Débit</th><th class="com-table-th">Crédit</th></tr></thead><tbody><!-- BEGIN operationPassee --><tr><td class="com-table-td td-date ">{operationPassee.opeDate}</td><td class="com-table-td td-libelle">{operationPassee.opeLibelle}</td><td class="com-table-td td-type-paiement">{operationPassee.tppType}</td><td class="com-table-td td-montant">{operationPassee.debit}</td><td class="com-table-td td-montant">{operationPassee.credit}</td></tr><!-- END operationPassee --></tbody></table></div></div>';"</div></div>"}function GestionCommandeTemplate(){this.formulaireModifierCommande='<div id="contenu"><div class="com-barre-menu-2"><button class="ui-state-default ui-corner-top com-button" id="btn-editer-com"><span class="com-float-left ui-icon ui-icon-arrowthick-1-w"></span>Retour au Marché</button></div><div id="formulaire_ajout_commande_ext"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Modifier le Marché n°{comNumero}</div><div class="com-widget-content"><form id="formulaire-information-creation-commande"><table class="com-table-form"><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Nom du Marché</th><td class="com-table-form-td"><input value="{comNom}" class="com-input-text ui-widget-content ui-corner-all" type="text" name="nom_commande" id="commande-nom" maxlength="100" /></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Fin des Réservations *</th><td class="com-table-form-td"><input value="{dateTimeFinReservation}" class="com-input-text ui-widget-content ui-corner-all" type="text" name="date_fin_commande" id="commande-dateFinReservation" /></td><td class="com-table-form-td">&nbsp;&nbsp;à <select name="heure_fin_commande" id="commande-timeFinReservation" ><option value="00">00</option><option value="01">01</option><option value="02">02</option><option value="03">03</option><option value="04">04</option><option value="05">05</option><option value="06">06</option><option value="07">07</option><option value="08">08</option><option value="09">09</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option></select>H <select name="minute_fin_commande"><option value="00">00</option><option value="05">05</option><option value="10">10</option><option value="15">15</option><option value="20">20</option><option value="25">25</option><option value="30">30</option><option value="35">35</option><option value="40">40</option><option value="45">45</option><option value="50">50</option><option value="55">55</option></select></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Jour du marché *</th><td class="com-table-form-td"><input value="{dateMarcheDebut}" class="com-input-text ui-widget-content ui-corner-all" type="text" name="date_debut_marche" id="commande-dateMarcheDebut"/></td><td class="com-table-form-td">de <select name="heure_debut_marche" id="commande-timeMarcheDebut"><option value="00">00</option><option value="01">01</option><option value="02">02</option><option value="03">03</option><option value="04">04</option><option value="05">05</option><option value="06">06</option><option value="07">07</option><option value="08">08</option><option value="09">09</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option></select>H <select name="minute_debut_marche"><option value="00">00</option><option value="05">05</option><option value="10">10</option><option value="15">15</option><option value="20">20</option><option value="25">25</option><option value="30">30</option><option value="35">35</option><option value="40">40</option><option value="45">45</option><option value="50">50</option><option value="55">55</option></select></td><td class="com-table-form-td">à  <select name="heure_fin_marche" id="commande-timeMarcheFin"><option value="00">00</option><option value="01">01</option><option value="02">02</option><option value="03">03</option><option value="04">04</option><option value="05">05</option><option value="06">06</option><option value="07">07</option><option value="08">08</option><option value="09">09</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option></select>H <select name="minute_fin_marche"><option value="00">00</option><option value="05">05</option><option value="10">10</option><option value="15">15</option><option value="20">20</option><option value="25">25</option><option value="30">30</option><option value="35">35</option><option value="40">40</option><option value="45">45</option><option value="50">50</option><option value="55">55</option></select></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Description :</th><td class="com-table-form-td"><textarea class="com-input-text ui-widget-content ui-corner-all" name="description_commande" id="commande-description" >{comDescription}</textarea></td></tr></table></form></div></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all" id="window-ajout-produit-creation-commande"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Ajouter un produit</div><div class="com-widget-content"><form id="formulaire-ajout-produit-creation-commande"><table class="com-table-form"><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Produit</th><td class="com-table-form-td" id="ajout-produit-nom"><select name="produit" id="ajout-produit-idNom"><option value="0" >== Choisir un produit ==</option><!-- BEGIN produits --><option value={produits.id} >{produits.nom}</option><!-- END produits --></select></td><td class="com-center"><button type="button" id="btn-creer-nv-pdt" class="ui-state-default ui-corner-all com-button com-center">Créer un nouveau produit</button></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Producteur</th><td class="com-table-form-td" colspan="2"><select name="producteur" id="ajout-produit-idProducteur"><option value="0" >== Choisir un producteur ==</option><!-- BEGIN producteurs --><option value="{producteurs.prdtId}" >{producteurs.prdtPrenom} {producteurs.prdtNom}</option><!-- END producteurs --></select></td></tr><tr><td class="com-table-form-td"><br/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Stock</th><th class="com-table-form-th ui-widget-content ui-corner-all">Unité</th><th class="com-table-form-th ui-widget-content ui-corner-all">Quantité max par adhérent</th></tr><tr><td class="com-table-form-td"><input class="com-numeric com-input-text ui-widget-content ui-corner-all" type="text" name="stock" maxlength="11" id="ajout-produit-qteRestante"/></td><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" name="unite" type="text" maxlength="20" id="ajout-produit-unite"/></td><td class="com-table-form-td"><input class="com-numeric com-input-text ui-widget-content ui-corner-all" name="qmax" type="text" maxlength="11" id="ajout-produit-qteMaxCommande" /></td></tr><tr><td class="com-table-form-td"><br/></td></tr><tr><td></td><th class="com-table-form-th ui-widget-content ui-corner-all">Taille</th><th class="com-table-form-th ui-widget-content ui-corner-all">Prix</th></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Lot</th><td class="com-table-form-td"><input class="com-numeric com-input-text ui-widget-content ui-corner-all" name="taille" type="text" maxlength="12" id="ajout-produit-lots0taille"/></td><td class="com-table-form-td"><input class="com-numeric com-input-text ui-widget-content ui-corner-all" name="prix" type="text" maxlength="12" id="ajout-produit-lots0prix"/> {SIGLE_MONETAIRE}</td></tr><tr><td class="com-table-form-td"><br/></td></tr><tr><td colspan="3" class="com-center"><input class="ui-state-default ui-corner-all com-button com-center" type="submit" value="Ajouter au Marché"/></td></tr></table></form></div></div><div id="liste_produit"></div><div class="com-widget-window ui-widget ui-widget-header ui-corner-all com-center"><button type="button" id="btn-modifier-creation-commande" class="com-btn-edt-multiples ui-helper-hidden ui-state-default ui-corner-all com-button com-center">Modifier</button><button type="button" id="btn-creer-commande" class="ui-state-default ui-corner-all com-button com-center">Valider</button></div></div></div>';this.dialogAjoutProduit='<div id="dialog-form-creer-nv-pdt" title="Créer un nouveau produit"><form><table><tr><td>Nom</td><td><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="nom" id="nom-pdt-nom"/></td></tr><tr><td>Description</td><td><textarea class="com-input-text ui-widget-content ui-corner-all" name="description" id="nom-pdt-description"></textarea></td></tr></table></form></div>';this.ajoutProduitModifierCommande='<div class="produit-div com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all"><span class="produit-nom-id ui-helper-hidden">{proIdNomProduit}</span><span class="produit-nom">{nproNom}</span><span class="com-delete com-btn-header ui-widget-content ui-corner-all" title="Supprimer"><span class="ui-icon ui-icon-circle-close"></span></span></div><div class="com-widget-content"><span class="produit-id ui-helper-hidden">{proId}</span>Producteur : <span class="info-produit" id="nom-producteur">{nomProducteur}</span><select name="producteur" id="commande-produits{idNom}idProducteur" class="info-produit ui-helper-hidden"><option value="0" >== Choisir un producteur ==</option><!-- BEGIN producteurs --><option value="{producteurs.prdtId}" >{producteurs.prdtPrenom} {producteurs.prdtNom}</option><!-- END producteurs --></select><span class="edit-nom-pdt-creation-commande edit-nom-pdt-creation-commande-edit com-btn-header ui-widget-content ui-corner-all" title="Editer"><span class="ui-icon ui-icon-pencil"></span></span><span class="ui-helper-hidden btn-valider com-btn-header edit-nom-pdt-creation-commande edit-nom-pdt-creation-commande-valid ui-widget-content ui-corner-all" title="Valider"><span class="ui-icon ui-icon-check com-float-left"></span>Valider</span><br/>Quantité en stock : <span class="info-produit produit-stock">{quantiteInit}</span><input class="info-produit ui-helper-hidden com-numeric com-input-text ui-widget-content ui-corner-all" type="text" name="stock" value="{quantiteInit}" id="produit-{proIdNomProduit}-qteRestante" maxlength="11"/> <span class="info-produit produit-unite">{proUniteMesure}</span> <input class="info-produit ui-helper-hidden com-input-text ui-widget-content ui-corner-all" type="text" name="unite" value="{proUniteMesure}" id="produit-{proIdNomProduit}-unite" maxlength="20"/><br/>Quantité max par adhérent : <input class="info-produit ui-helper-hidden com-numeric com-input-text ui-widget-content ui-corner-all" type="text" name="qmax" value="{proMaxProduitCommande}" id="produit-{proIdNomProduit}-qteMaxCommande" maxlength="11"/><span class="info-produit produit-qmax">{proMaxProduitCommande}</span> <span class="produit-unite">{proUniteMesure}</span><div class="lots-section" ><div class="form-ajout-lot-creation-commande"><form><table><tr><td></td><td>Taille</td><td>Prix</td></tr><tr><td>Nouveau Lot : </td><td><input class="com-numeric com-input-text ui-widget-content ui-corner-all" type="text" name="taille" id="ajout-lot-produit-{proId}-taille" maxlength="12"/> <span class="produit-unite">{proUniteMesure}</span></td><td><input class="com-numeric com-input-text ui-widget-content ui-corner-all" type="text" name="prix" id="ajout-lot-produit-{proId}-prix" maxlength="12"/> {sigleMonetaire}</td><td><button type="button" class="btn-ajout-lot-creation-commande ui-state-default ui-corner-all com-button com-center">Ajouter</button></td></tr></table></form></div><div class="produit-lots"></div></div></div></div>';this.modifCommandeSucces='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Modification de la commande n°{numero}</div><div class="com-widget-content"><p class="com-msg-confirm-icon"><span class="com-float-left ui-icon ui-icon-check"></span>Marché n°{numero} modifié avec succès.</p></div></div></div>';this.formulaireAjoutCommande='<div id="contenu"><div id="formulaire_ajout_commande_ext"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Nouveau Marché</div><div class="com-widget-content"><form id="formulaire-information-creation-commande"><table class="com-table-form"><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Nom du Marché</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="nom_commande" id="commande-nom" maxlength="100" /></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Fin des Réservations *</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="date_fin_commande" id="commande-dateFinReservation" /></td><td class="com-table-form-td">&nbsp;&nbsp;à <select name="heure_fin_commande" id="commande-timeFinReservation" ><option value="00">00</option><option value="01">01</option><option value="02">02</option><option value="03">03</option><option value="04">04</option><option value="05">05</option><option value="06">06</option><option value="07">07</option><option value="08">08</option><option value="09">09</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option></select>H <select name="minute_fin_commande"><option value="00">00</option><option value="05">05</option><option value="10">10</option><option value="15">15</option><option value="20">20</option><option value="25">25</option><option value="30">30</option><option value="35">35</option><option value="40">40</option><option value="45">45</option><option value="50">50</option><option value="55">55</option></select></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Jour du marché *</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="date_debut_marche" id="commande-dateMarcheDebut"/></td><td class="com-table-form-td">de <select name="heure_debut_marche" id="commande-timeMarcheDebut"><option value="00">00</option><option value="01">01</option><option value="02">02</option><option value="03">03</option><option value="04">04</option><option value="05">05</option><option value="06">06</option><option value="07">07</option><option value="08">08</option><option value="09">09</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option></select>H <select name="minute_debut_marche"><option value="00">00</option><option value="05">05</option><option value="10">10</option><option value="15">15</option><option value="20">20</option><option value="25">25</option><option value="30">30</option><option value="35">35</option><option value="40">40</option><option value="45">45</option><option value="50">50</option><option value="55">55</option></select></td><td class="com-table-form-td">à  <select name="heure_fin_marche" id="commande-timeMarcheFin"><option value="00">00</option><option value="01">01</option><option value="02">02</option><option value="03">03</option><option value="04">04</option><option value="05">05</option><option value="06">06</option><option value="07">07</option><option value="08">08</option><option value="09">09</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option></select>H <select name="minute_fin_marche"><option value="00">00</option><option value="05">05</option><option value="10">10</option><option value="15">15</option><option value="20">20</option><option value="25">25</option><option value="30">30</option><option value="35">35</option><option value="40">40</option><option value="45">45</option><option value="50">50</option><option value="55">55</option></select></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Description :</th><td class="com-table-form-td"><textarea class="com-input-text ui-widget-content ui-corner-all" name="description_commande" id="commande-description" ></textarea></td></tr></table></form></div></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all" id="window-ajout-produit-creation-commande"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Ajouter un produit</div><div class="com-widget-content"><form id="formulaire-ajout-produit-creation-commande"><table class="com-table-form"><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Produit</th><td class="com-table-form-td" id="ajout-produit-nom"><select name="produit" id="ajout-produit-idNom"><option value="0" >== Choisir un produit ==</option><!-- BEGIN produits --><option value="{produits.id}" >{produits.nom}</option><!-- END produits --></select></td><td class="com-center"><button type="button" id="btn-creer-nv-pdt" class="ui-state-default ui-corner-all com-button com-center">Créer un nouveau produit</button></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Producteur</th><td class="com-table-form-td" colspan="2"><select name="producteur" id="ajout-produit-idProducteur"><option value="0" >== Choisir un producteur ==</option><!-- BEGIN producteurs --><option value="{producteurs.prdtId}" >{producteurs.prdtPrenom} {producteurs.prdtNom}</option><!-- END producteurs --></select></td></tr><tr><td class="com-table-form-td"><br/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Stock</th><th class="com-table-form-th ui-widget-content ui-corner-all">Unité</th><th class="com-table-form-th ui-widget-content ui-corner-all">Quantité max par adhérent</th></tr><tr><td class="com-table-form-td"><input class="com-numeric com-input-text ui-widget-content ui-corner-all" type="text" name="stock" maxlength="11" id="ajout-produit-qteRestante"/></td><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" name="unite" type="text" maxlength="20" id="ajout-produit-unite"/></td><td class="com-table-form-td"><input class="com-numeric com-input-text ui-widget-content ui-corner-all" name="qmax" type="text" maxlength="11" id="ajout-produit-qteMaxCommande" /></td></tr><tr><td class="com-table-form-td"><br/></td></tr><tr><td></td><th class="com-table-form-th ui-widget-content ui-corner-all">Taille</th><th class="com-table-form-th ui-widget-content ui-corner-all">Prix</th></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Lot</th><td class="com-table-form-td"><input class="com-numeric com-input-text ui-widget-content ui-corner-all" name="taille" type="text" maxlength="12" id="ajout-produit-lots0taille"/></td><td class="com-table-form-td"><input class="com-numeric com-input-text ui-widget-content ui-corner-all" name="prix" type="text" maxlength="12" id="ajout-produit-lots0prix"/> {SIGLE_MONETAIRE}</td></tr><tr><td class="com-table-form-td"><br/></td></tr><tr><td colspan="3" class="com-center"><input type="submit" value="Ajouter au Marché" class="ui-state-default ui-corner-all com-button com-center"/></td></tr></table></form></div></div><div id="liste_produit"></div><div class="com-widget-window ui-widget ui-widget-header ui-corner-all com-center"><button type="button" id="btn-modifier-creation-commande" class="com-btn-edt-multiples ui-helper-hidden ui-state-default ui-corner-all com-button com-center">Modifier le Marché</button><button type="button" id="btn-creer-commande" class="ui-state-default ui-corner-all com-button com-center">Créer le Marché</button></div></div></div>';this.ajoutProduitAjoutCommande='<div class="produit-div com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all"><span class="produit-nom">{nom}</span><span class="com-delete com-btn-header ui-widget-content ui-corner-all" title="Supprimer"><span class="ui-icon ui-icon-circle-close"></span></span></div><div class="com-widget-content"><span class="produit-id ui-helper-hidden">{idNom}</span>Producteur : <span class="info-produit" id="nom-producteur">{nomProducteur}</span><select name="producteur" id="commande-produits{idNom}idProducteur" class="info-produit ui-helper-hidden"><option value="0" >== Choisir un producteur ==</option><!-- BEGIN producteurs --><option value="{producteurs.prdtId}" >{producteurs.prdtPrenom} {producteurs.prdtNom}</option><!-- END producteurs --></select><span class="edit-nom-pdt-creation-commande edit-nom-pdt-creation-commande-edit com-btn-header ui-widget-content ui-corner-all" title="Editer"><span class="ui-icon ui-icon-pencil"></span></span><span class="ui-helper-hidden btn-valider com-btn-header edit-nom-pdt-creation-commande edit-nom-pdt-creation-commande-valid ui-widget-content ui-corner-all" title="Valider"><span class="ui-icon ui-icon-check com-float-left"></span>Valider</span><br/>Quantité en stock : <span class="produit-stock info-produit">{qteRestante}</span><input class="info-produit ui-helper-hidden com-numeric com-input-text ui-widget-content ui-corner-all" type="text" name="stock" value="{qteRestante}" id="produit-{idNom}-qteRestante" maxlength="11"/> <span class="info-produit produit-unite">{unite}</span> <input class="info-produit ui-helper-hidden com-input-text ui-widget-content ui-corner-all" type="text" name="unite" value="{unite}" id="produit-{idNom}-unite" maxlength="20"/><br/>Quantité max par adhérent : <span class="info-produit produit-qmax">{qteMaxCommande}</span><input class="info-produit ui-helper-hidden com-numeric com-input-text ui-widget-content ui-corner-all" type="text" name="qmax" value="{qteMaxCommande}" id="produit-{idNom}-qteMaxCommande" maxlength="11"/> <span class="produit-unite">{unite}</span><div class="lots-section" ><div class="form-ajout-lot-creation-commande"><form><table><tr><td></td><td>Taille</td><td>Prix</td></tr><tr><td>Nouveau Lot : </td><td><input class="com-numeric com-input-text ui-widget-content ui-corner-all" type="text" name="taille" id="ajout-lot-produit-{idNom}-taille" maxlength="12"/> <span class="produit-unite">{unite}</span></td><td><input class="com-numeric com-input-text ui-widget-content ui-corner-all" type="text" name="prix" id="ajout-lot-produit-{idNom}-prix" maxlength="12"/> {siglemonetaire}</td><td><button type="button" class="btn-ajout-lot-creation-commande ui-state-default ui-corner-all com-button com-center">Ajouter</button></td></tr></table></form></div><div class="produit-lots"></div></div></div></div>';this.ajoutLotModifPdt='<!-- BEGIN lots --><div class="produit-lot"><span class="lot-id ui-helper-hidden">{lots.id}</span>Taille : <input class="pdt-{lots.idPdt}-lot-{lots.id} ui-helper-hidden com-numeric com-input-text ui-widget-content ui-corner-all" type="text" name="taille" value="{lots.taille}" id="produit-{lots.idPdt}-lot-{lots.id}-taille" maxlength="12"/><span class="pdt-{lots.idPdt}-lot-{lots.id} produit-taille">{lots.taille}</span> <span class="produit-unite">{lots.unite}</span>   Prix : <input class="pdt-{lots.idPdt}-lot-{lots.id} ui-helper-hidden com-numeric com-input-text ui-widget-content ui-corner-all" type="text" name="prix" value="{lots.prix}" id="produit-{lots.idPdt}-lot-{lots.id}-prix" maxlength="12" /><span class="pdt-{lots.idPdt}-lot-{lots.id} produit-prix">{lots.prix}</span> {siglemonetaire}<span class="conteneur-btn-edt-lot"><span class="ui-helper-hidden delete-lot com-btn-header-multiples ui-widget-content ui-corner-all" title="Supprimer"><span class="ui-icon ui-icon-closethick"></span></span><span class="edit-lot-creation-commande edit-lot-creation-commande-edit com-btn-header-multiples ui-widget-content ui-corner-all" title="Editer"><span class="ui-icon ui-icon-pencil"></span></span><span class="ui-helper-hidden btn-valider com-btn-header-multiples edit-lot-creation-commande edit-lot-creation-commande-valid ui-widget-content ui-corner-all" title="Valider"><span class="ui-icon ui-icon-check com-float-left"></span>Valider</span></span></div><!-- END lots -->';this.ajoutLotAjoutPdt='<!-- BEGIN lots --><div class="produit-lot"><span class="lot-id ui-helper-hidden">0</span>Taille : <span class="pdt-{idNom}-lot-0 produit-taille">{lots.taille}</span><input class="pdt-{idNom}-lot-0 ui-helper-hidden com-numeric com-input-text ui-widget-content ui-corner-all" type="text" name="taille" value="{lots.taille}" id="produit-{idNom}-lot-0-taille" maxlength="12"/> <span class="produit-unite">{unite}</span>   Prix : <span class="pdt-{idNom}-lot-0 produit-prix">{lots.prix}</span><input class="pdt-{idNom}-lot-0 ui-helper-hidden com-numeric com-input-text ui-widget-content ui-corner-all" type="text" name="prix" value="{lots.prix}" id="produit-{idNom}-lot-0-prix" maxlength="12" /> {siglemonetaire}<span class="conteneur-btn-edt-lot"><span class="ui-helper-hidden delete-lot com-btn-header-multiples ui-widget-content ui-corner-all" title="Supprimer"><span class="ui-icon ui-icon-closethick"></span></span><span class="edit-lot-creation-commande edit-lot-creation-commande-edit com-btn-header-multiples ui-widget-content ui-corner-all" title="Editer"><span class="ui-icon ui-icon-pencil"></span></span><span class="ui-helper-hidden btn-valider com-btn-header-multiples edit-lot-creation-commande edit-lot-creation-commande-valid ui-widget-content ui-corner-all" title="Valider"><span class="ui-icon ui-icon-check com-float-left"></span>Valider</span></span></div><!-- END lots -->';this.ajoutLot='<div class="produit-lot"><span class="lot-id ui-helper-hidden">{id}</span>Taille : <span class="pdt-{idNom}-lot-{id} produit-taille">{taille}</span><input class="pdt-{idNom}-lot-{id} ui-helper-hidden com-numeric com-input-text ui-widget-content ui-corner-all" type="text" name="taille" value="{taille}" id="produit-{idNom}-lot-{id}-taille" maxlength="12"> <span class="produit-unite">{unite}</span>   Prix : <span class="pdt-{idNom}-lot-{id} produit-prix">{prix}</span><input class="pdt-{idNom}-lot-{id} ui-helper-hidden com-numeric com-input-text ui-widget-content ui-corner-all" type="text" name="prix" value="{prix}" id="produit-{idNom}-lot-{id}-prix" maxlength="12"> {siglemonetaire}<span class="conteneur-btn-edt-lot"><span class="ui-helper-hidden delete-lot com-btn-header-multiples ui-widget-content ui-corner-all" title="Supprimer"><span class="ui-icon ui-icon-closethick"></span></span><span class="edit-lot-creation-commande edit-lot-creation-commande-edit com-btn-header-multiples ui-widget-content ui-corner-all" title="Editer"><span class="ui-icon ui-icon-pencil"></span></span><span class="ui-helper-hidden btn-valider com-btn-header-multiples edit-lot-creation-commande edit-lot-creation-commande-valid ui-widget-content ui-corner-all" title="Valider"><span class="ui-icon ui-icon-check com-float-left"></span>Valider</span></span></div>';this.ajoutCommandeSucces='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Création du Marché</div><div class="com-widget-content"><p class="com-msg-confirm-icon"><span class="com-float-left ui-icon ui-icon-check"></span>Le marché n°{numero} a été ajouté avec succès.</p></div></div></div>';this.listeCommandePage='<div id="contenu"><div id="liste_commande_int"><div class="com-barre-menu-2"><button class="ui-state-default ui-corner-top com-button" id="lien-marche-archive"><span class="com-float-left">Les Marchés cloturés</span><span class="com-float-left ui-icon ui-icon-arrowthick-1-e"></span></button></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Les Marchés en cours</div><table class="com-table"><tr class="ui-widget ui-widget-header"><th class="com-table-th lst-resa-th-num">N°</th><th class="com-table-th">Date de cloture des Réservations</th><th class="com-table-th">Marché</th>	<th class="com-table-th"></th><th class="com-table-th"></th></tr><!-- BEGIN commande --><tr><td class="com-table-td com-text-align-right">{commande.numero}</td><td class="com-table-td">Le {commande.dateFinReservation} à {commande.heureFinReservation}H{commande.minuteFinReservation}</td><td class="com-table-td">Le {commande.dateMarcheDebut} de {commande.heureMarcheDebut}H{commande.minuteMarcheDebut} à {commande.heureMarcheFin}H{commande.minuteMarcheFin}</td><td class="com-table-td lst-resa-btn-commander"><button class="btn-editer ui-state-default ui-corner-all com-button com-center" id="{commande.id}" >Editer</button></td><td class="com-table-td lst-resa-btn-commander"><button class="btn-marche ui-state-default ui-corner-all com-button com-center" id="{commande.id}" >Vente</button></td></tr><!-- END commande --></table></div></div></div></div>';this.listeCommandeArchivePage='<div id="contenu"><div id="liste_commande_int"><div class="com-barre-menu-2"><button class="ui-state-default ui-corner-top com-button" id="lien-marche-encours"><span class="com-float-left ui-icon ui-icon-arrowthick-1-w"></span>Les Marchés en cours</button></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Les Marchés cloturés</div><div id="content-nav-liste-operation" class="ui-helper-clearfix ui-state-default ui-corner-all"><form>	<span id="icone-nav-liste-operation-w" class="prev ui-helper-hidden ui-state-default ui-corner-all com-button" ><span class="ui-icon ui-icon-circle-arrow-w"></span></span>	<span id="page-compteur">Page : <span type="text" class="pagedisplay"></span></span>	<span id="icone-nav-liste-operation-e" class="next ui-state-default ui-corner-all com-button" ><span class="ui-icon ui-icon-circle-arrow-e"></span></span>	<input type="hidden" class="pagesize" value="30"></form></div><table class="com-table" id="table-marche-archive"><thead><tr class="ui-widget ui-widget-header"><th class="com-table-th lst-resa-th-num com-cursor-pointer"><span class="ui-icon span-icon"></span>N°</th><th class="com-table-th com-cursor-pointer" ><span class="ui-icon span-icon"></span>Date de cloture des Réservations</th><th class="com-table-th com-cursor-pointer" ><span class="ui-icon span-icon"></span>Marché</th>	</tr></thead><tbody><!-- BEGIN commande --><tr class="com-cursor-pointer detail-commande-ligne" ><td class="com-table-td com-underline-hover com-text-align-right"><span class="ui-helper-hidden id-commande">{commande.id}</span>{commande.numero}</td><td class="com-table-td com-underline-hover">Le {commande.dateFinReservation} à {commande.heureFinReservation}H{commande.minuteFinReservation}</td><td class="com-table-td com-underline-hover">Le {commande.dateMarcheDebut} de {commande.heureMarcheDebut}H{commande.minuteMarcheDebut} à {commande.heureMarcheFin}H{commande.minuteMarcheFin}</td></tr><!-- END commande --></tbody></table></div></div></div></div>';this.listeAdherentCommandePage='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Vente du Marché n°{comNumero}</div><div class="recherche com-widget-header ui-widget ui-widget-header ui-corner-all"><form id="filter-form"> <span class="conteneur-icon com-float-left ui-widget-content ui-corner-left" title="Chercher"><span class="ui-icon ui-icon-search"></span></span><input class="com-input-text ui-widget-content ui-corner-right" name="filter" id="filter" value="" maxlength="30" size="15" type="text" /></form></div><table class="com-table"><thead><tr class="ui-widget ui-widget-header com-cursor-pointer"><th class="com-table-th com-underline-hover marche-com-th-num-adh"><span class="ui-icon span-icon"></span>Numéro Adhérent</th><th class="com-table-th com-underline-hover marche-com-th-num-adh"><span class="ui-icon span-icon"></span>Numéro Compte</th><th class="com-table-th com-underline-hover marche-com-th-nom"><span class="ui-icon span-icon"></span>Nom</th>	<th class="com-table-th com-underline-hover"><span class="ui-icon span-icon"></span>Prénom</th></tr></thead><tbody><!-- BEGIN listeAdherentCommande --><tr class="com-cursor-pointer achat-commande-ligne" ><td class="com-table-td com-underline-hover"><span class="ui-helper-hidden id-adherent">{listeAdherentCommande.adhId}</span>{listeAdherentCommande.adhNumero}</td><td class="com-table-td com-underline-hover">{listeAdherentCommande.adhLabelCompte}</td><td class="com-table-td com-underline-hover">{listeAdherentCommande.adhNom}</td><td class="com-table-td com-underline-hover">{listeAdherentCommande.adhPrenom}</td></tr><!-- END listeAdherentCommande --></tbody></table></div></div></div>';this.achatCommandePage='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Vente du Marché n°{comNumero}</div><div class="com-widget-content"><div id="resa-info-commande">{adhNumero} :  {adhPrenom} {adhNom}<br/>N° de Compte : {adhCompte}</div><div><span>Solde Actuel : </span><span>{adhSolde} {sigleMonetaire}</span><br/><span>Nouveau Solde : </span><span id="nouveau-solde">{adhNouveauSolde}</span> <span id="nouveau-solde-sigle">{sigleMonetaire}</span></div></div></div><div class="com-float-left"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all" id="achat-pdt-widget"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Achat</div><div class="com-widget-content"><table class="achat-commande-table-pdt"><thead><tr><th>Produit</th><th>Quantité</th><th></th><th>Prix</th><th></th></tr></thead><tbody><!-- BEGIN produits --><tr class="ligne-produit"><td><span class="produit-id ui-helper-hidden">{produits.proId}</span>{produits.nproNom}</td><td class="com-text-align-right td-qte"><input type="text" value="{produits.stoQuantite}" class="com-numeric produit-quantite com-input-text ui-widget-content ui-corner-all" id="produits{produits.proId}quantite" maxlength="12" size="3"/> </td><td class="td-unite">{produits.proUniteMesure}</td><td class="com-text-align-right td-qte" ><input type="text" value="{produits.proPrix}" class="com-numeric produit-prix com-input-text ui-widget-content ui-corner-all" id="produits{produits.proId}prix" maxlength="12" size="3"/></td><td><span>{sigleMonetaire}</span></td></tr><!-- END produits --></tbody><tfoot><tr><td colspan="2"></td><td class="com-text-align-right" >Total :</td><td class="com-text-align-right" ><span id="total-achat">{total}</span></td><td><span>{sigleMonetaire}</span></td></tr></tfoot></table></div></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all" id="achat-pdt-solidaire-widget" ><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Achat Solidaire</div><div class="com-widget-content"><table class="achat-commande-table-pdt"><thead><tr><th>Produit</th><th>Quantité</th><th></th><th>Prix</th><th></th></tr></thead><tbody><!-- BEGIN produitsSolidaire --><tr class="ligne-produit-solidaire"><td><span class="produit-id ui-helper-hidden">{produitsSolidaire.proId}</span>{produitsSolidaire.nproNom}</td><td class="com-text-align-right td-qte"><input type="text" value="0" class="com-numeric produit-solidaire-quantite com-input-text ui-widget-content ui-corner-all" id="produitsSolidaire{produitsSolidaire.proId}quantite" maxlength="12" size="3"/> </td><td class="td-unite">{produitsSolidaire.proUniteMesure}</td><td class="com-text-align-right td-qte" ><input type="text" value="0" class="com-numeric produit-solidaire-prix com-input-text ui-widget-content ui-corner-all" id="produitsSolidaire{produitsSolidaire.proId}prix" maxlength="12" size="3"/></td><td><span>{sigleMonetaire}</span></td></tr><!-- END produitsSolidaire --></tbody><tfoot><tr><td colspan="2"></td><td class="com-text-align-right" >Total :</td><td class="com-text-align-right" ><span id="total-achat-solidaire">0,00</span></td><td><span>{sigleMonetaire}</span></td></tr></tfoot></table></div></div></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all com-float-left" id="achat-rechgt-widget"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Rechargement du compte</div><div class="com-widget-content"><table><thead><tr><th>Montant</th><th>Type de Paiement</th><th id="label-champ-complementaire"></th></tr></thead><tbody><tr><td><input type="text" name="montant-rechargement" value="" class="com-numeric com-input-text ui-widget-content ui-corner-all" id="rechargementmontant" maxlength="12" size="3"/> <span>{sigleMonetaire}</span></td><td class="com-center"><select name="typepaiement" id="rechargementtypePaiement"><option value="0">== Choisir ==</option><!-- BEGIN typePaiement --><option value="{typePaiement.tppId}">{typePaiement.tppType}</option><!-- END typePaiement --></select></td><td id="td-champ-complementaire"><input type="text" name="champ-complementaire" value="" class="com-input-text ui-widget-content ui-corner-all" id="rechargementchampComplementaire" maxlength="50" size="15"/></td></tr></tbody></table></div></div><div class="com-clear-float-left com-widget-header ui-widget ui-widget-header ui-corner-all com-center"><button type="button" id="btn-annuler" class="com-btn-edt-multiples ui-state-default ui-corner-all com-button com-center">Annuler</button><button type="button" class="ui-helper-hidden com-btn-edt-multiples ui-state-default ui-corner-all com-button com-center" id="btn-modifier">Modifier</button><button type="button" id="btn-valider" class="ui-state-default ui-corner-all com-button com-center">Valider</button></div></div>';this.achatCommandeSucces='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Achat</div><div class="com-widget-content"><p class="com-msg-confirm-icon"><span class="com-float-left ui-icon ui-icon-check"></span>Achat effectué avec succès.<br/><br/><button id="btn-annuler" class="ui-state-default ui-corner-all com-button com-center">Retourner à la liste des réservations</button></p></div></div></div>';this.cloturerCommandeSucces='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Cloture du Marché n°{numero}</div><div class="com-widget-content"><p class="com-msg-confirm-icon"><span class="com-float-left ui-icon ui-icon-check"></span>Cloture du Marché n°{numero} effectuée avec succès.</p></div></div></div>';this.dialogClotureCommande='<div id="dialog-cloturer-com" title="Cloture du Marché n°{comNumero}"><p>Vous allez cloturer le Marché n°{comNumero}</p></div>';this.dialogExportListeReservation='<div id="dialog-export-liste-reservation" title="Export des réservations du Marché n°{comNumero}"><form><table><tr><td>Format de sortie : </td><td><input type="radio" name="format" value="0" checked="checked" />Pdf</td><td><input type="radio" name="format" value="1" />CSV</td></tr><tr></tr><tr><td colspan="3">Sélectionner les produits : </td></tr><!-- BEGIN pdtCommande --><tr><td></td><td><input type="checkbox" value="{pdtCommande.proId}" name="id_produits"/></td><td>{pdtCommande.nproNom}</td></tr><!-- END pdtCommande --></table></form></div>';this.editerCommandePage='<div id="contenu"><div class="com-float-left" id="edt-com-info"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Marché n°{comNumero}<span class="com-cursor-pointer com-btn-header-multiples ui-widget-content ui-corner-all" id="btn-cloture-com" title="Cloturer"><span class="ui-icon ui-icon-disk"></span></span><span class="com-cursor-pointer com-btn-header-multiples ui-widget-content ui-corner-all" id="btn-modif-com" title="Modifier"><span class="ui-icon ui-icon-pencil"></span></span><span class="com-cursor-pointer com-btn-header-multiples ui-widget-content ui-corner-all" id="btn-livraison-com" title="Bon de livraison"><span class="ui-icon ui-icon-cart"></span></span><span class="com-cursor-pointer com-btn-header-multiples ui-widget-content ui-corner-all" id="btn-bon-com" title="Bon de commande"><span class="ui-icon ui-icon-document"></span></span></div><div>Fin des réservations : <br/>Le {dateFinReservation} à {heureFinReservation}H{minuteFinReservation} <br/>Marché : <br/>Le {dateMarcheDebut} de {heureMarcheDebut}H{minuteMarcheDebut} à {heureMarcheFin}H{minuteMarcheFin}</div></div><!-- BEGIN pdtCommande --><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">{pdtCommande.nproNom}<span class="com-btn-header ui-widget-content ui-corner-all com-cursor-pointer pdt-{pdtCommande.proId}-afficher-detail"><span class="ui-icon ui-icon-plusthick"></span></span><span class="ui-helper-hidden com-btn-header ui-widget-content ui-corner-all com-cursor-pointer pdt-{pdtCommande.proId}-afficher-detail"><span class="ui-icon ui-icon-minusthick"></span></span></div><div><div class="edt-com-progressbar-pdt" id="pdt-{pdtCommande.proId}"></div><div class="ui-helper-hidden" id="pdt-{pdtCommande.proId}-detail">Stock Initial : {pdtCommande.quantiteInit} {pdtCommande.proUniteMesure}<br/>Stock Actuel : {pdtCommande.quantite} {pdtCommande.proUniteMesure}<br/>Stock Commandé : {pdtCommande.quantiteCommande} {pdtCommande.proUniteMesure}<br/>Max par adhérent {pdtCommande.proMaxProduitCommande} {pdtCommande.proUniteMesure}<div><div>Lots : </div><!-- BEGIN pdtCommande.lot -->{pdtCommande.lot.dcomTaille} {pdtCommande.proUniteMesure} à {pdtCommande.lot.dcomPrix} {sigleMonetaire}<br/><!-- END pdtCommande.lot --></div></div></div></div><!-- END pdtCommande --></div><div class="com-float-left" id="edt-com-liste" ><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Liste des Réservation<span class="com-cursor-pointer com-btn-header ui-widget-content ui-corner-all" id="btn-export-resa" title="Exporter les réservations"><span class="ui-icon ui-icon-print"></span></span></div><div id="edt-com-recherche" class="recherche com-widget-header ui-widget ui-widget-header ui-corner-all"><form id="filter-form"><span class="conteneur-icon com-float-left ui-widget-content ui-corner-left" title="Chercher"><span class="ui-icon ui-icon-search"></span></span><input class="com-input-text ui-widget-content ui-corner-right" name="filter" id="filter" value="" maxlength="30" size="15" type="text" /></form></div><table class="com-table" id="edt-com-liste-resa"><thead><tr class="ui-widget ui-widget-header com-cursor-pointer"><th class="com-table-th com-underline-hover"><span class="ui-icon span-icon"></span>Numéro Adhérent</th><th class="com-table-th com-underline-hover"><span class="ui-icon span-icon"></span>Numéro Compte</th><th class="com-table-th com-underline-hover"><span class="ui-icon span-icon"></span>Nom</th>	<th class="com-table-th com-underline-hover"><span class="ui-icon span-icon"></span>Prénom</th></tr></thead><tbody><!-- BEGIN listeAdherentCommande --><tr class="com-cursor-pointer edt-com-reservation-ligne" ><td class="com-table-td com-underline-hover"><span class="ui-helper-hidden id-adherent">{listeAdherentCommande.adhId}</span>{listeAdherentCommande.adhNumero}</td><td class="com-table-td com-underline-hover">{listeAdherentCommande.adhLabelCompte}</td><td class="com-table-td com-underline-hover">{listeAdherentCommande.adhNom}</td><td class="com-table-td com-underline-hover">{listeAdherentCommande.adhPrenom}</td></tr><!-- END listeAdherentCommande --></tbody></table></div></div></div></div>';this.supprimerReservationDialog='<div id="dialog-supprimer-reservation" title="Supprimer la réservation"><p>Voulez-vous supprimer la réservation ?</p></div>';this.detailReservation='<div id="contenu"><div class="com-barre-menu-2"><button class="ui-state-default ui-corner-top com-button" id="btn-annuler"><span class="com-float-left ui-icon ui-icon-arrowthick-1-w"></span>Retour au Marché</button></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Marché n°{comNumero}</div><div>Fin des réservations : Le {dateFinReservation} à {heureFinReservation}H{minuteFinReservation} <br/>Marché : Le {dateMarcheDebut} de {heureMarcheDebut}H{minuteMarcheDebut} à {heureMarcheFin}H{minuteMarcheFin}</div></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Adhérent</div><div class="com-widget-content"><div id="resa-info-commande">{adhNumero} :  {adhPrenom} {adhNom}<br/>N° de Compte : {adhCompte}</div><div><span>Solde Actuel : </span><span>{adhSolde} {sigleMonetaire}</span></div><div class="com-clear-float-left"></div></div></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">La réservation</div><table><!-- BEGIN reservation --><tr ><td class="detail-resa-npro">{reservation.nproNom}</td><td class="com-text-align-right detail-resa-qte">{reservation.stoQuantite}</td><td class="detail-resa-unite">{reservation.proUniteMesure}</td><td class="com-text-align-right detail-resa-prix">{reservation.prix}</td><td>{sigleMonetaire}</td></tr><!-- END reservation --><tr><td class="com-text-align-right" colspan="3">Total : </td><td class="com-text-align-right">{total}</td><td>{sigleMonetaire}</td></tr></table></div><div class="boutons-edition com-widget-header ui-widget ui-widget-header ui-corner-all com-center"><button class="com-btn-edt-multiples ui-state-default ui-corner-all com-button com-center" id="btn-modifier">Modifier</button><button class="ui-state-default ui-corner-all com-button com-center" id="btn-supprimer">Supprimer</button></div></div>';this.modifierReservation='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Marché n°{comNumero}</div><div>Fin des réservations : Le {dateFinReservation} à {heureFinReservation}H{minuteFinReservation} <br/>Marché : Le {dateMarcheDebut} de {heureMarcheDebut}H{minuteMarcheDebut} à {heureMarcheFin}H{minuteMarcheFin}</div></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Adhérent</div><div class="com-widget-content"><div id="resa-info-commande">{adhNumero} :  {adhPrenom} {adhNom}<br/>N° de Compte : {adhCompte}</div><div><span>Solde Actuel : </span><span>{adhSolde} {sigleMonetaire}</span><br/><span>Nouveau Solde : </span><span id="nouveau-solde">{adhNouveauSolde}</span> <span id="nouveau-solde-sigle">{sigleMonetaire}</span></div></div></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">La réservation</div><div><table><!-- BEGIN produit --><tr class="pdt"><td><input type="checkbox" {produit.checked}/></td><td><span class="ui-helper-hidden"><span class="pdt-id">{produit.proId}</span></span></td><td>{produit.nproNom}</td><td><select id="lot-{produit.proId}"><!-- BEGIN produit.lot --><option value="{produit.lot.dcomId}">par {produit.lot.dcomTaille} {produit.proUniteMesure}</option><!-- END produit.lot --></select></td><td>à <span id="prix-unitaire-{produit.proId}">{produit.prixUnitaire}</span> {sigleMonetaire}/{produit.proUniteMesure}</td><td class="ui-helper-hidden resa-pdt-{produit.proId}"><button class="btn-moins">-</button></td><td class="ui-helper-hidden resa-pdt-{produit.proId}"><span id="qte-pdt-{produit.proId}"></span> {produit.proUniteMesure}</td><td class="ui-helper-hidden resa-pdt-{produit.proId}"><button class="btn-plus">+</button></td><td class="ui-helper-hidden resa-pdt-{produit.proId} com-text-align-right"><span id="prix-pdt-{produit.proId}"></span> {sigleMonetaire}</td></tr><!-- END produit --><tr><td colspan="8" class="com-text-align-right">Total : </td><td class="com-text-align-right detail-resa-prix"><span id="total">{total}</span></td><td>{sigleMonetaire}</td></tr></table></div></div><div class="com-widget-header ui-widget ui-widget-header ui-corner-all com-center"><button class="com-btn-edt-multiples ui-state-default ui-corner-all com-button com-center" id="btn-annuler">Annuler</button><button class="ui-state-default ui-corner-all com-button com-center" id="btn-valider">Valider</button></div></div>';this.listeCommandeVide='<div id="contenu"><div class="com-barre-menu-2"><button class="ui-state-default ui-corner-top com-button" id="lien-marche-archive"><span class="com-float-left">Les Marchés cloturés</span><span class="com-float-left ui-icon ui-icon-arrowthick-1-e"></span></button></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Les Marchés en cours</div><p id="texte-liste-vide">Aucun Marché en cours.</p></div></div>';this.listeCommandeArchiveVide='<div id="contenu"><div class="com-barre-menu-2"><button class="ui-state-default ui-corner-top com-button" id="lien-marche-encours"><span class="com-float-left ui-icon ui-icon-arrowthick-1-w"></span>Les Marchés en cours</button></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Les Marchés en cloturés</div><p id="texte-liste-vide">Aucun Marché cloturé.</p></div></div>';this.listeMarcheVide='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Vente</div><p id="texte-liste-vide">Aucune réservation en cours.</p></div></div>';this.listeReservationVide='<p id="texte-liste-vide">Aucune reservation.</p>';this.dialogEnregistrement='<div title="Enregistrer les modifications"><p>Vous n\'avez pas enregistré vos modifications.</p></div>';this.dialogExportBonDeCommande='<div id="dialog-export-bon-commande" title="Export du Bon de Commande du Marché n°{comNumero}"><form><table><tr><td>Format de sortie : </td><td><input type="radio" name="format" value="0" checked="checked" />Pdf</td><td><input type="radio" name="format" value="1" />CSV</td></tr></table></form></div>';this.bonDeCommande='<div id="contenu"><div class="com-barre-menu-2"><button class="ui-state-default ui-corner-top com-button" id="btn-editer-com"><span class="com-float-left ui-icon ui-icon-arrowthick-1-w"></span>Retour au Marché</button></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Bon de commande du Marché n°{comNumero}<span class="com-cursor-pointer com-btn-header ui-widget-content ui-corner-all" id="btn-export-bcom" title="Exporter le bon de commande"><span class="ui-icon ui-icon-print"></span></span></div><div><form><span>Producteur : <select id="select-prdt"><option value="0" >== Choisir un producteur ==</option><!-- BEGIN producteurs --><option value="{producteurs.prdtId}">{producteurs.prdtPrenom} {producteurs.prdtNom}</option><!-- END producteurs --></select></span></form></div><div id="liste-pdt"></div></div></div>';this.listeProduitVide='<div id="liste-pdt"></div>';this.listeProduitBonDeCommande='<div id="liste-pdt"><table class="com-table"><thead><tr><th>Produit</th><th>Réservation</th><th>Commande</th><th>Prix</th><th>État</th></tr></thead><tbody><!-- BEGIN produits --><tr><td>{produits.nproNom}</td><td>{produits.stoQuantite} {produits.proUniteMesure}</td><td><span class="pro-id ui-helper-hidden">{produits.proId}</span><input class="qte-commande com-numeric com-input-text ui-widget-content ui-corner-all" type="text" name="qte-commande-{produits.proId}" maxlength="11" value="{produits.stoQuantiteCommande}" id="produits{produits.proId}quantite"/> {produits.proUniteMesure}</td><td><input class="prix-commande com-numeric com-input-text ui-widget-content ui-corner-all" type="text" name="prix-commande-{produits.proId}" maxlength="11" value="{produits.opeMontant}" id="produits{produits.proId}prix" /> {sigleMonetaire}</td><td><div id="etat-commande-{produits.proId}" class="{produits.classEtat} ui-corner-all"></div></td></tr><!-- END produits --></tbody></table><div class="com-center"><button class="ui-state-default ui-corner-all com-button" id="btn-enregistrer">Enregistrer</button></div></div>';this.dialogExportBonDeLivraison='<div id="dialog-export-livraison" title="Export du bon de livraison du Marché n°{comNumero}"><form><table><tr><td>Format de sortie : </td><td><input type="radio" name="format" value="0" checked="checked" />Pdf</td><td><input type="radio" name="format" value="1" />CSV</td></tr></table></form></div>';this.bonDeLivraison='<div id="contenu"><div class="com-barre-menu-2"><button class="ui-state-default ui-corner-top com-button" id="btn-editer-com"><span class="com-float-left ui-icon ui-icon-arrowthick-1-w"></span>Retour au Marché</button></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Bon de Livraison du Marché n°{comNumero}<span class="com-cursor-pointer com-btn-header ui-widget-content ui-corner-all" id="btn-export-bcom" title="Exporter le bon de livraison"><span class="ui-icon ui-icon-print"></span></span></div><div><form><span>Producteur : <select id="select-prdt"><option value="0" >== Choisir un producteur ==</option><!-- BEGIN producteurs --><option value="{producteurs.prdtId}">{producteurs.prdtPrenom} {producteurs.prdtNom}</option><!-- END producteurs --></select></span></form></div><div id="liste-pdt"></div></div></div>';this.listeProduitLivraison='<div id="liste-pdt"><table class="com-table"><thead><tr><th>Produit</th><th>Réservation</th><th>Commande</th><th>Prix</th><th>Livraison</th><th>Prix</th><th>Solidaire</th><th>État</th></tr></thead><tbody><!-- BEGIN produits --><tr><td>{produits.nproNom}</td><td>{produits.stoQuantite} {produits.proUniteMesure}</td><td>{produits.stoQuantiteCommande} {produits.proUniteMesure}</td><td>{produits.opeMontantCommande} {sigleMonetaire}</td><td><span class="pro-id pro-id-etat ui-helper-hidden">{produits.proId}</span><input class="input-bon-livraison qte-commande com-numeric com-input-text ui-widget-content ui-corner-all" type="text" name="qte-commande-{produits.proId}" maxlength="11" value="{produits.stoQuantiteLivraison}" id="produits{produits.proId}quantite"/> {produits.proUniteMesure}</td><td><input class="input-bon-livraison prix-commande com-numeric com-input-text ui-widget-content ui-corner-all" type="text" name="prix-commande-{produits.proId}" maxlength="11" value="{produits.opeMontantLivraison}" id="produits{produits.proId}prix" /> {sigleMonetaire}</td><td><span class="pro-id-etat ui-helper-hidden">{produits.proId}</span><input class="qte-solidaire-commande input-bon-livraison com-numeric com-input-text ui-widget-content ui-corner-all" type="text" name="qte-solidaire-commande-{produits.proId}" maxlength="11" value="{produits.stoQuantiteSolidaire}" id="produits{produits.proId}quantiteSolidaire" /> {produits.proUniteMesure}</td><td><div id="etat-commande-{produits.proId}" class="{produits.classEtat} ui-corner-all"></div></td></tr><!-- END produits --></tbody><tfoot><tr><td colspan="2"></td><td>Total :</td><td>{totalCommande} {sigleMonetaire}</td><td></td><td><input class="input-bon-livraison com-numeric com-input-text ui-widget-content ui-corner-all" type="text" name="total" maxlength="11" value="{total}" id="total" /> {sigleMonetaire}</td><td><select name="typepaiement" id="typePaiement"><option value="0">== Choisir le paiement ==</option><!-- BEGIN typePaiement --><option value="{typePaiement.tppId}">{typePaiement.tppType}</option><!-- END typePaiement --></select></td></tr><tr id="tr-champ-complementaire"><td colspan="5"></td><td><span id="label-champ-complementaire" ></span></td><td><input type="text" name="champ-complementaire" value="{champComplementaire}" class="com-input-text ui-widget-content ui-corner-all" id="typePaiementChampComplementaire" maxlength="50" size="15"/></td></tr></tfoot></table><div class="com-center"><button class="ui-state-default ui-corner-all com-button" id="btn-enregistrer">Enregistrer</button></div></div>';this.infoCommandeArchive='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Détail du Marché n°{numero}</div><div><div class="com-center" id="resultat-marche-archive"><span class="ui-widget ui-widget-header com-table-th">Résultat Zeybu Marché : {total} {sigleMonetaire}</span>    <span class="ui-widget ui-widget-header com-table-th">Résultat Zeybu Solidaire : {totalSolidaire} {sigleMonetaire}</span></div><table class="com-table" id="info-marche-archive"><thead><tr><th></th><th class="com-table-th ui-widget ui-widget-header" colspan="5">Achat</th><th class="com-table-th ui-widget ui-widget-header" colspan="4">Vente</th></tr><tr class="ui-widget ui-widget-header"><th class="com-table-th">Produit</th><th class="com-table-th">Qté Commande</th><th class="com-table-th">Prix Commande</th><th class="com-table-th">Qté Livraison</th><th class="com-table-th">Prix Livraison</th><th class="com-table-th">Qté Solidaire</th><th class="com-table-th">Qté Vente</th><th class="com-table-th">Prix Vente</th><th class="com-table-th">Qté Solidaire</th><th class="com-table-th">Prix Solidaire</th></tr></thead><tbody><!-- BEGIN infoCommande --><tr><td class="com-table-td">{infoCommande.nproNom}</td><td class="com-table-td">{infoCommande.stoQuantite} {infoCommande.proUniteMesure}</td><td class="com-table-td">{infoCommande.opeMontant} {sigleMonetaire}</td><td class="com-table-td">{infoCommande.stoQuantiteLivraison} {infoCommande.proUniteMesure}</td><td class="com-table-td">{infoCommande.opeMontantLivraison} {sigleMonetaire}</td><td class="com-table-td">{infoCommande.stoQuantiteSolidaire} {infoCommande.proUniteMesure}</td><td class="com-table-td">{infoCommande.stoQuantiteVente} {infoCommande.proUniteMesure}</td><td class="com-table-td">{infoCommande.opeMontantVente} {sigleMonetaire}</td><td class="com-table-td">{infoCommande.stoQuantiteVenteSolidaire} {infoCommande.proUniteMesure}</td><td class="com-table-td">{infoCommande.opeMontantVenteSolidaire} {sigleMonetaire}</td></tr><!-- END infoCommande --></tbody></table></div></div></div>'}function CommunTemplate(){this.debutContenu='<div id="contenu">';this.finContenu="</div>"}function GestionCaisseTemplate(){this.etatCaisseDebut='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">État de la caisse</div><div class="com-center">La caisse est ';this.etatCaisseMilieu=' : <button class="ui-state-default ui-corner-all com-button com-center" id="btn-caisse">';this.etatCaisseFin="</button></div></div></div></div>";this.caisseOuverte="ouverte";this.caisseFermee="fermée";this.boutonOuverture="Ouvrir";this.boutonFermeture="Fermer"}function GestionAdherentsTemplate(){this.formulaireAjoutAdherent='<div id="contenu"><div id="formulaire_modifier_adherent_int"><form><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Information de l\'adhérent</div><div class="com-widget-content"><table class="com-table-form"><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Nom *</th><td class="com-table-form-td"><input type="hidden" name="{NAME_ID}" value="{VALUE_ID}" /><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="nom" value="{nom}" maxlength="50" id="nom"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Prénom *</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="prenom" value="{prenom}" maxlength="50" id="prenom"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Mot de Passe *</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="password" name="pass" maxlength="100" id="motPasse"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Resaisir le mot de Passe *</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="password" name="pass_confirm" maxlength="100" id="motPasseConfirm"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Date de Naissance (jj/mm/aaaa)</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="date_naissance" value="{dateNaissance}" maxlength="10" id="dateNaissance"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Date d\'adhésion (jj/mm/aaaa) *</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="date_adhesion" value="{dateAdhesion}" maxlength="10" id="dateAdhesion" /></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Lier un compte<input type="checkbox" name="lien_numero_compte" /></th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="numero_compte" value="{compte}" maxlength="5" disabled="disabled" id="compte"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Commentaire</th><td class="com-table-form-td"><textarea class="com-input-text ui-widget-content ui-corner-all" name="commentaire" id="commentaire">{commentaire}</textarea></td></tr></table></div></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Coordonnées de l\'adhérent</div><div class="com-widget-content"><table class="com-table-form"><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Courriel Principal</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="courriel_principal" value="{courrielPrincipal}" maxlength="100" id="courrielPrincipal"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Courriel Secondaire</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" ype="text" name="courriel_secondaire" value="{courrielSecondaire}" maxlength="100" id="courrielSecondaire"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Téléphone Principal</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="telephone_principal" value="{telephonePrincipal}" maxlength="20" id="telephonePrincipal"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Téléphone Secondaire</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="telephone_secondaire" value="{telephoneSecondaire}" maxlength="20" id="telephoneSecondaire"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Adresse</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="adresse" value="{adresse}" maxlength="300" id="adresse"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Code Postal</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="code_postal" value="{codePostal}" maxlength="10" id="codePostal"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Ville</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="ville" value="{ville}" maxlength="100" id="ville"/></td></tr></table></div></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all"> Autorisations</div><div class="com-widget-content"><table id="formulaire-modifier-adherent-table-autorisation" class="com-table-form"><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Modules autorisés</th><!-- BEGIN modules_default --><input type="hidden" name="modules_default[]" value="{modules_default.id}"/><!-- END modules_default --></tr><!-- BEGIN modules --><tr class="ui-widget-content" ><td class="com-table-form-td" ><input type="checkbox" name="modules[]" value="{modules.id}" {modules.checked}/>{modules.label}</td></tr><!-- END modules --><tr><td class="com-center com-ligne-submit"><input class="ui-state-default ui-corner-all com-button com-center" type="submit" value="Valider" /></td></tr></table></div></div></form></div></div>';this.ajoutAdherentSucces='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Nouvel Adhérent</div><div class="com-widget-content"><p class="com-msg-confirm-icon" ><span class="com-float-left ui-icon ui-icon-check"></span>L\'adhérent {numero} a été ajouté avec succès.</p></div></div></div>';this.modifierAdherentSucces='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Modification d\'Adhérent</div><div class="com-widget-content"><p class="com-msg-confirm-icon" ><span class="com-float-left ui-icon ui-icon-check"></span>L\'adhérent {numero} a été mis à jour avec succès.</p></div></div></div>';this.supprimerAdherentSucces='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Suppression d\'Adhérent</div><div class="com-widget-content"><p class="com-msg-confirm-icon" ><span class="com-float-left ui-icon ui-icon-check"></span>L\'adhérent {numero} a été supprimé avec succès.</p></div></div></div>';this.listeAdherent='<div id="contenu"><div id="liste_adherent_solde_int"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Les Adhérents</div><div id="liste-adh-recherche" class="recherche com-widget-header ui-widget ui-widget-header ui-corner-all"><form id="filter-form"><div><span class="conteneur-icon com-float-left ui-widget-content ui-corner-left" title="Chercher"><span class="ui-icon ui-icon-search"></span></span><input class="com-input-text ui-widget-content ui-corner-right" name="filter" id="filter" value="" maxlength="30" size="15" type="text" /></div></form></div><table class="com-table"><thead><tr class="ui-widget ui-widget-header"><th class="com-table-th com-underline-hover liste-adh-th-num com-cursor-pointer"><span class="ui-icon span-icon"></span>N°</th><th class="com-table-th com-underline-hover liste-adh-th-nom com-cursor-pointer"><span class="ui-icon span-icon"></span>Nom</th><th class="com-table-th com-underline-hover liste-adh-th-nom com-cursor-pointer"><span class="ui-icon span-icon"></span>Prénom</th><th class="com-table-th com-underline-hover com-cursor-pointer"><span class="ui-icon span-icon"></span>Courriel</th><th class="com-table-th liste-adh-th-solde">Solde</th></tr></thead><tbody><!-- BEGIN listeAdherent --><tr class="com-cursor-pointer compte-ligne" ><td class="com-table-td com-underline-hover"><span class="ui-helper-hidden id-adherent">{listeAdherent.adhId}</span>{listeAdherent.adhNumero}</td><td class="com-table-td com-underline-hover">{listeAdherent.adhNom}</td><td class="com-table-td com-underline-hover">{listeAdherent.adhPrenom}</td><td class="com-table-td com-underline-hover">{listeAdherent.adhCourrielPrincipal}</td><td class="com-table-td com-underline-hover liste-adh-td-solde"><span class="{listeAdherent.classSolde}">{listeAdherent.opeMontant} {sigleMonetaire}</span></td></tr><!-- END listeAdherent --></tbody></table></div></div></div></div>';this.listeAdherentVide='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Les Adhérents</div><p id="texte-liste-vide">Aucun adhérent dans la base.</p></div></div>';this.dialogSuppressionAdherent='<div id="dialog-supp-adh" title="Supprimer l\'adhérent {adhNumero}"><p class="ui-state-error ui-corner-all"><span class="ui-icon ui-icon-alert com-float-left"></span>ATTENTION : Voulez-vous réellement supprimer l\'adherent : {adhNumero}</p></div>';this.infoCompteAdherentDebut='<div id="info_compte_solde_adherent_ext"><div id="info_compte_solde_adherent_int"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Informations<span class="com-btn-header-multiples ui-widget-content ui-corner-all com-cursor-pointer" id="btn-supp" title="Supprimer"><span class="ui-icon ui-icon-trash"></span></span><span class="com-btn-header-multiples ui-widget-content ui-corner-all com-cursor-pointer" id="btn-edt" title="Modifier"><span class="ui-icon ui-icon-pencil"></span></span></div><div class="com-widget-content"><div>Numéro d\'adhérent : {adhNumero}</div><div>Numéro de Compte : {cptLabel}</div><div>Nom : {adhNom}</div><div>Prénom : {adhPrenom}</div><div>Date de naissance : {adhDateNaissance}</div><div>Date d\'adhésion : {adhDateAdhesion}</div><div>Commentaire : {adhCommentaire}</div></div></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Coordonnées</div><div class="com-widget-content"><div>Courriel Principal : {adhCourrielPrincipal}</div><div>Courriel Secondaire : {adhCourrielSecondaire}</div><div>Téléphone Principal : {adhTelephonePrincipal}</div><div>Téléphone Secondaire : {adhTelephoneSecondaire}</div><div>Adresse : {adhAdresse}</div><div>Ville : {adhVille}</div><div>Code Postal : {adhCodePostal}</div></div></div>';this.infoCompteAdherentAutorisation='<div id="info_compte_autorisations_int"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Autorisations</div><div class="com-widget-content"><!-- BEGIN modules --><div><span class="com-float-left ui-icon {modules.classAutorisation}"></span>{modules.label}</div><!-- END modules --></div></div></div>';this.infoCompteAdherentFin="</div></div>";this.listeOperationPassee='<div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Solde : <span id="solde">{opeMontant} {sigleMonetaire}</span></div>	<div><div id="content-nav-liste-operation" class="ui-helper-clearfix ui-state-default ui-corner-all"><form>	<span id="icone-nav-liste-operation-w" class="prev ui-helper-hidden ui-state-default ui-corner-all com-button" ><span class="ui-icon ui-icon-circle-arrow-w"></span></span>	<span id="page-compteur">Page : <span type="text" class="pagedisplay"></span></span>	<span id="icone-nav-liste-operation-e" class="next ui-state-default ui-corner-all com-button" ><span class="ui-icon ui-icon-circle-arrow-e"></span></span>	<input type="hidden" class="pagesize" value="10"></form></div><table id="table-operation" class="com-table"><thead><tr class="ui-widget ui-widget-header" ><th class="com-table-th">Date</th><th class="com-table-th">Libellé</th><th class="com-table-th">Type de paiement</th><th class="com-table-th">Débit</th><th class="com-table-th">Crédit</th></tr></thead><tbody><!-- BEGIN operationPassee --><tr><td class="com-table-td td-date ">{operationPassee.opeDate}</td><td class="com-table-td td-libelle">{operationPassee.opeLibelle}</td><td class="com-table-td td-type-paiement">{operationPassee.tppType}</td><td class="com-table-td td-montant">{operationPassee.debit}</td><td class="com-table-td td-montant">{operationPassee.credit}</td></tr><!-- END operationPassee --></tbody></table></div></div>';this.listeOperationAdherentDebut='<div id="liste_operation_adherent_ext"><div id="liste_operation_adherent_int">';this.listeOperationAdherentFin="</div></div>";this.listeOperationAvenir='<div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Achat(s) Futur(s)</div><div><table class="com-table"><tr class="ui-widget ui-widget-header" ><th class="com-table-th">Réservation</th><th class="com-table-th">Libellé</th><th class="com-table-th">Marché</th><th class="com-table-th">Prix</th><th class="com-table-th">Solde</th><th class="com-table-th">Recharger</th></tr><!-- BEGIN operationAvenir --><tr><td class="com-table-td td-date">{operationAvenir.opeDate}</td><td class="com-table-td td-libelle ">{operationAvenir.opeLibelle}</td><td class="com-table-td td-date">{operationAvenir.comDateMarche}</td><td class="com-table-td td-montant">{operationAvenir.opeMontant}  {sigleMonetaire}</td><td class="com-table-td td-montant"><span class="nouveau-solde"><span class="nouveau-solde-val">{operationAvenir.nouveauSolde}</span>  {sigleMonetaire}</span></td><td class="com-table-td td-montant">{operationAvenir.rechargement}  {sigleMonetaire}</td></tr><!-- END operationAvenir --></table></div></div>'}function RechargementCompteTemplate(){this.listeAdherent='<div id="contenu"><div id="liste_adherent_solde_int"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Les Adhérents</div><div id="liste-adh-recherche" class="recherche com-widget-header ui-widget ui-widget-header ui-corner-all"><form id="filter-form"><div><span class="conteneur-icon com-float-left ui-widget-content ui-corner-left" title="Chercher"><span class="ui-icon ui-icon-search"></span></span><input class="com-input-text ui-widget-content ui-corner-right" name="filter" id="filter" value="" maxlength="30" size="15" type="text" /></div></form></div><table class="com-table"><thead><tr class="ui-widget ui-widget-header"><th class="com-table-th com-underline-hover liste-adh-th-num com-cursor-pointer"><span class="ui-icon span-icon"></span>N°</th><th class="com-table-th com-underline-hover liste-adh-th-nom com-cursor-pointer"><span class="ui-icon span-icon"></span>Nom</th><th class="com-table-th com-underline-hover liste-adh-th-nom com-cursor-pointer"><span class="ui-icon span-icon"></span>Prénom</th><th class="com-table-th com-underline-hover com-cursor-pointer"><span class="ui-icon span-icon"></span>Courriel</th><th class="com-table-th liste-adh-th-solde">Solde</th></tr></thead><tbody><!-- BEGIN listeAdherent --><tr class="com-cursor-pointer compte-ligne" ><td class="com-table-td com-underline-hover"><span class="ui-helper-hidden id-adherent">{listeAdherent.adhId}</span>{listeAdherent.adhNumero}</td><td class="com-table-td com-underline-hover">{listeAdherent.adhNom}</td><td class="com-table-td com-underline-hover">{listeAdherent.adhPrenom}</td><td class="com-table-td com-underline-hover">{listeAdherent.adhCourrielPrincipal}</td><td class="com-table-td com-underline-hover liste-adh-td-solde"><span class="{listeAdherent.classSolde}">{listeAdherent.opeMontant} {sigleMonetaire}</span></td></tr><!-- END listeAdherent --></tbody></table></div></div></div></div>';this.listeAdherentVide='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Les Adhérents</div><p id="texte-liste-vide">Aucun adhérent dans la base.</p></div></div>';this.dialogRecharger='<div title="Rechargement du compte {compte}"><div><div id="resa-info-commande">{numero} :  {prenom} {nom}<br/>N° de Compte : {compte}</div><div><span>Solde Actuel : </span><span>{solde} {sigleMonetaire}</span><br/><span>Nouveau Solde : </span><span id="nouveau-solde">{solde}</span> <span id="nouveau-solde-sigle">{sigleMonetaire}</span></div></div><div class="com-widget-content"><table><thead><tr><th>Montant</th><th>Type de Paiement</th><th id="label-champ-complementaire"></th></tr></thead><tbody><tr><td><input type="text" name="montant-rechargement" value="" class="com-numeric com-input-text ui-widget-content ui-corner-all" id="montant" maxlength="12" size="3"/> <span>{sigleMonetaire}</span></td><td class="com-center"><select name="typepaiement" id="typePaiement"><option value="0">== Choisir ==</option><!-- BEGIN typePaiement --><option value="{typePaiement.tppId}">{typePaiement.tppType}</option><!-- END typePaiement --></select></td><td id="td-champ-complementaire"><input type="text" name="champ-complementaire" value="" class="com-input-text ui-widget-content ui-corner-all" id="champComplementaire" maxlength="50" size="15"/></td></tr></tbody></table></div></div>'}function IdentificationTemplate(){this.connexion='<div id="formulaire_identification_int" title="Connexion à Zeybux" ><form id="identification-form" action="./index.php" method="post"><table><tr><td>Login</td><td><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="login" id="login"/></td></tr><tr><td>Mot de Passe</td><td><input class="com-input-text ui-widget-content ui-corner-all" type="password" name="pass" id="pass"/></td></tr></table></form></div>';this.debutMenu='<div id="menu_int" ><ul id="menu_liste" >';this.finMenu="</ul></div>";this.deconnexion='<span id="lien-deconnexion" class="ui-widget-header ui-corner-bl"><a href="./index.php?m=Identification&amp;v=Deconnexion" ><span class="com-float-left ui-icon ui-icon-power"></span>Déconnexion</a></span>';this.administration='<span id="lien-administration" class="btn-menu com-cursor-pointer ui-widget-header ui-corner-tl"><span class="com-float-left ui-icon ui-icon-gear"></span>Administration</span>';this.module='<!-- BEGIN modules --><li><a class="ui-widget-header {modules.CLASS}" id="menu-{modules.MODULE_NOM}-{modules.NOM}" href="./index.php?m={modules.MODULE_NOM}&amp;v={modules.NOM}">{modules.MODULE_LABEL}</a><ul class="sous_menu ui-widget-content ui-corner-bottom"><!-- BEGIN vues --><li class="ui-corner-all"><a id="menu-{modules.MODULE_NOM}-{modules.vues.NOM}" href="./index.php?m={modules.MODULE_NOM}&amp;v={modules.vues.NOM}">{modules.vues.LABEL}</a></li><br/><!-- END vues --></ul></li><!-- END modules -->';this.nouveauModule='<!-- BEGIN modules --><li><span class="com-cursor-pointer ui-widget-header menu-lien btn-menu" id="menu-{modules.moduleNom}-{modules.nom}">{modules.label}</span></li><!-- END modules -->';this.admin='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Administration</div><div><ul><!-- BEGIN modules --><li><span id="menu-{modules.moduleNom}-{modules.nom}" >{modules.label}</span><ul><!-- BEGIN vues --><li><a id="menu-{modules.moduleNom}-{modules.vues.nom}" href="./index.php?m={modules.moduleNom}&amp;v={modules.vues.nom}">{modules.vues.label}</a></li><br/><!-- END vues --></ul></li><!-- END modules --></ul></div></div></div>';this.naviguateurIncompatible='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header com-center ui-corner-all">Naviguateur Incompatible</div><div>Votre naviguateur n\'est pas compatible avec zeybux.<br/>Vous pouvez utiliser l\'un des naviguateur suivants pour profiter du site : <br/><div id="liste-naviguateur" class="com-center"><div id="naviguateur-1" class="com-float-left"><a href="http://www.mozilla.com/fr/firefox/"><img alt="Mozilla Firefox" src="./images/firefox-logo.png"/><br/>Mozilla Firefox</a></div><div><a href="http://www.google.com/chrome/"><img alt="Google Chrome" src="./images/chrome-logo.png"/><br/>Google Chrome</a></div></div></div></div></div>';this.formulaireIdentification='<div id="contenu"><div id="formulaire_identification_int" class="ui-widget ui-widget-content ui-corner-all" ><div id="titre_fenetre" class="ui-widget ui-widget-header ui-corner-all">Connexion à Zeybux</div><form id="identification-form" action="./index.php" method="post"><table><tr><td>Login</td><td><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="login" id="login" /></td></tr><tr><td>Mot de Passe</td><td><input class="com-input-text ui-widget-content ui-corner-all" type="password" name="pass" id="pass" /></td></tr><tr><td colspan="2" class="com-center com-ligne-submit" ><input class="ui-state-default ui-corner-all com-button com-center" type="submit" value="Connexion"/></td></tr></table></form></div></div>'}function MonCompteTemplate(){this.infoCompteAdherent='<div id="info_compte_solde_adherent_ext"><div id="info_compte_solde_adherent_int"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Informations<span class="com-cursor-pointer com-btn-header ui-widget-content ui-corner-all" id="btn-edt-info" title="Changer le mot de passe"><span class="ui-icon ui-icon-pencil"></span></div><div class="com-widget-content"><div>Numéro d\'adhérent : {adhNumero}</div><div>Numéro de Compte : {cptLabel}</div><div>Nom : {adhNom}</div><div>Prénom : {adhPrenom}</div><div>Date de naissance : {adhDateNaissance}</div><div>Date d\'adhésion : {adhDateAdhesion}</div><div>Commentaire : {adhCommentaire}</div></div></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Coordonnées</div><div class="com-widget-content"><div>Courriel Principal : {adhCourrielPrincipal}</div><div>Courriel Secondaire : {adhCourrielSecondaire}</div><div>Téléphone Principal : {adhTelephonePrincipal}</div><div>Téléphone Secondaire : {adhTelephoneSecondaire}</div><div>Adresse : {adhAdresse}</div><div>Ville : {adhVille}</div><div>Code Postal : {adhCodePostal}</div></div></div></div></div>';this.dialogEditionCompte='<div id="dialog-edt-info-cpt" title="Modifier mon mot de passe"><form><table><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Ancien mot de Passe *</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="password" name="pass" maxlength="100" id="motPasse"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Nouveau mot de Passe *</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="password" name="pass_nouveau" maxlength="100" id="motPasseNouveau"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Resaisir le mot de Passe *</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="password" name="pass_confirm" maxlength="100" id="motPasseConfirm"/></td></tr></table></form></div>';this.listeOperationPassee='<div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Solde : <span id="solde">{opeMontant} {sigleMonetaire}</span></div>	<div><div id="content-nav-liste-operation" class="ui-helper-clearfix ui-state-default ui-corner-all"><form>	<span id="icone-nav-liste-operation-w" class="prev ui-helper-hidden ui-state-default ui-corner-all com-button" ><span class="ui-icon ui-icon-circle-arrow-w"></span></span>	<span id="page-compteur">Page : <span type="text" class="pagedisplay"></span></span>	<span id="icone-nav-liste-operation-e" class="next ui-state-default ui-corner-all com-button" ><span class="ui-icon ui-icon-circle-arrow-e"></span></span>	<input type="hidden" class="pagesize" value="10"></form></div><table id="table-operation" class="com-table"><thead><tr class="ui-widget ui-widget-header" ><th class="com-table-th">Date</th><th class="com-table-th">Libellé</th><th class="com-table-th">Type de paiement</th><th class="com-table-th">Débit</th><th class="com-table-th">Crédit</th></tr></thead><tbody><!-- BEGIN operationPassee --><tr><td class="com-table-td td-date ">{operationPassee.opeDate}</td><td class="com-table-td td-libelle">{operationPassee.opeLibelle}</td><td class="com-table-td td-type-paiement">{operationPassee.tppType}</td><td class="com-table-td td-montant">{operationPassee.debit}</td><td class="com-table-td td-montant">{operationPassee.credit}</td></tr><!-- END operationPassee --></tbody></table></div></div>';this.listeOperationAdherentDebut='<div id="liste_operation_adherent_ext"><div id="liste_operation_adherent_int">';this.listeOperationAdherentFin="</div></div>";this.listeOperationAvenir='<div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Achat(s) Futur(s)</div><div><table class="com-table"><tr class="ui-widget ui-widget-header" ><th class="com-table-th">Réservation</th><th class="com-table-th">Libellé</th><th class="com-table-th">Marché</th><th class="com-table-th">Prix</th><th class="com-table-th">Solde</th><th class="com-table-th">Recharger</th></tr><!-- BEGIN operationAvenir --><tr><td class="com-table-td td-date">{operationAvenir.opeDate}</td><td class="com-table-td td-libelle ">{operationAvenir.opeLibelle}</td><td class="com-table-td td-date">{operationAvenir.comDateMarche}</td><td class="com-table-td td-montant">{operationAvenir.opeMontant}  {sigleMonetaire}</td><td class="com-table-td td-montant"><span class="nouveau-solde"><span class="nouveau-solde-val">{operationAvenir.nouveauSolde}</span>  {sigleMonetaire}</span></td><td class="com-table-td td-montant">{operationAvenir.rechargement}  {sigleMonetaire}</td></tr><!-- END operationAvenir --></table></div></div>'}function CompteZeybuTemplate(){this.InfoCompte='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Le Compte du Zeybu</div><table id="table-info-solde-zeybu"><thead><tr class="ui-widget ui-widget-header"><th id="td-solde-zeybu-total" class="com-table-th">Solde Total : {soldeTotal} {sigleMonetaire}</th><th id="td-solde-zeybu-caisse" class="com-table-th">Montant en Caisse : {soldeCaisse} {sigleMonetaire}</th><th id="td-solde-zeybu-banque" class="com-table-th">Montant en Banque : {soldeBanque} {sigleMonetaire}</th></tr></thead></table><div><div id="content-nav-liste-operation" class="ui-helper-clearfix ui-state-default ui-corner-all"><form>	<span id="icone-nav-liste-operation-w" class="prev ui-helper-hidden ui-state-default ui-corner-all com-button" ><span class="ui-icon ui-icon-circle-arrow-w"></span></span>	<span id="page-compteur">Page : <span type="text" class="pagedisplay"></span></span>	<span id="icone-nav-liste-operation-e" class="next ui-state-default ui-corner-all com-button" ><span class="ui-icon ui-icon-circle-arrow-e"></span></span>	<input type="hidden" class="pagesize" value="30"></form></div><table id="table-operation" class="com-table"><thead><tr class="ui-widget ui-widget-header" ><th class="com-table-th">Date</th><th class="com-table-th">Compte</th><th class="com-table-th">Libellé</th><th class="com-table-th">Type de paiement</th><th class="com-table-th">Débit</th><th class="com-table-th">Crédit</th></tr></thead><tbody><!-- BEGIN operation --><tr><td class="com-table-td td-date ">{operation.opeDate}</td><td class="com-table-td td-date ">{operation.cptLabel}</td><td class="com-table-td td-libelle">{operation.opeLibelle}</td><td class="com-table-td td-type-paiement">{operation.tppType}</td><td class="com-table-td td-montant">{operation.debit}</td><td class="com-table-td td-montant">{operation.credit}</td></tr><!-- END operation --></tbody></table></div></div></div>'}function CommandeTemplate(){this.detailReservation='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Marché n°{comNumero}</div><div>Fin des réservations : Le {dateFinReservation} à {heureFinReservation}H{minuteFinReservation} <br/>Marché : Le {dateMarcheDebut} de {heureMarcheDebut}H{minuteMarcheDebut} à {heureMarcheFin}H{minuteMarcheFin} <br/><span>Solde Actuel : </span><span>{solde} {sigleMonetaire}</span> <span>Nouveau Solde : </span><span id="nouveau-solde">{soldeNv}</span> <span id="nouveau-solde-sigle">{sigleMonetaire}</span></div></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Ma Commande</div><table><!-- BEGIN reservation --><tr ><td class="detail-resa-npro">{reservation.nproNom}</td><td class="com-text-align-right detail-resa-qte">{reservation.stoQuantite}</td><td class="detail-resa-unite">{reservation.proUniteMesure}</td><td class="com-text-align-right detail-resa-prix">{reservation.prix}</td><td>{sigleMonetaire}</td></tr><!-- END reservation --><tr><td class="com-text-align-right" colspan="3">Total : </td><td class="com-text-align-right">{total}</td><td>{sigleMonetaire}</td></tr></table></div><div class="boutons-edition com-widget-header ui-widget ui-widget-header ui-corner-all com-center"><button class="com-btn-edt-multiples ui-state-default ui-corner-all com-button com-center " id="btn-modifier">Modifier</button><button class="ui-state-default ui-corner-all com-button com-center" id="btn-valider">Valider</button></div></div>';this.mesCommandesDetailReservation='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Marché n°{comNumero}</div><div>Fin des réservations : Le {dateFinReservation} à {heureFinReservation}H{minuteFinReservation} <br/>Marché : Le {dateMarcheDebut} de {heureMarcheDebut}H{minuteMarcheDebut} à {heureMarcheFin}H{minuteMarcheFin}</div></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Ma réservation</div><table><!-- BEGIN reservation --><tr ><td class="detail-resa-npro">{reservation.nproNom}</td><td class="com-text-align-right detail-resa-qte">{reservation.stoQuantite}</td><td class="detail-resa-unite">{reservation.proUniteMesure}</td><td class="com-text-align-right detail-resa-prix">{reservation.prix}</td><td>{sigleMonetaire}</td></tr><!-- END reservation --><tr><td class="com-text-align-right" colspan="3">Total : </td><td class="com-text-align-right">{total}</td><td>{sigleMonetaire}</td></tr></table></div><div class="boutons-edition com-widget-header ui-widget ui-widget-header ui-corner-all com-center"><button class="com-btn-edt-multiples ui-state-default ui-corner-all com-button com-center" id="btn-modifier">Modifier</button><button class="ui-state-default ui-corner-all com-button com-center" id="btn-supprimer">Supprimer</button></div></div>';this.supprimerReservationDialog='<div id="dialog-supprimer-reservation" title="Supprimer la réservation"><p>Voulez-vous supprimer la réservation ?</p></div>';this.reservation='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Marché n°{comNumero}</div><div id="resa-info-commande">Fin des réservations : Le {dateFinReservation} à {heureFinReservation}H{minuteFinReservation} <br/>Marché : Le {dateMarcheDebut} de {heureMarcheDebut}H{minuteMarcheDebut} à {heureMarcheFin}H{minuteMarcheFin} <br/></div><div><span>Solde Actuel : </span><span>{solde} {sigleMonetaire}</span><br/><span>Nouveau Solde : </span><span id="nouveau-solde">{soldeNv}</span> <span id="nouveau-solde-sigle">{sigleMonetaire}</span></div></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Ma Commande</div><div><table><!-- BEGIN produit --><tr class="pdt"><td><input type="checkbox" {produit.checked}/></td><td><span class="ui-helper-hidden"><span class="pdt-id">{produit.proId}</span></span></td><td>{produit.nproNom}</td><td><select id="lot-{produit.proId}"><!-- BEGIN produit.lot --><option value="{produit.lot.dcomId}">par {produit.lot.dcomTaille} {produit.proUniteMesure}</option><!-- END produit.lot --></select></td><td>à <span id="prix-unitaire-{produit.proId}">{produit.prixUnitaire}</span> {sigleMonetaire}/{produit.proUniteMesure}</td><td class="ui-helper-hidden resa-pdt-{produit.proId}"><button class="btn-moins">-</button></td><td class="ui-helper-hidden resa-pdt-{produit.proId}"><span id="qte-pdt-{produit.proId}"></span> {produit.proUniteMesure}</td><td class="ui-helper-hidden resa-pdt-{produit.proId}"><button class="btn-plus">+</button></td><td class="ui-helper-hidden resa-pdt-{produit.proId} com-text-align-right"><span id="prix-pdt-{produit.proId}"></span> {sigleMonetaire}</td></tr><!-- END produit --><tr><td colspan="8" class="com-text-align-right">Total : </td><td class="com-text-align-right detail-resa-prix"><span id="total">{total}</span></td><td>{sigleMonetaire}</td></tr></table></div></div><div class="com-widget-header ui-widget ui-widget-header ui-corner-all com-center"><button class="ui-state-default ui-corner-all com-button com-center" id="btn-valider">Valider</button></div></div>';this.lotUnique='<input type="hidden" id="lot-{IdPdt}" value="{valeur}" /><span>{text}</span>';this.modifierReservation='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Marché n°{comNumero}</div><div>Fin des réservations : Le {dateFinReservation} à {heureFinReservation}H{minuteFinReservation} <br/>Marché : Le {dateMarcheDebut} de {heureMarcheDebut}H{minuteMarcheDebut} à {heureMarcheFin}H{minuteMarcheFin}</div></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Ma réservation</div><div><table><!-- BEGIN produit --><tr class="pdt"><td><input type="checkbox" {produit.checked}/></td><td><span class="ui-helper-hidden"><span class="pdt-id">{produit.proId}</span></span></td><td>{produit.nproNom}</td><td><select id="lot-{produit.proId}"><!-- BEGIN produit.lot --><option value="{produit.lot.dcomId}">par {produit.lot.dcomTaille} {produit.proUniteMesure}</option><!-- END produit.lot --></select></td><td>à <span id="prix-unitaire-{produit.proId}">{produit.prixUnitaire}</span> {sigleMonetaire}/{produit.proUniteMesure}</td><td class="ui-helper-hidden resa-pdt-{produit.proId}"><button class="btn-moins">-</button></td><td class="ui-helper-hidden resa-pdt-{produit.proId}"><span id="qte-pdt-{produit.proId}"></span> {produit.proUniteMesure}</td><td class="ui-helper-hidden resa-pdt-{produit.proId}"><button class="btn-plus">+</button></td><td class="ui-helper-hidden resa-pdt-{produit.proId} com-text-align-right"><span id="prix-pdt-{produit.proId}"></span> {sigleMonetaire}</td></tr><!-- END produit --><tr><td colspan="8" class="com-text-align-right">Total : </td><td class="com-text-align-right detail-resa-prix"><span id="total">{total}</span></td><td>{sigleMonetaire}</td></tr></table></div></div><div class="com-widget-header ui-widget ui-widget-header ui-corner-all com-center"><button class="com-btn-edt-multiples ui-state-default ui-corner-all com-button com-center" id="btn-annuler">Annuler</button><button class="ui-state-default ui-corner-all com-button com-center" id="btn-valider">Valider</button></div></div>';this.listeCommandePage='<div id="contenu"><div id="liste_commande_int"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Les Marchés en cours</div><table class="com-table"><tr class="ui-widget ui-widget-header"><th class="com-table-th lst-resa-th-num">N°</th><th class="com-table-th">Date de cloture des Réservations</th><th class="com-table-th">Marché</th>	<th class="com-table-th"></th></tr><!-- BEGIN commande --><tr ><td class="com-table-td com-text-align-right">{commande.numero}</td><td class="com-table-td">Le {commande.dateFinReservation} à {commande.heureFinReservation}H{commande.minuteFinReservation}</td><td class="com-table-td">Le {commande.dateMarcheDebut} de {commande.heureMarcheDebut}H{commande.minuteMarcheDebut} à {commande.heureMarcheFin}H{commande.minuteMarcheFin}</td><td class="com-table-td lst-resa-btn-commander"><button class="btn-commander ui-state-default ui-corner-all com-button com-center" id="{commande.id}">Commander</button></td></tr><!-- END commande --></table></div></div></div></div>';this.confirmationReservationCommande='<div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><table><!-- BEGIN produit --><tr><td>{produit.NOM}</td><td>{produit.QUANTITE}</td><td>{produit.PRIX}</td></tr><!-- END produit --><tr><td></td><td>Total : </td><td>{TOTAL_COMMANDE}</td></tr></table><div class="ui-helper-hidden"><form id="form-confirmation-reservation-commande"><table><tr><td><input type="text" name="id_commande" value="{ID_COMMANDE}" /></td></tr><!-- BEGIN info_produit --><tr><td><input type="text" name="id_pdt[]" value="{info_produit.IDPDT}" /></td><td><input type="text" name="id_lot[]" value="{info_produit.IDLOT}" /></td><td><input type="text" name="qte[]" value="{info_produit.QTE}" /></td></tr><!-- END info_produit --></table></form></div></div>';this.reservationOk='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Réservation</div><div class="com-widget-content"><p class="com-msg-confirm-icon"><span class="com-float-left ui-icon ui-icon-check"></span>Réservation effectuée avec succés.</p></div></div></div>';this.listeCommandeVide='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Les Marchés</div><p id="texte-liste-vide">Aucun Marché en cours.</p></div></div>';this.listeReservation='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Mes Réservations</div><table class="com-table"><tr class="ui-widget ui-widget-header"><th class="com-table-th lst-resa-th-num">N°</th><th class="com-table-th">Date de cloture des Réservations</th><th class="com-table-th">Marché</th>	</tr><!-- BEGIN reservation --><tr class="com-cursor-pointer visualiser-reservation" id={reservation.idCommande} ><td class="com-table-td com-underline-hover com-text-align-right">{reservation.numero}</td><td class="com-table-td com-underline-hover">Le {reservation.dateFinReservation} à {reservation.heureFinReservation}H{reservation.minuteFinReservation}</td><td class="com-table-td com-underline-hover">Le {reservation.dateMarcheDebut} de {reservation.heureMarcheDebut}H{reservation.minuteMarcheDebut} à {reservation.heureMarcheFin}H{reservation.minuteMarcheFin}</td></tr><!-- END reservation --></table></div><div class="ui-helper-hidden com-widget-header ui-widget ui-widget-header ui-corner-all com-center"><button class="ui-state-default ui-corner-all com-button com-center">Anciennes commandes</button></div></div>';this.listeReservationVide='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Mes Réservations</div><p id="texte-liste-vide">Aucune réservation en cours.</p></div><div class="ui-helper-hidden com-widget-header ui-widget ui-widget-header ui-corner-all com-center"><button class="ui-state-default ui-corner-all com-button com-center">Anciennes commandes</button></div></div>'}const gTempsTransition=150;const gTempsTransitionUnique=gTempsTransition*2;const gTempsTransitionMsgInfo=gTempsTransition*10;const gSigleMonetaire="€";const gTextEdition="Editer";const gTextValider="Valider";var TemplateData=new TemplateData();var Infobulle=new Infobulles();var gCommunVue=new CommunVue();$(document).ready(function(){$("#widget_message_information").click(function(){$(this).delay(gTempsTransition).fadeOut(gTempsTransitionUnique)});$("#loading").ajaxStart(function(){$(this).fadeIn(gTempsTransition)});$("#loading").ajaxStop(function(){$(this).fadeOut(gTempsTransition)});AccueilVue()});function RechargerCompteVue(a){this.mCommunVue=new CommunVue();this.mTypePaiement=[];this.solde=0;this.construct=function(b){var c=this;var d={fonction:"listeAdherent"};$.post("./index.php?m=RechargementCompte&v=RechargerCompte","pParam="+$.toJSON(d),function(e){Infobulle.init();if(e.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}$(e.typePaiement).each(function(){c.mTypePaiement[this.tppId]=this});c.afficher(e)}else{Infobulle.generer(e,"")}},"json")};this.afficher=function(d){var c=this;var b=new RechargementCompteTemplate();if(d.listeAdherent.length>0&&d.listeAdherent[0].adhId!=null){var e=b.listeAdherent;d.sigleMonetaire=gSigleMonetaire;$(d.listeAdherent).each(function(){this.classSolde="";if(this.opeMontant<0){this.classSolde="com-nombre-negatif"}this.opeMontant=this.opeMontant.nombreFormate(2,","," ")});$("#contenu").replaceWith(c.affect($(e.template(d))))}else{$("#contenu").replaceWith(b.listeAdherentVide)}};this.affect=function(b){b=this.affectTri(b);b=this.affectRecherche(b);b=this.affectLienCompte(b);return b};this.affectTri=function(b){b.find(".com-table").tablesorter({sortList:[[0,0]],headers:{4:{sorter:false}}});return b};this.affectRecherche=function(b){b.find("#filter").keyup(function(){$.uiTableFilter($(".com-table"),this.value)});b.find("#filter-form").submit(function(){return false});return b};this.affectLienCompte=function(b){var c=this;b.find(".compte-ligne").click(function(){var d={"id-adherent":$(this).find(".id-adherent").text(),fonction:"infoRechargement"};$.post("./index.php?m=RechargementCompte&v=RechargerCompte","pParam="+$.toJSON(d),function(g){Infobulle.init();if(g.valid){c.solde=parseFloat(g.solde);g.sigleMonetaire=gSigleMonetaire;g.solde=g.solde.nombreFormate(2,","," ");g.typePaiement=c.mTypePaiement;var h=g.idCompte;var f=new RechargementCompteTemplate();var j=f.dialogRecharger;var e=$(j.template(g));e=c.affectDialog(e);e.dialog({autoOpen:true,modal:true,draggable:false,resizable:false,width:800,buttons:{Valider:function(){var k=c.getRechargementVO();k.id=h;var l=new RechargementCompteValid();var n=l.validAjout(k);Infobulle.init();if(n.valid){k.fonction="rechargerCompte";var m=this;$.post("./index.php?m=RechargementCompte&v=RechargerCompte","pParam="+$.toJSON(k),function(p){Infobulle.init();if(p.valid){var q=new TemplateVR();q.valid=false;q.log.valid=false;var o=new VRerreur();o.code=ERR_306_CODE;o.message=ERR_306_MSG;q.log.erreurs.push(o);c.construct();$(m).dialog("close")}else{Infobulle.generer(p,"")}},"json")}else{Infobulle.generer(n,"")}},Annuler:function(){$(this).dialog("close")}},close:function(k,l){$(this).remove()}});c.changerTypePaiement($(":input[name=typepaiement]"));c.majNouveauSolde()}else{Infobulle.generer(g,"")}},"json")});return b};this.affectDialog=function(b){b=this.affectSelectTypePaiement(b);b=this.affectNouveauSolde(b);b=this.mCommunVue.comNumeric(b);return b};this.affectSelectTypePaiement=function(b){var c=this;b.find(":input[name=typepaiement]").change(function(){c.changerTypePaiement($(this))});return b};this.changerTypePaiement=function(d){var c=d.val();var b=this.getLabelChamComplementaire(c);if(b!=null){$("#label-champ-complementaire").text(b).show();$("#td-champ-complementaire").show()}else{$("#label-champ-complementaire").text("").hide();$(":input[name=champ-complementaire]").val("");$("#td-champ-complementaire").hide()}};this.getLabelChamComplementaire=function(c){var b=this.mTypePaiement;if(b[c]){if(b[c].tppChampComplementaire==1){return b[c].tppLabelChampComplementaire}}return null};this.affectNouveauSolde=function(b){var c=this;b.find(":input[name=montant-rechargement]").keyup(function(){c.majNouveauSolde()});return b};this.majNouveauSolde=function(){var b=this.calculNouveauSolde();if(b<=0){$("#nouveau-solde").addClass("com-nombre-negatif");$("#nouveau-solde-sigle").addClass("com-nombre-negatif")}else{$("#nouveau-solde").removeClass("com-nombre-negatif");$("#nouveau-solde-sigle").removeClass("com-nombre-negatif")}$("#nouveau-solde").text(b.nombreFormate(2,","," "))};this.calculNouveauSolde=function(){var b=parseFloat($(":input[name=montant-rechargement]").val().numberFrToDb());if(isNaN(b)){b=0}return this.solde+b};this.getRechargementVO=function(){var b=new RechargementCompteVO();var c=$(":input[name=montant-rechargement]").val().numberFrToDb();if(!isNaN(c)&&!c.isEmpty()){c=parseFloat(c)}b.montant=c;b.typePaiement=$(":input[name=typepaiement]").val();if(this.getLabelChamComplementaire(b.typePaiement)!=null){b.champComplementaireObligatoire=1;b.champComplementaire=$(":input[name=champ-complementaire]").val()}else{b.champComplementaireObligatoire=0}return b};this.construct(a)}function CommunVue(){this.comDelete=function(a){a.find(".com-delete").click(function(){$(this).parent().parent().remove()});return a};this.comNumeric=function(a){if($(a).length!=0){a.find(".com-numeric").numeric(",")}else{$("body").find(".com-numeric").numeric(",")}return a};this.comLienDatepicker=function(d,a,b){$.datepicker.setDefaults($.datepicker.regional.fr);var c=b.find("#"+d+",#"+a).datepicker({changeMonth:true,changeYear:true,onSelect:function(g){var h=this.id==d?"minDate":"maxDate";var e=$(this).data("datepicker");var f=$.datepicker.parseDate(e.settings.dateFormat||$.datepicker._defaults.dateFormat,g,e.settings);c.not(this).datepicker("option",h,f)}});return b};this.comDatepicker=function(b,a){$.datepicker.setDefaults($.datepicker.regional.fr);a.find("#"+b).datepicker({changeMonth:true,changeYear:true});return a};this.majMenu=function(a,b){var c="#menu-"+a+"-"+b;if(a=="administration"){c="#lien-administration"}$(".btn-menu").removeClass("ui-state-active");$(c).addClass("ui-state-active")};this.comHoverBtn=function(a){a.find(".com-button:not(.ui-state-disabled),.com-btn-header:not(.ui-state-disabled),.com-btn-header-multiples:not(.ui-state-disabled)").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}).mousedown(function(){$(this).addClass("ui-state-active")}).mouseup(function(){$(this).removeClass("ui-state-active")});return a}}function ListeProducteurVue(a){this.construct=function(b){var c=this;$.post("./index.php?m=GestionProducteur&v=ListeProducteur",function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.afficher(d)}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(d){var c=this;var b=new GestionProducteurTemplate();if(d.listeProducteur.length>0&&d.listeProducteur[0].prdtId!=null){var e=b.listeProducteur;$("#contenu").replaceWith(c.affect($(e.template(d))))}else{$("#contenu").replaceWith(b.listeProducteurVide)}};this.affect=function(b){b=this.affectTri(b);b=this.affectRecherche(b);b=this.affectLienCompte(b);return b};this.affectTri=function(b){b.find(".com-table").tablesorter({sortList:[[0,0]]});return b};this.affectRecherche=function(b){b.find("#filter").keyup(function(){$.uiTableFilter($(".com-table"),this.value)});b.find("#filter-form").submit(function(){return false});return b};this.affectLienCompte=function(b){var c=this;b.find(".compte-ligne").click(function(){CompteProducteurVue({id_producteur:$(this).find(".id-producteur").text()})});return b};this.construct(a)}function CompteProducteurVue(a){this.mIdProducteur=null;this.mPrdtNumero=null;this.construct=function(b){var c=this;$.post("./index.php?m=GestionProducteur&v=CompteProducteur","pParam="+$.toJSON(b),function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.afficher(d)}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(e){var d=this;this.mIdProducteur=e.producteur.prdtId;this.mPrdtNumero=e.producteur.prdtNumero;e.producteur.prdtDateNaissance=e.producteur.prdtDateNaissance.extractDbDate().dateDbToFr();$(e.operationPassee).each(function(){this.opeDate=this.opeDate.extractDbDate().dateDbToFr();if(this.tppType==null){this.tppType=""}if(this.opeMontant<0){this.credit=(this.opeMontant*-1).nombreFormate(2,","," ")+" "+gSigleMonetaire;this.debit=""}else{this.credit="";this.debit=this.opeMontant.nombreFormate(2,","," ")+" "+gSigleMonetaire}});var c=new GestionProducteurTemplate();var f=new CommunTemplate();var b=f.debutContenu;b+=c.infoCompteProducteur.template(e.producteur);b+=c.listeOperationProducteur.template(e);b+=f.finContenu;b=$(b);if(e.operationPassee.length<11){b=this.masquerPagination(b)}else{b=this.paginnation(b)}$("#contenu").replaceWith(d.affect(b))};this.affect=function(b){b=this.affectHover(b);b=this.affectLienModifier(b);b=this.affectDialogSuppProducteur(b);b=gCommunVue.comHoverBtn(b);return b};this.paginnation=function(b){b.find("#table-operation").tablesorter({headers:{0:{sorter:false},1:{sorter:false},2:{sorter:false},3:{sorter:false},4:{sorter:false}}}).tablesorterPager({container:b.find("#content-nav-liste-operation"),positionFixed:false});return b};this.masquerPagination=function(b){b.find("#content-nav-liste-operation").hide();return b};this.affectHover=function(b){b.find("#icone-nav-liste-operation-w,#icone-nav-liste-operation-e").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")});return b};this.affectLienModifier=function(b){var c=this;b.find("#btn-edt").click(function(){ModificationProducteurVue({id_producteur:c.mIdProducteur})});return b};this.affectDialogSuppProducteur=function(b){var c=this;b.find("#btn-supp").click(function(){var d=new GestionProducteurTemplate();var e=d.dialogSuppressionProducteur;$(e.template({prdtNumero:c.mPrdtNumero})).dialog({autoOpen:true,modal:true,draggable:false,resizable:false,width:600,buttons:{Supprimer:function(){var f={id_producteur:c.mIdProducteur};var g=this;$.post("./index.php?m=GestionProducteur&v=SuppressionProducteur","pParam="+$.toJSON(f),function(j){Infobulle.init();if(j.valid){var h=new GestionProducteurTemplate();var k=h.supprimerProducteurSucces;$("#contenu").replaceWith(k.template(j));$(g).dialog("close")}else{Infobulle.generer(j,"")}},"json")},Annuler:function(){$(this).dialog("close")}},close:function(f,g){$(this).remove()}})});return b};this.construct(a)}function ModificationProducteurVue(a){this.mCommunVue=new CommunVue();this.mIdProducteur=null;this.construct=function(b){var c=this;$.post("./index.php?m=GestionProducteur&v=ModificationProducteur","pParam="+$.toJSON(b),function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.mIdProducteur=b.id_producteur;c.afficher(d)}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(e){var d=this;e.dateNaissance=e.dateNaissance.extractDbDate().dateDbToFr();var c=new GestionProducteurTemplate();var f=c.formulaireAjoutProducteur;var b=f.template(e);$("#contenu").replaceWith(d.affect($(f.template(e))))};this.affect=function(b){b=this.boutonLienCompte(b);b=this.mCommunVue.comNumeric(b);b=this.affectControleDatepicker(b);b=this.affectSubmit(b);b=this.mCommunVue.comHoverBtn(b);return b};this.boutonLienCompte=function(b){b.find(":input[name=lien_numero_compte]").click(function(){if(b.find(":input[name=numero_compte]").attr("disabled")){b.find(":input[name=numero_compte]").removeAttr("disabled")}else{b.find(":input[name=numero_compte]").attr("disabled","disabled")}});return b};this.affectControleDatepicker=function(b){b=this.mCommunVue.comDatepicker("dateNaissance",b);return b};this.affectSubmit=function(b){var c=this;b.find("form").submit(function(){c.modifProducteur();return false});return b};this.modifProducteur=function(){var b=new ProducteurVO();b.id=this.mIdProducteur;b.nom=$(":input[name=nom]").val();b.prenom=$(":input[name=prenom]").val();b.dateNaissance=$(":input[name=date_naissance]").val().dateFrToDb();b.compte=$(":input[name=numero_compte]").val();b.commentaire=$(":input[name=commentaire]").val();b.courrielPrincipal=$(":input[name=courriel_principal]").val();b.courrielSecondaire=$(":input[name=courriel_secondaire]").val();b.telephonePrincipal=$(":input[name=telephone_principal]").val();b.telephoneSecondaire=$(":input[name=telephone_secondaire]").val();b.adresse=$(":input[name=adresse]").val();b.codePostal=$(":input[name=code_postal]").val();b.ville=$(":input[name=ville]").val();var c=new ProducteurValid();var d=c.validUpdate(b);if(d.valid){Infobulle.init();$.post("./index.php?m=GestionProducteur&v=ModificationProducteur","pParam="+$.toJSON(b),function(f){Infobulle.init();if(f.valid){var e=new GestionProducteurTemplate();var g=e.modifierProducteurSucces;$("#contenu").replaceWith(g.template(f))}else{Infobulle.generer(f,"")}},"json")}else{Infobulle.generer(d,"")}};this.construct(a)}function AjoutProducteurVue(a){this.mCommunVue=new CommunVue();this.construct=function(b){if(b&&b.vr){Infobulle.generer(b.vr,"")}this.afficher()};this.afficher=function(){var c=this;var b=new GestionProducteurTemplate();var d=b.formulaireAjoutProducteur;$("#contenu").replaceWith(c.affect($(d.template())))};this.affect=function(b){b=this.boutonLienCompte(b);b=this.mCommunVue.comNumeric(b);b=this.affectControleDatepicker(b);b=this.affectSubmit(b);b=this.mCommunVue.comHoverBtn(b);return b};this.boutonLienCompte=function(b){b.find(":input[name=lien_numero_compte]").click(function(){if(b.find(":input[name=numero_compte]").attr("disabled")){b.find(":input[name=numero_compte]").removeAttr("disabled")}else{b.find(":input[name=numero_compte]").attr("disabled","disabled").val("")}});return b};this.affectControleDatepicker=function(b){b=this.mCommunVue.comDatepicker("dateNaissance",b);return b};this.affectSubmit=function(b){var c=this;b.find("form").submit(function(){c.ajoutProducteur();return false});return b};this.ajoutProducteur=function(){var b=new ProducteurVO();b.nom=$(":input[name=nom]").val();b.prenom=$(":input[name=prenom]").val();b.dateNaissance=$(":input[name=date_naissance]").val().dateFrToDb();b.compte=$(":input[name=numero_compte]").val();b.commentaire=$(":input[name=commentaire]").val();b.courrielPrincipal=$(":input[name=courriel_principal]").val();b.courrielSecondaire=$(":input[name=courriel_secondaire]").val();b.telephonePrincipal=$(":input[name=telephone_principal]").val();b.telephoneSecondaire=$(":input[name=telephone_secondaire]").val();b.adresse=$(":input[name=adresse]").val();b.codePostal=$(":input[name=code_postal]").val();b.ville=$(":input[name=ville]").val();var c=new ProducteurValid();var d=c.validAjout(b);if(d.valid){Infobulle.init();$.post("./index.php?m=GestionProducteur&v=AjoutProducteur","pParam="+$.toJSON(b),function(f){Infobulle.init();if(f.valid){var e=new GestionProducteurTemplate();var g=e.ajoutProducteurSucces;$("#contenu").replaceWith(g.template(f))}else{Infobulle.generer(f,"")}},"json")}else{Infobulle.generer(d,"")}};this.construct(a)}function CaisseListeCommandeVue(a){this.mCommunVue=new CommunVue();this.construct=function(b){var c=this;$.post("./index.php?m=Caisse&v=CaisseListeCommande",function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.afficher(d)}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(d){var c=this;var b=new CaisseTemplate();if(d.listeCommande.length>0&&d.listeCommande[0].comId!=null){var e=new Object;e.commande=new Array();$(d.listeCommande).each(function(){var g=new Object();g.id=this.comId;g.numero=this.comNumero;g.dateFinReservation=this.comDateFinReservation.extractDbDate().dateDbToFr();g.heureFinReservation=this.comDateFinReservation.extractDbHeure();g.minuteFinReservation=this.comDateFinReservation.extractDbMinute();g.dateMarcheDebut=this.comDateMarcheDebut.extractDbDate().dateDbToFr();g.heureMarcheDebut=this.comDateMarcheDebut.extractDbHeure();g.minuteMarcheDebut=this.comDateMarcheDebut.extractDbMinute();g.heureMarcheFin=this.comDateMarcheFin.extractDbHeure();g.minuteMarcheFin=this.comDateMarcheFin.extractDbMinute();e.commande.push(g)});var f=b.listeCommandePage;$("#contenu").replaceWith(c.affect($(f.template(e))))}else{$("#contenu").replaceWith(c.affect($(b.listeCommandeVide)))}};this.affect=function(b){b=this.affectLienMarche(b);b=this.mCommunVue.comHoverBtn(b);return b};this.affectLienMarche=function(b){b.find(".btn-marche").click(function(){var c={id_commande:$(this).attr("id")};CaisseMarcheCommandeVue(c)});return b};this.construct(a)}function CaisseMarcheCommandeVue(a){this.idCommande=null;this.construct=function(b){var c=this;$.post("./index.php?m=Caisse&v=CaisseMarcheCommande","id_commande="+b.id_commande,function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.afficher(d)}else{Infobulle.generer(d,"")}},"json");this.idCommande=b.id_commande};this.afficher=function(d){Infobulle.init();if(d.valid){if(d.listeAdherentCommande){var e=this;var b=new CaisseTemplate();if(d.listeAdherentCommande.length>0&&d.listeAdherentCommande[0].adhId!=null){var f=b.listeAdherentCommandePage;d.comNumero=d.listeAdherentCommande[0].comNumero;$("#contenu").replaceWith(e.affect($(f.template(d))))}else{$("#contenu").replaceWith(b.listeMarcheVide)}}else{var g=new TemplateVR();g.valid=false;g.log.valid=false;var c=new VRerreur();c.code=ERR_211_CODE;c.message=ERR_211_MSG;g.log.push(c);Infobulle.generer(g,"")}}else{Infobulle.generer(d,"")}};this.affect=function(b){b=this.affectTri(b);b=this.affectRecherche(b);b=this.affectLienAchat(b);return b};this.affectTri=function(b){b.find(".com-table").tablesorter({sortList:[[2,0]]});return b};this.affectRecherche=function(b){b.find("#filter").keyup(function(){$.uiTableFilter($(".com-table"),this.value)});b.find("#filter-form").submit(function(){return false});return b};this.affectLienAchat=function(b){var c=this;b.find(".achat-commande-ligne").click(function(){var d={id_commande:c.idCommande,id_adherent:$(this).find(".id-adherent").text()};CaisseAchatCommandeVue(d)});return b};this.construct(a)}function CaisseAchatCommandeVue(a){this.idCommande=null;this.idAdherent=null;this.idCompte=null;this.mTypePaiement=[];this.solde=null;this.mCommunVue=new CommunVue();this.etapeValider=0;this.total=0;this.totalSolidaire=0;this.pdtCommande=new Array();this.construct=function(b){var c=this;this.idCommande=b.id_commande;this.idAdherent=b.id_adherent;$.post("./index.php?m=Caisse&v=CaisseMarcheCommande","id_commande="+b.id_commande+"&id_adherent="+b.id_adherent,function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.idCompte=d.adherent.adhIdCompte;$(d.commande).each(function(){var f=new Object();f.dcomId=this.dcomId;f.dcomIdProduit=this.dcomIdProduit;f.dcomTaille=this.dcomTaille;f.dcomPrix=this.dcomPrix;if(c.pdtCommande[this.proId]){c.pdtCommande[this.proId].lot[f.dcomId]=f;c.pdtCommande[this.proId].prixUnitaire=null}else{var e=new Object();e.proId=this.proId;e.proUniteMesure=this.proUniteMesure;e.proMaxProduitCommande=this.proMaxProduitCommande;$(d.stock).each(function(){if(this.proId==e.proId){if(parseFloat(this.stoQuantite)<parseFloat(e.proMaxProduitCommande)){e.proMaxProduitCommande=this.stoQuantite}}});e.nproNom=this.nproNom;e.nproDescription=this.nproDescription;e.nproIdCategorie=this.nproIdCategorie;e.prixUnitaire=f.dcomPrix/f.dcomTaille;e.lot=new Array();e.lot[f.dcomId]=f;c.pdtCommande[e.proId]=e}});$(d.typePaiement).each(function(){c.mTypePaiement[this.tppId]=this});c.solde=parseFloat(d.adherent.opeMontant);c.afficher(d)}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(d){Infobulle.init();if(d.valid){var e=this;var b=new CaisseTemplate();var f=b.achatCommandePage;var c=new Object();c.comNumero=d.commande[0].comNumero;c.adhNumero=d.adherent.adhNumero;c.adhCompte=d.adherent.cptLabel;c.adhNom=d.adherent.adhNom;c.adhPrenom=d.adherent.adhPrenom;c.sigleMonetaire=gSigleMonetaire;c.total=0;c.produits=new Array();c.produitsSolidaire=new Array();$(this.pdtCommande).each(function(){if(this.proId){var g=this;var j=new Object();j.proId=this.proId;j.nproNom=this.nproNom;j.proUniteMesure=this.proUniteMesure;j.stoQuantite=0;j.proPrix=0;var h=0;$(d.reservation).each(function(){if(this.proId==j.proId){j.stoQuantite=this.stoQuantite*-1;h=(g.lot[this.dcomId].dcomPrix/g.lot[this.dcomId].dcomTaille)*j.stoQuantite;j.proPrix=h.nombreFormate(2,","," ")}});c.total+=h;c.produits.push(j);$(d.stockSolidaire).each(function(){if(j.proId==this.proId){c.produitsSolidaire.push(j)}})}});c.adhSolde=parseFloat(d.adherent.opeMontant);c.adhSolde=c.adhSolde.nombreFormate(2,","," ");c.total=c.total.nombreFormate(2,","," ");e.total=c.total;c.typePaiement=e.mTypePaiement;$("#contenu").replaceWith(e.affect($(f.template(c))));e.changerTypePaiement($(":input[name=typepaiement]"));e.majNouveauSolde()}else{Infobulle.generer(d,"")}};this.affect=function(b){b=this.affectSelectTypePaiement(b);b=this.affectNouveauSolde(b);b=this.mCommunVue.comNumeric(b);b=this.affectNouveauPrixProduit(b);b=this.affectChampComplementaire(b);b=this.affectValider(b);b=this.affectAnnuler(b);b=this.affectModifier(b);b=this.affectSupprimerPdt(b);b=this.mCommunVue.comHoverBtn(b);return b};this.affectSelectTypePaiement=function(b){var c=this;b.find(":input[name=typepaiement]").change(function(){c.changerTypePaiement($(this));c.controlerAchat()});return b};this.affectNouveauSolde=function(b){var c=this;b.find(":input[name=montant-rechargement], .produit-prix").keyup(function(){c.majNouveauSolde();c.controlerAchat()});b.find(".produit-solidaire-prix").keyup(function(){c.majNouveauSoldeSolidaire();c.controlerAchat()});return b};this.affectNouveauPrixProduit=function(b){var c=this;b.find(".produit-quantite").keyup(function(){c.majPrixProduit($(this));c.controlerAchat()});b.find(".produit-solidaire-quantite").keyup(function(){c.controlerAchat()});return b};this.affectChampComplementaire=function(b){var c=this;b.find(":input[name=champ-complementaire]").keyup(function(){c.controlerAchat()});return b};this.affectValider=function(b){var c=this;b.find("#btn-valider").click(function(){c.creerRecapitulatif()});return b};this.affectAnnuler=function(b){var c=this;b.find("#btn-annuler").click(function(){c.retourListe()});return b};this.affectModifier=function(b){var c=this;b.find("#btn-modifier").click(function(){c.boutonModifier()});return b};this.affectSupprimerPdt=function(b){if(b.find(".ligne-produit").size()==0){b.find("#achat-pdt-widget").remove()}if(b.find(".ligne-produit-solidaire").size()==0){b.find("#achat-pdt-solidaire-widget").remove()}return b};this.majPrixProduit=function(b){var f=parseFloat(b.val().numberFrToDb());if(isNaN(f)){f=0}var c=b.parent().parent();var d=c.find(".produit-id").text();var e=0;if(this.pdtCommande[d].prixUnitaire!=null){e=this.pdtCommande[d].prixUnitaire*f}if(isNaN(e)){e=0}if(e!=0){c.find(".produit-prix").val(e.nombreFormate(2,","," "))}else{c.find(".produit-prix").val("")}this.majNouveauSolde()};this.controlerAchat=function(){Infobulle.init();var b=new AchatCommandeValid();var c=b.validAjout(this.getAchatCommandeVO());Infobulle.generer(c,"");return c};this.majTotal=function(){var b=this.calculerTotal();$("#total-achat").text(b.nombreFormate(2,","," "));this.total=b};this.majTotalSolidaire=function(){var b=this.calculerTotalSolidaire();$("#total-achat-solidaire").text(b.nombreFormate(2,","," "));this.totalSolidaire=b};this.calculerTotal=function(){var b=0;$(".produit-prix").each(function(){var c=parseFloat($(this).val().numberFrToDb());if(isNaN(c)){c=0}b+=c});return b};this.calculerTotalSolidaire=function(){var b=0;$(".produit-solidaire-prix").each(function(){var c=parseFloat($(this).val().numberFrToDb());if(isNaN(c)){c=0}b+=c});return b};this.majNouveauSolde=function(){this.majTotal();var b=this.calculNouveauSolde();if(b<=0){$("#nouveau-solde").addClass("com-nombre-negatif");$("#nouveau-solde-sigle").addClass("com-nombre-negatif")}else{$("#nouveau-solde").removeClass("com-nombre-negatif");$("#nouveau-solde-sigle").removeClass("com-nombre-negatif")}$("#nouveau-solde").text(b.nombreFormate(2,","," "))};this.majNouveauSoldeSolidaire=function(){this.majTotalSolidaire();var b=this.calculNouveauSolde();if(b<=0){$("#nouveau-solde").addClass("com-nombre-negatif");$("#nouveau-solde-sigle").addClass("com-nombre-negatif")}else{$("#nouveau-solde").removeClass("com-nombre-negatif");$("#nouveau-solde-sigle").removeClass("com-nombre-negatif")}$("#nouveau-solde").text(b.nombreFormate(2,","," "))};this.calculNouveauSolde=function(){var d=this.total;if(isNaN(d)){d=0}var c=this.totalSolidaire;if(isNaN(c)){c=0}var b=parseFloat($(":input[name=montant-rechargement]").val().numberFrToDb());if(isNaN(b)){b=0}return this.solde-d-c+b};this.changerTypePaiement=function(d){var c=d.val();var b=this.getLabelChamComplementaire(c);if(b!=null){$("#label-champ-complementaire").text(b).show();$("#td-champ-complementaire").show()}else{$("#label-champ-complementaire").text("").hide();$(":input[name=champ-complementaire]").val("");$("#td-champ-complementaire").hide()}};this.getLabelChamComplementaire=function(c){var b=this.mTypePaiement;if(b[c]){if(b[c].tppChampComplementaire==1){return b[c].tppLabelChampComplementaire}}return null};this.getAchatCommandeVO=function(){var b=new AchatCommandeVO();b.id=this.idCommande;b.idCompte=this.idCompte;b.produits=this.getProduitsVO();b.produitsSolidaire=this.getProduitsSolidaireVO();b.rechargement=this.getRechargementVO();b.NbProduits=$(".ligne-produit").size();b.NbProduitsSolidaire=$(".ligne-produit-solidaire").size();return b};this.getProduitsVO=function(){var b=new Array();$(".ligne-produit").each(function(){var d=new ProduitAchatVO();d.id=$(this).find(".produit-id").text();var e=$(this).find(".produit-quantite").val().numberFrToDb();if(!isNaN(e)&&!e.isEmpty()){e=parseFloat(e)}d.quantite=e;var c=$(this).find(".produit-prix").val().numberFrToDb();if(!isNaN(c)&&!c.isEmpty()){c=parseFloat(c)}d.prix=c;b.push(d)});return b};this.getProduitsSolidaireVO=function(){var b=new Array();$(".ligne-produit-solidaire").each(function(){var d=new ProduitAchatVO();d.id=$(this).find(".produit-id").text();var e=$(this).find(".produit-solidaire-quantite").val().numberFrToDb();if(!isNaN(e)&&!e.isEmpty()){e=parseFloat(e)}d.quantite=e;var c=$(this).find(".produit-solidaire-prix").val().numberFrToDb();if(!isNaN(c)&&!c.isEmpty()){c=parseFloat(c)}d.prix=c;b.push(d)});return b};this.getRechargementVO=function(){var b=new RechargementCompteVO();b.id=this.idCompte;var c=$(":input[name=montant-rechargement]").val().numberFrToDb();if(!isNaN(c)&&!c.isEmpty()){c=parseFloat(c)}b.montant=c;b.typePaiement=$(":input[name=typepaiement]").val();if(this.getLabelChamComplementaire(b.typePaiement)!=null){b.champComplementaireObligatoire=1;b.champComplementaire=$(":input[name=champ-complementaire]").val()}else{b.champComplementaireObligatoire=0}return b};this.creerRecapitulatif=function(){var b=this.controlerAchat();if(b.valid){if(this.etapeValider==0){$(".produit-quantite,.produit-solidaire-quantite,#rechargementchampComplementaire,#rechargementtypePaiement").each(function(){$(this).inputToText()});$(".produit-prix,.produit-solidaire-prix,#rechargementmontant").each(function(){$(this).inputToText("montant")});$("#btn-modifier").show();$("#btn-annuler").hide();this.etapeValider=1}else{if(this.etapeValider==1){this.enregistrerAchat()}}}};this.enregistrerAchat=function(){var c=this;var b=this.getAchatCommandeVO();$.post("./index.php?m=Caisse&v=CaisseMarcheCommande","achat="+$.toJSON(b),function(e){if(e.valid){var d=new CaisseTemplate();var f=d.achatCommandeSucces;$("#contenu").replaceWith(c.affectAnnuler($(f)))}else{c.boutonModifier();Infobulle.generer(e,"")}c.etapeValider=0},"json")};this.boutonModifier=function(){if(this.etapeValider==1){$(".produit-prix,.produit-solidaire-prix,#rechargementmontant,.produit-quantite,.produit-solidaire-quantite,#rechargementchampComplementaire,#rechargementtypePaiement").each(function(){$(this).textToInput()});$("#btn-modifier").hide();$("#btn-annuler").show();this.etapeValider=0}};this.retourListe=function(){CaisseMarcheCommandeVue({id_commande:this.idCommande})};this.construct(a)}function MenuVue(a){this.mMenuTemplate=new IdentificationTemplate();this.construct=function(b){var c=this;$.post("./index.php?m=Identification&v=Menu",function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.afficherNouveau(d)}else{Infobulle.generer(d,"")}},"json")};this.afficherNouveau=function(c){var b=this;$("#menu_int").replaceWith(b.genererNouveauMenu(c.menu));$("#site").append(b.genererLienDeconnexion());if(c.admin){$("#site").append(b.affectAdministration(b.genererLienAdmin()))}};this.genererLienDeconnexion=function(){return $(this.mMenuTemplate.deconnexion).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")})};this.genererLienAdmin=function(){return $(this.mMenuTemplate.administration).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")})};this.genererNouveauMenu=function(c){var b=this.mMenuTemplate.debutMenu;b+=this.genererNouveauModule(c);b+=this.mMenuTemplate.finMenu;b=$(b);b.find(".menu-lien").first().addClass("ui-corner-tl");b.find(".menu-lien").last().addClass("ui-corner-br");b.find(".menu-lien").hover(function(){b.find(".menu-lien").removeClass("ui-state-hover");$(this).addClass("ui-state-hover")},function(){b.find(".menu-lien").removeClass("ui-state-hover")});b=this.affectVues(b);return b};this.affectHover=function(b){b.hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")});return b};this.genererNouveauModule=function(b){var c=this.mMenuTemplate.nouveauModule;return c.template(b)};this.affectAdministration=function(b){b.click(function(){AdministrationVue()});b=this.affectHover(b);return b};this.afficher=function(c){var b=this;$("#menu_int").replaceWith(b.genererMenu(c));$("#site").append(b.mMenuTemplate.deconnexion)};this.genererMenu=function(c){var b=this.mMenuTemplate.debutMenu;b+=this.genererModule(c);b+=this.mMenuTemplate.finMenu;b=$(b);b=this.affectVues(b);b=this.affectAnimation(b);return b};this.genererModule=function(b){var c=this.mMenuTemplate.module;return c.template(b)};this.affectVues=function(b){if(b){b.find("#menu-MonCompte-MonCompte").click(function(){MonCompteVue();return false});b.find("#menu-Commande-MesCommandes").click(function(){ListeReservationVue();return false});b.find("#menu-Commande-ListeCommande").click(function(){ListeCommandeVue();return false});b.find("#menu-Caisse-CaisseListeMarche").click(function(){CaisseListeCommandeVue();return false});return b}return null};this.construct(a)}function AdministrationVue(a){this.construct=function(b){var c=this;$.post("./index.php?m=Identification&v=Administration",function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.afficher(d);var e=new CommunVue();e.majMenu("administration")}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(b){var c=this;var e=new IdentificationTemplate();var d=e.admin;$("#contenu").replaceWith(c.affect($(d.template(b.menu))))};this.affect=function(b){b=this.affectVues(b);return b};this.affectVues=function(b){if(b){b.find("#menu-GestionAdherents-AjoutAdherent").click(function(){AjoutAdherentVue();return false});b.find("#menu-GestionAdherents-ListeAdherent").click(function(){ListeAdherentVue();return false});b.find("#menu-GestionCommande-AjoutCommande").click(function(){AjoutCommandeVue();return false});b.find("#menu-GestionCommande-ListeCommande").click(function(){GestionListeCommandeVue();return false});b.find("#menu-GestionProducteur-AjoutProducteur").click(function(){AjoutProducteurVue();return false});b.find("#menu-GestionProducteur-ListeProducteur").click(function(){ListeProducteurVue();return false});b.find("#menu-CompteZeybu-CompteZeybu").click(function(){CompteZeybuVue();return false});b.find("#menu-RechargementCompte-RechargerCompte").click(function(){RechargerCompteVue();return false});b.find("#menu-GestionCaisse-GestionCaisse").click(function(){GestionCaisseVue();return false});return b}return null};this.construct(a)}function IdentificationVue(a){this.construct=function(b){if(b&&b.vr){Infobulle.generer(b.vr,"")}this.afficher()};this.afficher=function(){var b=this;var c=new IdentificationTemplate();$("#contenu").replaceWith(b.affect($(c.formulaireIdentification)))};this.affect=function(b){b=this.affectIdentifier(b);return b};this.affectIdentifier=function(b){var c=this;b.find("#identification-form").submit(function(){c.identifier($(this));return false});return b};this.identifier=function(d){var b=new IdentificationVO();b={login:d.find(":input[name=login]").val(),pass:d.find(":input[name=pass]").val()};var c=new IdentificationValid();var e=c.validAjout(b);Infobulle.init();if(e.valid){$.post("./index.php?m=Identification&v=Identification","pParam="+$.toJSON(b),function(f){Infobulle.init();if(f.valid){switch(f.type){case"1":MenuVue();MonCompteVue();break;case"2":MenuVue();AdministrationVue();break;case"3":MenuVue();CaisseListeCommandeVue();break}}else{Infobulle.generer(f,"")}},"json")}else{Infobulle.generer(e)}};this.construct(a)}function AccueilVue(a){this.construct=function(b){if(b&&b.vr){Infobulle.generer(b.vr,"")}this.afficher()};this.afficher=function(){if($.browser.msie){var b=new IdentificationTemplate();$("#contenu").replaceWith(b.naviguateurIncompatible)}else{IdentificationVue()}};this.construct(a)}function AjoutAdherentVue(a){this.mCommunVue=new CommunVue();this.construct=function(b){var c=this;$.post("./index.php?m=GestionAdherents&v=AjoutAdherent",function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.afficher(d)}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(d){var c=this;var b={modules:[],modules_default:[]};$(d.modules).each(function(){if(this.defaut==1){b.modules_default.push(this)}else{b.modules.push(this)}});b.dateAdhesion=getDateAujourdhuiDb().dateDbToFr();var e=new GestionAdherentsTemplate();var f=e.formulaireAjoutAdherent;$("#contenu").replaceWith(c.affect($(f.template(b))))};this.affect=function(b){b=this.boutonLienCompte(b);b=this.mCommunVue.comNumeric(b);b=this.affectControleDatepicker(b);b=this.affectSubmit(b);b=this.mCommunVue.comHoverBtn(b);return b};this.boutonLienCompte=function(b){b.find(":input[name=lien_numero_compte]").click(function(){if(b.find(":input[name=numero_compte]").attr("disabled")){b.find(":input[name=numero_compte]").removeAttr("disabled")}else{b.find(":input[name=numero_compte]").attr("disabled","disabled").val("")}});return b};this.affectControleDatepicker=function(b){b=this.mCommunVue.comLienDatepicker("dateNaissance","dateAdhesion",b);return b};this.affectSubmit=function(b){var c=this;b.find("form").submit(function(){c.ajoutAdherent();return false});return b};this.ajoutAdherent=function(){var b=new AdherentVO();b.motPasse=$(":input[name=pass]").val();b.motPasseConfirm=$(":input[name=pass_confirm]").val();b.compte=$(":input[name=numero_compte]").val();b.nom=$(":input[name=nom]").val();b.prenom=$(":input[name=prenom]").val();b.courrielPrincipal=$(":input[name=courriel_principal]").val();b.courrielSecondaire=$(":input[name=courriel_secondaire]").val();b.telephonePrincipal=$(":input[name=telephone_principal]").val();b.telephoneSecondaire=$(":input[name=telephone_secondaire]").val();b.adresse=$(":input[name=adresse]").val();b.codePostal=$(":input[name=code_postal]").val();b.ville=$(":input[name=ville]").val();b.dateNaissance=$(":input[name=date_naissance]").val().dateFrToDb();b.dateAdhesion=$(":input[name=date_adhesion]").val().dateFrToDb();b.commentaire=$(":input[name=commentaire]").val();$(":input[name=modules[]]:checked").each(function(){b.modules.push($(this).val())});$(":input[name=modules_default[]]").each(function(){b.modules.push($(this).val())});var c=new AdherentValid();var d=c.validAjout(b);if(d.valid){Infobulle.init();$.post("./index.php?m=GestionAdherents&v=AjoutAdherent","pParam="+$.toJSON(b),function(e){Infobulle.init();if(e.valid){var f=new GestionAdherentsTemplate();var g=f.ajoutAdherentSucces;$("#contenu").replaceWith(g.template(e))}else{Infobulle.generer(e,"")}},"json")}else{Infobulle.generer(d,"")}};this.construct(a)}function CompteAdherentVue(a){this.mIdAdherent=null;this.mAdhNumero=null;this.construct=function(b){var c=this;$.post("./index.php?m=GestionAdherents&v=CompteAdherent","pParam="+$.toJSON(b),function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.afficher(d)}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(f){var e=this;this.mIdAdherent=f.adherent.adhId;this.mAdhNumero=f.adherent.adhNumero;f.opeMontant=f.adherent.opeMontant.nombreFormate(2,","," ");f.sigleMonetaire=gSigleMonetaire;f.adherent.adhDateNaissance=f.adherent.adhDateNaissance.extractDbDate().dateDbToFr();f.adherent.adhDateAdhesion=f.adherent.adhDateAdhesion.extractDbDate().dateDbToFr();$(f.operationPassee).each(function(){this.opeDate=this.opeDate.extractDbDate().dateDbToFr();if(this.tppType==null){this.tppType=""}if(this.opeMontant<0){this.debit=(this.opeMontant*-1).nombreFormate(2,","," ")+" "+gSigleMonetaire;this.credit=""}else{this.debit="";this.credit=this.opeMontant.nombreFormate(2,","," ")+" "+gSigleMonetaire}});var d=parseFloat(f.adherent.opeMontant);var c=0;$(f.operationAvenir).each(function(){if(this.opeDate!=null){d+=parseFloat(this.opeMontant);this.nouveauSolde=d.nombreFormate(2,","," ");this.rechargement=(0).nombreFormate(2,","," ");var j=5;if(d<j){this.rechargement=(Math.ceil((j-d)/j)*j)-c}c+=this.rechargement;this.rechargement=this.rechargement.nombreFormate(2,","," ");this.opeDate=this.opeDate.extractDbDate().dateDbToFr();this.comDateMarche=this.comDateMarche.extractDbDate().dateDbToFr();this.opeMontant=(this.opeMontant*-1).nombreFormate(2,","," ")}});$(f.modules).each(function(){var j=this;this.classAutorisation="ui-icon-closethick";$(f.autorisations).each(function(){if(this.idModule==j.id){j.classAutorisation="ui-icon-check"}})});var g=new GestionAdherentsTemplate();var h=new CommunTemplate();var b=h.debutContenu;b+=g.infoCompteAdherentDebut.template(f.adherent);b+=g.infoCompteAdherentAutorisation.template(f);b+=g.infoCompteAdherentFin.template(f);b+=g.listeOperationAdherentDebut.template(f);b+=g.listeOperationPassee.template(f);if(isArray(f.operationAvenir)&&f.operationAvenir[0].opeLibelle!=null){b+=g.listeOperationAvenir.template(f)}b+=g.listeOperationAdherentFin.template(f);b+=h.finContenu;b=$(b);if(f.adherent.opeMontant<0){b=this.soldeNegatif(b)}if(f.operationPassee.length<11){b=this.masquerPagination(b)}else{b=this.paginnation(b)}$("#contenu").replaceWith(e.affect(b))};this.affect=function(b){b=this.nouveauSoldeNegatif(b);b=this.affectHover(b);b=this.affectLienModifier(b);b=this.affectDialogSuppAdherent(b);b=gCommunVue.comHoverBtn(b);return b};this.paginnation=function(b){b.find("#table-operation").tablesorter({headers:{0:{sorter:false},1:{sorter:false},2:{sorter:false},3:{sorter:false},4:{sorter:false}}}).tablesorterPager({container:b.find("#content-nav-liste-operation"),positionFixed:false});return b};this.nouveauSoldeNegatif=function(b){b.find(".nouveau-solde-val").each(function(){if(parseFloat($(this).text().numberFrToDb())<0){$(this).closest(".nouveau-solde").addClass("com-nombre-negatif")}});return b};this.soldeNegatif=function(b){b.find("#solde").addClass("com-nombre-negatif");return b};this.affectHover=function(b){b.find("#icone-nav-liste-operation-w,#icone-nav-liste-operation-e").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")});return b};this.masquerPagination=function(b){b.find("#content-nav-liste-operation").hide();return b};this.affectLienModifier=function(b){var c=this;b.find("#btn-edt").click(function(){ModificationAdherentVue({id_adherent:c.mIdAdherent})});return b};this.affectDialogSuppAdherent=function(b){var c=this;b.find("#btn-supp").click(function(){var d=new GestionAdherentsTemplate();var e=d.dialogSuppressionAdherent;$(e.template({adhNumero:c.mAdhNumero})).dialog({autoOpen:true,modal:true,draggable:false,resizable:false,width:600,buttons:{Supprimer:function(){var f={id_adherent:c.mIdAdherent};var g=this;$.post("./index.php?m=GestionAdherents&v=SuppressionAdherent","pParam="+$.toJSON(f),function(h){Infobulle.init();if(h.valid){var j=new GestionAdherentsTemplate();var k=j.supprimerAdherentSucces;$("#contenu").replaceWith(k.template(h));$(g).dialog("close")}else{Infobulle.generer(h,"")}},"json")},Annuler:function(){$(this).dialog("close")}},close:function(f,g){$(this).remove()}})});return b};this.construct(a)}function ListeAdherentVue(a){this.construct=function(b){var c=this;$.post("./index.php?m=GestionAdherents&v=ListeAdherent",function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.afficher(d)}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(c){var b=this;var d=new GestionAdherentsTemplate();if(c.listeAdherent.length>0&&c.listeAdherent[0].adhId!=null){var e=d.listeAdherent;c.sigleMonetaire=gSigleMonetaire;$(c.listeAdherent).each(function(){this.classSolde="";if(this.opeMontant<0){this.classSolde="com-nombre-negatif"}this.opeMontant=this.opeMontant.nombreFormate(2,","," ")});$("#contenu").replaceWith(b.affect($(e.template(c))))}else{$("#contenu").replaceWith(d.listeAdherentVide)}};this.affect=function(b){b=this.affectTri(b);b=this.affectRecherche(b);b=this.affectLienCompte(b);return b};this.affectTri=function(b){b.find(".com-table").tablesorter({sortList:[[0,0]],headers:{4:{sorter:false}}});return b};this.affectRecherche=function(b){b.find("#filter").keyup(function(){$.uiTableFilter($(".com-table"),this.value)});b.find("#filter-form").submit(function(){return false});return b};this.affectLienCompte=function(b){var c=this;b.find(".compte-ligne").click(function(){CompteAdherentVue({id_adherent:$(this).find(".id-adherent").text()})});return b};this.construct(a)}function ModificationAdherentVue(a){this.mCommunVue=new CommunVue();this.mIdAdherent=null;this.construct=function(b){var c=this;$.post("./index.php?m=GestionAdherents&v=ModificationAdherent","pParam="+$.toJSON(b),function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.mIdAdherent=b.id_adherent;c.afficher(d)}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(e){var d=this;var c=e;var g=[],b=[];$(e.modules).each(function(){if(this.defaut==1){g.push(this)}else{b.push(this)}});c.modules_default=g;c.modules=b;c.dateAdhesion=e.dateAdhesion.extractDbDate().dateDbToFr();c.dateNaissance=e.dateNaissance.extractDbDate().dateDbToFr();$(e.autorisations).each(function(){var j=this.idModule;$(c.modules).each(function(){if(this.id==j){this.checked='checked="checked"'}})});var f=new GestionAdherentsTemplate();var h=f.formulaireAjoutAdherent;$("#contenu").replaceWith(d.affect($(h.template(c))))};this.affect=function(b){b=this.boutonLienCompte(b);b=this.mCommunVue.comNumeric(b);b=this.affectControleDatepicker(b);b=this.affectSubmit(b);b=this.mCommunVue.comHoverBtn(b);return b};this.boutonLienCompte=function(b){b.find(":input[name=lien_numero_compte]").click(function(){if(b.find(":input[name=numero_compte]").attr("disabled")){b.find(":input[name=numero_compte]").removeAttr("disabled")}else{b.find(":input[name=numero_compte]").attr("disabled","disabled")}});return b};this.affectControleDatepicker=function(b){b=this.mCommunVue.comLienDatepicker("dateNaissance","dateAdhesion",b);return b};this.affectSubmit=function(b){var c=this;b.find("form").submit(function(){c.modifAdherent();return false});return b};this.modifAdherent=function(){var b=new AdherentVO();b.id=this.mIdAdherent;b.motPasse=$(":input[name=pass]").val();b.motPasseConfirm=$(":input[name=pass_confirm]").val();b.compte=$(":input[name=numero_compte]").val();b.nom=$(":input[name=nom]").val();b.prenom=$(":input[name=prenom]").val();b.courrielPrincipal=$(":input[name=courriel_principal]").val();b.courrielSecondaire=$(":input[name=courriel_secondaire]").val();b.telephonePrincipal=$(":input[name=telephone_principal]").val();b.telephoneSecondaire=$(":input[name=telephone_secondaire]").val();b.adresse=$(":input[name=adresse]").val();b.codePostal=$(":input[name=code_postal]").val();b.ville=$(":input[name=ville]").val();b.dateNaissance=$(":input[name=date_naissance]").val().dateFrToDb();b.dateAdhesion=$(":input[name=date_adhesion]").val().dateFrToDb();b.commentaire=$(":input[name=commentaire]").val();$(":input[name=modules[]]:checked").each(function(){b.modules.push($(this).val())});$(":input[name=modules_default[]]").each(function(){b.modules.push($(this).val())});var c=new AdherentValid();var d=c.validUpdate(b);if(d.valid){Infobulle.init();$.post("./index.php?m=GestionAdherents&v=ModificationAdherent","pParam="+$.toJSON(b),function(e){Infobulle.init();if(e.valid){var f=new GestionAdherentsTemplate();var g=f.modifierAdherentSucces;$("#contenu").replaceWith(g.template(e))}else{Infobulle.generer(e,"")}},"json")}else{Infobulle.generer(d,"")}};this.construct(a)}function CompteZeybuVue(a){this.mCommunVue=new CommunVue();this.construct=function(b){var c=this;$.post("./index.php?m=CompteZeybu&v=CompteZeybu",function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.afficher(d)}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(e){var d=this;if(e.soldeTotal!=null){e.soldeTotal=e.soldeTotal.nombreFormate(2,","," ")}else{e.soldeTotal="0".nombreFormate(2,","," ")}if(e.soldeCaisse!=null){e.soldeCaisse=e.soldeCaisse.nombreFormate(2,","," ")}else{e.soldeCaisse="0".nombreFormate(2,","," ")}if(e.soldeBanque!=null){e.soldeBanque=e.soldeBanque.nombreFormate(2,","," ")}else{e.soldeBanque="0".nombreFormate(2,","," ")}e.sigleMonetaire=gSigleMonetaire;$(e.operation).each(function(){if(this.opeDate!=null){this.opeDate=this.opeDate.extractDbDate().dateDbToFr();if(this.tppType==null){this.tppType=""}if(this.opeMontant<0){this.debit=(this.opeMontant*-1).nombreFormate(2,","," ")+" "+gSigleMonetaire;this.credit=""}else{this.debit="";this.credit=this.opeMontant.nombreFormate(2,","," ")+" "+gSigleMonetaire}}});var c=new CompteZeybuTemplate();var f=c.InfoCompte;var b=$(f.template(e));if(e.operation.length<31){b=this.masquerPagination(b)}else{b=this.paginnation(b)}$("#contenu").replaceWith(d.affect(b))};this.affect=function(b){b=this.mCommunVue.comHoverBtn(b);return b};this.paginnation=function(b){b.find("#table-operation").tablesorter({headers:{0:{sorter:false},1:{sorter:false},2:{sorter:false},3:{sorter:false},4:{sorter:false}}}).tablesorterPager({container:b.find("#content-nav-liste-operation"),positionFixed:false,size:30});return b};this.masquerPagination=function(b){b.find("#content-nav-liste-operation").hide();return b};this.construct(a)}function GestionCaisseVue(a){this.etatCaisse=0;this.construct=function(b){var c=this;var d={fonction:"etatCaisse"};$.post("./index.php?m=GestionCaisse&v=GestionCaisse","pParam="+$.toJSON(d),function(e){Infobulle.init();if(e.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.afficher(e)}else{Infobulle.generer(e,"")}},"json")};this.afficher=function(e){var d=this;this.etatCaisse=e.etat;var c=new GestionCaisseTemplate();var b=c.etatCaisseDebut;if(e.etat==1){b+=c.caisseOuverte}else{b+=c.caisseFermee}b+=c.etatCaisseMilieu;if(e.etat==1){b+=c.boutonFermeture}else{b+=c.boutonOuverture}b+=c.etatCaisseFin;b=$(b);$("#contenu").replaceWith(d.affect(b))};this.affect=function(b){b=affectChangerEtatCaisse(b);b=gCommunVue.comHoverBtn(b);return b};this.affectChangerEtatCaisse=function(b){if(this.etatCaisse==1){b=this.affectFermerCaisse(b)}else{b=this.affectOuvrirCaisse(b)}return b};this.affectFermerCaisse=function(b){var c=this;b.find("#btn-caisse").click(function(){var d={fonction:"fermerCaisse"};$.post("./index.php?m=GestionCaisse&v=GestionCaisse","pParam="+$.toJSON(d),function(e){Infobulle.init();if(e.valid){c.construct()}else{Infobulle.generer(e,"")}},"json")});return b};this.affectOuvrirCaisse=function(b){var c=this;b.find("#btn-caisse").click(function(){var d={fonction:"ouvrirCaisse"};$.post("./index.php?m=GestionCaisse&v=GestionCaisse","pParam="+$.toJSON(d),function(e){Infobulle.init();if(e.valid){c.construct()}else{Infobulle.generer(e,"")}},"json")});return b};this.construct(a)}function GestionListeCommandeVue(a){this.mCommunVue=new CommunVue();this.construct=function(b){var c=this;$.post("./index.php?m=GestionCommande&v=ListeCommande",function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.afficher(d)}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(d){var c=this;var b=new GestionCommandeTemplate();if(d.listeCommande.length>0&&d.listeCommande[0].comId!=null){var e=new Object;e.commande=new Array();$(d.listeCommande).each(function(){var g=new Object();g.id=this.comId;g.numero=this.comNumero;g.dateFinReservation=this.comDateFinReservation.extractDbDate().dateDbToFr();g.heureFinReservation=this.comDateFinReservation.extractDbHeure();g.minuteFinReservation=this.comDateFinReservation.extractDbMinute();g.dateMarcheDebut=this.comDateMarcheDebut.extractDbDate().dateDbToFr();g.heureMarcheDebut=this.comDateMarcheDebut.extractDbHeure();g.minuteMarcheDebut=this.comDateMarcheDebut.extractDbMinute();g.heureMarcheFin=this.comDateMarcheFin.extractDbHeure();g.minuteMarcheFin=this.comDateMarcheFin.extractDbMinute();e.commande.push(g)});var f=b.listeCommandePage;$("#contenu").replaceWith(c.affect($(f.template(e))))}else{$("#contenu").replaceWith(c.affect($(b.listeCommandeVide)))}};this.affect=function(b){b=this.affectLienEditer(b);b=this.affectLienMarche(b);b=this.mCommunVue.comHoverBtn(b);b=this.affectLienListeCommandeArchive(b);return b};this.affectLienEditer=function(b){b.find(".btn-editer").click(function(){var c={id_commande:$(this).attr("id")};EditerCommandeVue(c)});return b};this.affectLienMarche=function(b){b.find(".btn-marche").click(function(){var c={id_commande:$(this).attr("id")};MarcheCommandeVue(c)});return b};this.affectLienListeCommandeArchive=function(b){b.find("#lien-marche-archive").click(function(){ListeCommandeArchiveVue()});return b};this.construct(a)}function ModifierCommandeVue(a){this.etapeCreationCommande=0;this.mEditionEnCours=0;this.mListeProducteurs=null;this.mCommunVue=new CommunVue();this.commande=null;this.construct=function(b){var c=this;$.post("./index.php?m=GestionCommande&v=ModifierCommande","pParam="+$.toJSON(b),function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}if(d.producteurs[0].prdtId==null){d.producteurs=[]}c.mListeProducteurs=d.producteurs;c.afficher(d)}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(d){var e=this;var f=d.commande[0];d.sigleMonetaire=gSigleMonetaire;d.comId=f.comId;d.comNom=f.comNom;d.comNumero=f.comNumero;d.comDescription=f.comDescription;d.dateTimeFinReservation=f.comDateFinReservation.extractDbDate().dateDbToFr();d.heureFinReservation=f.comDateFinReservation.extractDbHeure();d.minuteFinReservation=f.comDateFinReservation.extractDbMinute();d.dateMarcheDebut=f.comDateMarcheDebut.extractDbDate().dateDbToFr();d.heureMarcheDebut=f.comDateMarcheDebut.extractDbHeure();d.minuteMarcheDebut=f.comDateMarcheDebut.extractDbMinute();d.heureMarcheFin=f.comDateMarcheFin.extractDbHeure();d.minuteMarcheFin=f.comDateMarcheFin.extractDbMinute();if(d.produits[0].id==null){d.produits=[]}this.commande=d;var b=new GestionCommandeTemplate();var g=b.formulaireModifierCommande;var c=e.affect($(g.template(d)));d.pdtCommande=[];$(d.commande).each(function(){var h={dcomId:this.dcomId,dcomTaille:this.dcomTaille.nombreFormate(2,","," "),dcomPrix:this.dcomPrix.nombreFormate(2,","," ")};if(d.pdtCommande[this.proId]){d.pdtCommande[this.proId].lots[this.dcomId]=h}else{var j={proId:this.proId,proUniteMesure:this.proUniteMesure,proMaxProduitCommande:this.proMaxProduitCommande.nombreFormate(2,","," "),proIdNomProduit:this.proIdNomProduit,proIdProducteur:this.proIdProducteur,nproNom:this.nproNom,lots:[]};j.lots[this.dcomId]=h;$(d.stockInitiaux).each(function(){if(this.idProduit==j.proId){j.quantiteInit=this.quantite.nombreFormate(2,","," ")}});d.pdtCommande[this.proId]=j}});var b=new GestionCommandeTemplate();var g=b.ajoutProduitModifierCommande;$(d.pdtCommande).each(function(){if(this.proId!=undefined){this.sigleMonetaire=gSigleMonetaire;this.producteurs=e.mListeProducteurs;var j=this.proIdProducteur;var k="";$(e.mListeProducteurs).each(function(){if(this.prdtId==j){k=this.prdtPrenom+" "+this.prdtNom}});this.nomProducteur=k;var h=e.affectNouveauProduit($(g.template(this)));h.find(":input[name=producteur]").selectOptions(j);var l=this;$(this.lots).each(function(){if(this.dcomId!=undefined){var m={lots:[{id:this.dcomId,taille:this.dcomTaille,prix:this.dcomPrix,unite:l.proUniteMesure,idPdt:l.proId}],siglemonetaire:gSigleMonetaire};h.find(".produit-lots").append(e.affectAjoutLot($(b.ajoutLotModifPdt.template(m))))}});c.find("#liste_produit").append(e.afficherDeleteLot($(h)))}});$("#contenu").replaceWith(c)};this.affectSelectHeure=function(b){var c=this;b.find(":input[name=heure_fin_commande]").selectOptions(c.commande.heureFinReservation);b.find(":input[name=minute_fin_commande]").selectOptions(c.commande.minuteFinReservation);b.find(":input[name=heure_debut_marche]").selectOptions(c.commande.heureMarcheDebut);b.find(":input[name=minute_debut_marche]").selectOptions(c.commande.minuteMarcheDebut);b.find(":input[name=heure_fin_marche]").selectOptions(c.commande.heureMarcheFin);b.find(":input[name=minute_fin_marche]").selectOptions(c.commande.minuteMarcheFin);return b};this.affect=function(b){b=this.affectAjoutProduit(b);b=this.affectCreerCommande(b);b=this.affectModifierCommande(b);b=this.affectDialogCreerProduit(b);b=this.affectControleDatepicker(b);b=this.mCommunVue.comNumeric(b);b=this.affectSelectHeure(b);b=this.affectBtnRetourMarche(b);b=this.mCommunVue.comHoverBtn(b);return b};this.affectNouveauProduit=function(b){b=this.mCommunVue.comDelete(b);b=this.mCommunVue.comNumeric(b);b=this.editProduit(b);b=this.ajoutLotProduit(b);b=this.mCommunVue.comHoverBtn(b);return b};this.affectAjoutLot=function(b){b=this.editLot(b);b=this.deleteLot(b);b=this.mCommunVue.comNumeric(b);return b};this.affectAjoutProduit=function(b){var d="#formulaire-ajout-produit-creation-commande";var c=this;b.find(d).submit(function(){var j=true;$(".produit-nom-id").each(function(){if(parseInt($(this).text())==$(d+" :input[name=produit]").val()){j=false}});if(j){var h=new ProduitCommandeVO();h.idNom=$(d+" :input[name=produit]").val();h.nom=$(d+" :input[name=produit] option:selected").text();h.idProducteur=$(d+" :input[name=producteur]").val();h.unite=$(d+" :input[name=unite]").val();h.qteMaxCommande=$(d+" :input[name=qmax]").val().numberFrToDb();h.qteRestante=$(d+" :input[name=stock]").val().numberFrToDb();var m=new DetailCommandeVO();m.taille=$(d+" :input[name=taille]").val().numberFrToDb();m.prix=$(d+" :input[name=prix]").val().numberFrToDb();h.lots.push(m);var j=new ProduitCommandeValid();var l=j.validAjout(h);if(l.valid){Infobulle.init();var f=new GestionCommandeTemplate();var k=f.ajoutProduitModifierCommande;h.proIdNomProduit=h.idNom;h.nproNom=h.nom;h.proUniteMesure=h.unite;h.proMaxProduitCommande=h.qteMaxCommande.nombreFormate(2,","," ");h.quantiteInit=h.qteRestante.nombreFormate(2,","," ");h.proId=h.idNom*-1;h.lots=new Array();h.lots.push({id:0,idPdt:h.proId,unite:h.unite,taille:m.taille.nombreFormate(2,","," "),prix:m.prix.nombreFormate(2,","," ")});h.siglemonetaire=gSigleMonetaire;h.producteurs=c.mListeProducteurs;h.nomProducteur=$(d+" :input[name=producteur]").selectedOptions().text();var e=c.affectNouveauProduit($(k.template(h)));e.find(":input[name=producteur]").selectOptions(h.idProducteur);k=f.ajoutLotModifPdt;e.find(".produit-lots").append(c.affectAjoutLot($(k.template(h))));$("#liste_produit").append(e);$(d+" :input[name=unite]").val("");$(d+" :input[name=qmax]").val("");$(d+" :input[name=stock]").val("");$(d+" :input[name=taille]").val("");$(d+" :input[name=prix]").val("");$(d+" :input[name=produit]").selectedOptions().attr("selected","");$(d+" :input[name=produit]").selectOptions(0);$(d+" :input[name=producteur]").selectedOptions().attr("selected","");$(d+" :input[name=producteur]").selectOptions(0)}else{Infobulle.generer(l,"ajout-produit-")}}else{var l=new TemplateVR();l.valid=false;l.log.valid=false;var g=new VRerreur();g.code=ERR_211_CODE;g.message=ERR_211_MSG;l.log.erreurs.push(g);Infobulle.generer(l,"")}return false});return b};this.affectCreerCommande=function(b){var d="#btn-creer-commande";var c=this;b.find(d).click(function(){if(c.mEditionEnCours==0){var f=new CommandeCompleteVO();f.id=c.commande.comId;f.numero=c.commande.comNumero;f.nom=$("#formulaire-information-creation-commande").find(":input[name=nom_commande]").val();f.description=$("#formulaire-information-creation-commande").find(":input[name=description_commande]").val();f.dateMarcheDebut=$("#formulaire-information-creation-commande").find(":input[name=date_debut_marche]").val().dateFrToDb();f.timeMarcheDebut=$("#formulaire-information-creation-commande").find(":input[name=heure_debut_marche]").val()+":"+$("#formulaire-information-creation-commande").find(":input[name=minute_debut_marche]").val()+":00";f.dateMarcheFin=$("#formulaire-information-creation-commande").find(":input[name=date_debut_marche]").val().dateFrToDb();f.timeMarcheFin=$("#formulaire-information-creation-commande").find(":input[name=heure_fin_marche]").val()+":"+$("#formulaire-information-creation-commande").find(":input[name=minute_fin_marche]").val()+":00";f.dateFinReservation=$("#formulaire-information-creation-commande").find(":input[name=date_fin_commande]").val().dateFrToDb();f.timeFinReservation=$("#formulaire-information-creation-commande").find(":input[name=heure_fin_commande]").val()+":"+$("#formulaire-information-creation-commande").find(":input[name=minute_fin_commande]").val()+":00";f.archive="0";$(".produit-div").each(function(){var k=new ProduitCommandeVO();k.idProducteur=$(this).find(":input[name=producteur]").val();k.id=$(this).find(".produit-id").text();k.idNom=$(this).find(".produit-nom-id").text();k.unite=$(this).find(":input[name=unite]").val();k.qteMaxCommande=$(this).find(":input[name=qmax]").val().numberFrToDb();k.qteRestante=$(this).find(":input[name=stock]").val().numberFrToDb();$(this).find(".produit-lot").each(function(){var l=new DetailCommandeVO();l.id=$(this).find(".lot-id").text();l.taille=$(this).find(":input[name=taille]").val().numberFrToDb();l.prix=$(this).find(":input[name=prix]").val().numberFrToDb();k.lots.push(l)});f.produits.push(k)});if(c.etapeCreationCommande==0){var g=new CommandeCompleteValid();var j=g.validUpdate(f);if(j.valid){c.etapeCreationCommande=1;Infobulle.init();$("#window-ajout-produit-creation-commande").hide();$("#btn-modifier-creation-commande").show();$("#liste_produit .produit-div :button , .form-ajout-lot-creation-commande, .com-btn-header, .conteneur-btn-edt-lot").each(function(){$(this).hide()});$("#formulaire-information-creation-commande :input[type=text], #formulaire-information-creation-commande :input[type=textarea], #formulaire-information-creation-commande select").each(function(){$(this).inputToText()})}else{Infobulle.generer(j,"commande-")}}else{if(c.etapeCreationCommande==1){var h={form:2,commande:f};$.post("./index.php?m=GestionCommande&v=ModifierCommande","pParam="+$.toJSON(h),function(l){if(l.valid){l.numero=c.commande.comNumero;var k=new GestionCommandeTemplate();var m=k.modifCommandeSucces;$("#contenu").replaceWith(m.template(l))}else{c.modifierCommandeFunction();Infobulle.generer(l,"commande-")}c.etapeCreationCommande=0},"json")}}}else{var j=new Object();var e=new VRerreur();e.code=ERR_112_CODE;e.message=ERR_112_MSG;j.valid=false;j.log=new VRelement();j.log.valid=false;j.log.erreurs.push(e);Infobulle.generer(j,"")}});return b};this.affectModifierCommande=function(b){var c=this;b.find("#btn-modifier-creation-commande").click(function(){c.modifierCommandeFunction()});return b};this.modifierCommandeFunction=function(){this.etapeCreationCommande=0;var b=this;$("#window-ajout-produit-creation-commande, #liste_produit .produit-div :button, .form-ajout-lot-creation-commande, .com-btn-header, .conteneur-btn-edt-lot").show();$("#btn-modifier-creation-commande, .edit-nom-pdt-creation-commande-valid").hide();$(".produit-lots").each(function(){b.afficherDeleteLot($(this))});$("#formulaire-information-creation-commande :input[type=text], #formulaire-information-creation-commande :input[type=textarea], #formulaire-information-creation-commande select").textToInput()};this.ajoutLotProduit=function(b){var c=this;b.find(".btn-ajout-lot-creation-commande").click(function(){var k=$(this).parents(".form-ajout-lot-creation-commande").find(":input[name=taille]");var d=$(this).parents(".form-ajout-lot-creation-commande").find(":input[name=prix]");var j=new DetailCommandeVO();j.idProduit=$(this).parents(".produit-div").find(".produit-id").text();j.taille=k.val().numberFrToDb();j.prix=d.val().numberFrToDb();var l=new DetailCommandeValid();var h=l.validAjout(j);if(h.valid){Infobulle.init();j.prix=parseFloat(j.prix).nombreFormate(2,","," ");j.taille=parseFloat(j.taille).nombreFormate(2,","," ");j.siglemonetaire=gSigleMonetaire;j.unite=$(this).parentsUntil(".produit-div").find(":input[name=unite]").val();j.idNom=j.idProduit;var m=new Array();$(this).parentsUntil(".produit-div").find(".produit-lot").each(function(){m.push(parseInt($(this).find(".lot-id").text()))});var e=Array.min(m);if(e<0){j.id=e-1}else{j.id=-1}var f=new GestionCommandeTemplate();var g=f.ajoutLot;c.afficherDeleteLot($(this).parents(".produit-div").find(".produit-lots").append(c.affectAjoutLot($(g.template(j)))));k.val("");d.val("")}else{Infobulle.generer(h,"ajout-lot-produit-"+j.idProduit+"-")}});return b};this.editProduit=function(b){var c=this;b.find(".edit-nom-pdt-creation-commande-valid").click(function(){var d=new ProduitCommandeVO();var k=$(this).closest(".produit-div");d.idProducteur=$(k).find(":input[name=producteur]").val();d.idNom=$(k).find(".produit-nom-id").text();d.nom=$(k).find(".produit-nom").text();d.unite=$(k).find(":input[name=unite]").val();d.qteMaxCommande=$(k).find(":input[name=qmax]").val().numberFrToDb();d.qteRestante=$(k).find(":input[name=stock]").val().numberFrToDb();var f=new ProduitCommandeValid();var l=f.validAjout(d,"simple");if(l.valid){Infobulle.init();var e=$(k).find(":input[name=producteur]").selectedOptions().text();$(k).find("#nom-producteur").text(e);var j=parseFloat(d.qteRestante).nombreFormate(2,","," ");$(k).find(".produit-stock").text(j);$(k).find(":input[name=stock]").val(j);var h=parseFloat(d.qteMaxCommande).nombreFormate(2,","," ");$(k).find(".produit-qmax").text(h);$(k).find(":input[name=qmax]").val(h);$(k).find(".produit-unite").text(d.unite);var g=$(this).parentsUntil("#liste_produit");g.find(".produit-unite").text(d.unite);b.find(".edit-nom-pdt-creation-commande, .info-produit").toggle();c.mEditionEnCours--}else{Infobulle.generer(l,"produit-"+d.idNom+"-")}});b.find(".edit-nom-pdt-creation-commande-edit").click(function(){c.mEditionEnCours++;b.find(".edit-nom-pdt-creation-commande, .info-produit").toggle()});return b};this.editLot=function(b){var c=this;b.find(".edit-lot-creation-commande-valid").click(function(){var d=new DetailCommandeVO();var h=$(this).closest(".produit-lot");d.id=$(h).find(".lot-id").text();d.idProduit=$(this).parentsUntil(".produit-div").find(".produit-id").text();d.taille=$(h).find(":input[name=taille]").val().numberFrToDb();d.prix=$(h).find(":input[name=prix]").val().numberFrToDb();var e=new DetailCommandeValid();var j=e.validAjout(d);if(j.valid){Infobulle.init();var f=d.taille.nombreFormate(2,","," ");$(h).find(".produit-taille").text(f);$(h).find(":input[name=taille]").val(f);var g=d.prix.nombreFormate(2,","," ");$(h).find(".produit-prix").text(g);$(h).find(":input[name=prix]").val(g);b.find(".edit-lot-creation-commande, .pdt-"+d.idProduit+"-lot-"+d.id).toggle();c.mEditionEnCours--}else{Infobulle.generer(j,"produit-"+d.idProduit+"-lot-"+d.id+"-")}});b.find(".edit-lot-creation-commande-edit").click(function(){var d=$(this).closest(".produit-div").find(".produit-id").text();var e=$(this).closest(".produit-lot").find(".lot-id").text();b.find(".edit-lot-creation-commande, .pdt-"+d+"-lot-"+e).toggle();c.mEditionEnCours++});return b};this.deleteLot=function(b){var c=this;b.find(".delete-lot").click(function(){var d=$(this).parents(".produit-lots");$(this).parent().parent().remove();c.afficherDeleteLot(d)});return b};this.afficherDeleteLot=function(b){if(b.find(".produit-lot").size()<2){b.find(".delete-lot").hide()}else{b.find(".delete-lot").show()}return b};this.affectDialogCreerProduit=function(b){var c=this;b.find("#btn-creer-nv-pdt").click(function(){var d=new GestionCommandeTemplate();var e=d.dialogAjoutProduit;$(e).dialog({autoOpen:true,modal:true,draggable:false,resizable:false,width:400,buttons:{"Créer le produit":function(){var f=$(this).children("form").first();c.CreerProduit(f)},Annuler:function(){$(this).dialog("close")}},close:function(f,g){$(this).remove();Infobulle.init()}}).submit(function(){c.CreerProduit($(this));return false})});return b};this.CreerProduit=function(c){var b=new NomProduitVO();b.nom=c.find(":input[name=nom]").val();b.description=c.find(":input[name=description]").val();b.idCategorie=1;var d=new NomProduitValid();var f=d.validAjout(b);if(f.valid){Infobulle.init();var e={form:1,nomProduit:b};$.post("./index.php?m=GestionCommande&v=AjoutCommande","pParam="+$.toJSON(e),function(h){if(h.valid){Infobulle.init();var g=[];g[h.id]=h.nom;$("#formulaire-ajout-produit-creation-commande select[name=produit]").addOption(g).sortOptions();$("#dialog-form-creer-nv-pdt").dialog("close")}else{Infobulle.generer(h,"nom-pdt-")}},"json")}else{Infobulle.generer(f,"nom-pdt-")}};this.affectControleDatepicker=function(b){b=this.mCommunVue.comLienDatepicker("commande-dateFinReservation","commande-dateMarcheDebut",b);return b};this.affectBtnRetourMarche=function(b){var c=this;b.find("#btn-editer-com").click(function(){EditerCommandeVue({id_commande:c.mIdCommande})});return b};this.construct(a)}function AjoutCommandeVue(a){this.etapeCreationCommande=0;this.mEditionEnCours=0;this.mListeProducteurs=null;this.mCommunVue=new CommunVue();this.construct=function(b){var c=this;$.post("./index.php?m=GestionCommande&v=AjoutCommande",function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}if(d.producteurs[0].prdtId==null){d.producteurs=[]}c.mListeProducteurs=d.producteurs;c.afficher(d)}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(c){var d=this;if(c.produits[0].id==null){c.produits=[]}var b=new GestionCommandeTemplate();var e=b.formulaireAjoutCommande;$("#contenu").replaceWith(d.affect($(e.template(c))))};this.affect=function(b){b=this.affectAjoutProduit(b);b=this.affectCreerCommande(b);b=this.affectModifierCommande(b);b=this.affectDialogCreerProduit(b);b=this.affectControleDatepicker(b);b=this.mCommunVue.comNumeric(b);b=this.mCommunVue.comHoverBtn(b);return b};this.affectNouveauProduit=function(b){b=this.mCommunVue.comDelete(b);b=this.mCommunVue.comNumeric(b);b=this.editProduit(b);b=this.ajoutLotProduit(b);b=this.mCommunVue.comHoverBtn(b);return b};this.affectAjoutLot=function(b){b=this.editLot(b);b=this.deleteLot(b);b=this.mCommunVue.comNumeric(b);return b};this.affectAjoutProduit=function(b){var d="#formulaire-ajout-produit-creation-commande";var c=this;b.find(d).submit(function(){var j=true;$(".produit-id").each(function(){if(parseInt($(this).text())==$(d+" :input[name=produit]").val()){j=false}});if(j){var h=new ProduitCommandeVO();h.idNom=$(d+" :input[name=produit]").val();h.nom=$(d+" :input[name=produit] option:selected").text();h.idProducteur=$(d+" :input[name=producteur]").val();h.unite=$(d+" :input[name=unite]").val();h.qteMaxCommande=$(d+" :input[name=qmax]").val().numberFrToDb();h.qteRestante=$(d+" :input[name=stock]").val().numberFrToDb();var m=new DetailCommandeVO();m.taille=$(d+" :input[name=taille]").val().numberFrToDb();m.prix=$(d+" :input[name=prix]").val().numberFrToDb();h.lots.push(m);var j=new ProduitCommandeValid();var l=j.validAjout(h);if(l.valid){Infobulle.init();var f=new GestionCommandeTemplate();var k=f.ajoutProduitAjoutCommande;h.qteMaxCommande=h.qteMaxCommande.nombreFormate(2,","," ");h.qteRestante=h.qteRestante.nombreFormate(2,","," ");h.lots[0].prix=parseFloat(h.lots[0].prix).nombreFormate(2,","," ");h.lots[0].taille=parseFloat(h.lots[0].taille).nombreFormate(2,","," ");h.lots[0].id=0;h.siglemonetaire=gSigleMonetaire;h.producteurs=c.mListeProducteurs;h.nomProducteur=$(d+" :input[name=producteur]").selectedOptions().text();var e=c.affectNouveauProduit($(k.template(h)));e.find(":input[name=producteur]").selectOptions(h.idProducteur);k=f.ajoutLotAjoutPdt;e.find(".produit-lots").append(c.affectAjoutLot($(k.template(h))));$("#liste_produit").append(e);$(d+" :input[name=unite]").val("");$(d+" :input[name=qmax]").val("");$(d+" :input[name=stock]").val("");$(d+" :input[name=taille]").val("");$(d+" :input[name=prix]").val("");$(d+" :input[name=produit]").selectedOptions().attr("selected","");$(d+" :input[name=produit]").selectOptions(0);$(d+" :input[name=producteur]").selectedOptions().attr("selected","");$(d+" :input[name=producteur]").selectOptions(0)}else{Infobulle.generer(l,"ajout-produit-")}}else{var l=new TemplateVR();l.valid=false;l.log.valid=false;var g=new VRerreur();g.code=ERR_211_CODE;g.message=ERR_211_MSG;l.log.erreurs.push(g);Infobulle.generer(l,"")}return false});return b};this.affectCreerCommande=function(b){var d="#btn-creer-commande";var c=this;b.find(d).click(function(){if(c.mEditionEnCours==0){var f=new CommandeCompleteVO();f.nom=$("#formulaire-information-creation-commande").find(":input[name=nom_commande]").val();f.description=$("#formulaire-information-creation-commande").find(":input[name=description_commande]").val();f.dateMarcheDebut=$("#formulaire-information-creation-commande").find(":input[name=date_debut_marche]").val().dateFrToDb();f.timeMarcheDebut=$("#formulaire-information-creation-commande").find(":input[name=heure_debut_marche]").val()+":"+$("#formulaire-information-creation-commande").find(":input[name=minute_debut_marche]").val()+":00";f.dateMarcheFin=$("#formulaire-information-creation-commande").find(":input[name=date_debut_marche]").val().dateFrToDb();f.timeMarcheFin=$("#formulaire-information-creation-commande").find(":input[name=heure_fin_marche]").val()+":"+$("#formulaire-information-creation-commande").find(":input[name=minute_fin_marche]").val()+":00";f.dateFinReservation=$("#formulaire-information-creation-commande").find(":input[name=date_fin_commande]").val().dateFrToDb();f.timeFinReservation=$("#formulaire-information-creation-commande").find(":input[name=heure_fin_commande]").val()+":"+$("#formulaire-information-creation-commande").find(":input[name=minute_fin_commande]").val()+":00";f.archive="0";$(".produit-div").each(function(){var j=new ProduitCommandeVO();j.idProducteur=$(this).find(":input[name=producteur]").val();j.idNom=$(this).find(".produit-id").text();j.unite=$(this).find(":input[name=unite]").val();j.qteMaxCommande=$(this).find(":input[name=qmax]").val().numberFrToDb();j.qteRestante=$(this).find(":input[name=stock]").val().numberFrToDb();$(this).find(".produit-lot").each(function(){var k=new DetailCommandeVO();k.taille=$(this).find(":input[name=taille]").val().numberFrToDb();k.prix=$(this).find(":input[name=prix]").val().numberFrToDb();j.lots.push(k)});f.produits.push(j)});if(c.etapeCreationCommande==0){var g=new CommandeCompleteValid();var h=g.validAjout(f);if(h.valid){c.etapeCreationCommande=1;Infobulle.init();$("#window-ajout-produit-creation-commande").hide();$("#btn-modifier-creation-commande").show();$("#liste_produit .produit-div :button , .form-ajout-lot-creation-commande, .com-btn-header, .conteneur-btn-edt-lot").each(function(){$(this).hide()});$("#formulaire-information-creation-commande :input[type=text], #formulaire-information-creation-commande :input[type=textarea], #formulaire-information-creation-commande select").each(function(){$(this).inputToText()})}else{Infobulle.generer(h,"commande-")}}else{if(c.etapeCreationCommande==1){$.post("./index.php?m=GestionCommande&v=AjoutCommande","commande="+$.toJSON(f)+"&form=2",function(k){if(k.valid){var j=new GestionCommandeTemplate();var l=j.ajoutCommandeSucces;$("#contenu").replaceWith(l.template(k))}else{c.modifierCommandeFunction();Infobulle.generer(k,"commande-")}c.etapeCreationCommande=0},"json")}}}else{var h=new Object();var e=new VRerreur();e.code=ERR_112_CODE;e.message=ERR_112_MSG;h.valid=false;h.log=new VRelement();h.log.valid=false;h.log.erreurs.push(e);Infobulle.generer(h,"")}});return b};this.affectModifierCommande=function(b){var c=this;b.find("#btn-modifier-creation-commande").click(function(){c.modifierCommandeFunction()});return b};this.modifierCommandeFunction=function(){this.etapeCreationCommande=0;var b=this;$("#window-ajout-produit-creation-commande, #liste_produit .produit-div :button, .form-ajout-lot-creation-commande, .com-btn-header, .conteneur-btn-edt-lot").show();$("#btn-modifier-creation-commande, .edit-nom-pdt-creation-commande-valid").hide();$(".produit-lots").each(function(){b.afficherDeleteLot($(this))});$("#formulaire-information-creation-commande :input[type=text], #formulaire-information-creation-commande :input[type=textarea], #formulaire-information-creation-commande select").textToInput()};this.ajoutLotProduit=function(b){var c=this;b.find(".btn-ajout-lot-creation-commande").click(function(){var g=$(this).parents(".form-ajout-lot-creation-commande").find(":input[name=taille]");var d=$(this).parents(".form-ajout-lot-creation-commande").find(":input[name=prix]");var f=new DetailCommandeVO();f.idProduit=$(this).parents(".produit-div").find(".produit-id").text();f.taille=g.val().numberFrToDb();f.prix=d.val().numberFrToDb();var h=new DetailCommandeValid();var l=h.validAjout(f);if(l.valid){Infobulle.init();f.prix=parseFloat(f.prix).nombreFormate(2,","," ");f.taille=parseFloat(f.taille).nombreFormate(2,","," ");f.siglemonetaire=gSigleMonetaire;f.unite=$(this).parentsUntil(".produit-div").find(":input[name=unite]").val();f.idNom=f.idProduit;var k=new Array();$(this).parentsUntil(".produit-div").find(".produit-lot").each(function(){k.push(parseInt($(this).find(".lot-id").text()))});f.id=Array.max(k)+1;var e=new GestionCommandeTemplate();var j=e.ajoutLot;c.afficherDeleteLot($(this).parents(".produit-div").find(".produit-lots").append(c.affectAjoutLot($(j.template(f)))));g.val("");d.val("")}else{Infobulle.generer(l,"ajout-lot-produit-"+f.idProduit+"-")}});return b};this.editProduit=function(b){var c=this;b.find(".edit-nom-pdt-creation-commande-valid").click(function(){var d=new ProduitCommandeVO();var k=$(this).closest(".produit-div");d.idProducteur=$(k).find(":input[name=producteur]").val();d.idNom=$(k).find(".produit-id").text();d.nom=$(k).find(".produit-nom").text();d.unite=$(k).find(":input[name=unite]").val();d.qteMaxCommande=$(k).find(":input[name=qmax]").val().numberFrToDb();d.qteRestante=$(k).find(":input[name=stock]").val().numberFrToDb();var f=new ProduitCommandeValid();var l=f.validAjout(d,"simple");if(l.valid){Infobulle.init();var e=$(k).find(":input[name=producteur]").selectedOptions().text();$(k).find("#nom-producteur").text(e);var j=parseFloat(d.qteRestante).nombreFormate(2,","," ");$(k).find(".produit-stock").text(j);$(k).find(":input[name=stock]").val(j);var h=parseFloat(d.qteMaxCommande).nombreFormate(2,","," ");$(k).find(".produit-qmax").text(h);$(k).find(":input[name=qmax]").val(h);$(k).find(".produit-unite").text(d.unite);var g=$(this).parentsUntil("#liste_produit");g.find(".produit-unite").text(d.unite);b.find(".edit-nom-pdt-creation-commande, .info-produit").toggle();c.mEditionEnCours--}else{Infobulle.generer(l,"produit-"+d.idNom+"-")}});b.find(".edit-nom-pdt-creation-commande-edit").click(function(){c.mEditionEnCours++;b.find(".edit-nom-pdt-creation-commande, .info-produit").toggle()});return b};this.editLot=function(b){var c=this;b.find(".edit-lot-creation-commande-valid").click(function(){var d=new DetailCommandeVO();var h=$(this).closest(".produit-lot");d.id=$(h).find(".lot-id").text();d.idProduit=$(this).parentsUntil(".produit-div").find(".produit-id").text();d.taille=$(h).find(":input[name=taille]").val().numberFrToDb();d.prix=$(h).find(":input[name=prix]").val().numberFrToDb();var e=new DetailCommandeValid();var j=e.validAjout(d);if(j.valid){Infobulle.init();var f=d.taille.nombreFormate(2,","," ");$(h).find(".produit-taille").text(f);$(h).find(":input[name=taille]").val(f);var g=d.prix.nombreFormate(2,","," ");$(h).find(".produit-prix").text(g);$(h).find(":input[name=prix]").val(g);b.find(".edit-lot-creation-commande, .pdt-"+d.idProduit+"-lot-"+d.id).toggle();c.mEditionEnCours--}else{Infobulle.generer(j,"produit-"+d.idProduit+"-lot-"+d.id+"-")}});b.find(".edit-lot-creation-commande-edit").click(function(){var d=$(this).closest(".produit-div").find(".produit-id").text();var e=$(this).closest(".produit-lot").find(".lot-id").text();b.find(".edit-lot-creation-commande, .pdt-"+d+"-lot-"+e).toggle();c.mEditionEnCours++});return b};this.deleteLot=function(b){var c=this;b.find(".delete-lot").click(function(){var d=$(this).parents(".produit-lots");$(this).parent().parent().remove();c.afficherDeleteLot(d)});return b};this.afficherDeleteLot=function(b){if(b.children(".produit-lot").size()<2){b.find(".delete-lot").hide()}else{b.find(".delete-lot").show()}return b};this.affectDialogCreerProduit=function(b){var c=this;b.find("#btn-creer-nv-pdt").click(function(){var d=new GestionCommandeTemplate();var e=d.dialogAjoutProduit;$(e).dialog({autoOpen:true,modal:true,draggable:false,resizable:false,width:400,buttons:{"Créer le produit":function(){var f=$(this).children("form").first();c.CreerProduit(f)},Annuler:function(){$(this).dialog("close")}},close:function(f,g){$(this).remove();Infobulle.init()}}).submit(function(){c.CreerProduit($(this));return false})});return b};this.CreerProduit=function(c){var b=new NomProduitVO();b.nom=c.find(":input[name=nom]").val();b.description=c.find(":input[name=description]").val();b.idCategorie=1;var d=new NomProduitValid();var f=d.validAjout(b);if(f.valid){Infobulle.init();var e={form:1,nomProduit:b};$.post("./index.php?m=GestionCommande&v=AjoutCommande","pParam="+$.toJSON(e),function(h){if(h.valid){Infobulle.init();var g=[];g[h.id]=h.nom;$("#formulaire-ajout-produit-creation-commande select[name=produit]").addOption(g).sortOptions();$("#dialog-form-creer-nv-pdt").dialog("close")}else{Infobulle.generer(h,"nom-pdt-")}},"json")}else{Infobulle.generer(f,"nom-pdt-")}};this.affectControleDatepicker=function(b){b=this.mCommunVue.comLienDatepicker("commande-dateFinReservation","commande-dateMarcheDebut",b);return b};this.construct(a)}function AchatCommandeVue(a){this.idCommande=null;this.idAdherent=null;this.idCompte=null;this.mTypePaiement=[];this.solde=null;this.mCommunVue=new CommunVue();this.etapeValider=0;this.total=0;this.totalSolidaire=0;this.pdtCommande=new Array();this.construct=function(b){var c=this;this.idCommande=b.id_commande;this.idAdherent=b.id_adherent;$.post("./index.php?m=GestionCommande&v=MarcheCommande","id_commande="+b.id_commande+"&id_adherent="+b.id_adherent,function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.idCompte=d.adherent.adhIdCompte;$(d.commande).each(function(){var f=new Object();f.dcomId=this.dcomId;f.dcomIdProduit=this.dcomIdProduit;f.dcomTaille=this.dcomTaille;f.dcomPrix=this.dcomPrix;if(c.pdtCommande[this.proId]){c.pdtCommande[this.proId].lot[f.dcomId]=f;c.pdtCommande[this.proId].prixUnitaire=null}else{var e=new Object();e.proId=this.proId;e.proUniteMesure=this.proUniteMesure;e.proMaxProduitCommande=this.proMaxProduitCommande;$(d.stock).each(function(){if(this.proId==e.proId){if(parseFloat(this.stoQuantite)<parseFloat(e.proMaxProduitCommande)){e.proMaxProduitCommande=this.stoQuantite}}});e.nproNom=this.nproNom;e.nproDescription=this.nproDescription;e.nproIdCategorie=this.nproIdCategorie;e.prixUnitaire=f.dcomPrix/f.dcomTaille;e.lot=new Array();e.lot[f.dcomId]=f;c.pdtCommande[e.proId]=e}});$(d.typePaiement).each(function(){c.mTypePaiement[this.tppId]=this});c.solde=parseFloat(d.adherent.opeMontant);c.afficher(d)}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(d){Infobulle.init();if(d.valid){var e=this;var b=new GestionCommandeTemplate();var f=b.achatCommandePage;var c=new Object();c.comNumero=d.commande[0].comNumero;c.adhNumero=d.adherent.adhNumero;c.adhCompte=d.adherent.cptLabel;c.adhNom=d.adherent.adhNom;c.adhPrenom=d.adherent.adhPrenom;c.sigleMonetaire=gSigleMonetaire;c.total=0;c.produits=new Array();c.produitsSolidaire=new Array();$(this.pdtCommande).each(function(){if(this.proId){var g=this;var j=new Object();j.proId=this.proId;j.nproNom=this.nproNom;j.proUniteMesure=this.proUniteMesure;j.stoQuantite=0;j.proPrix=0;var h=0;$(d.reservation).each(function(){if(this.proId==j.proId){j.stoQuantite=this.stoQuantite*-1;h=(g.lot[this.dcomId].dcomPrix/g.lot[this.dcomId].dcomTaille)*j.stoQuantite;j.proPrix=h.nombreFormate(2,","," ")}});c.total+=h;c.produits.push(j);$(d.stockSolidaire).each(function(){if(j.proId==this.proId){c.produitsSolidaire.push(j)}})}});c.adhSolde=parseFloat(d.adherent.opeMontant);c.adhSolde=c.adhSolde.nombreFormate(2,","," ");c.total=c.total.nombreFormate(2,","," ");e.total=c.total;c.typePaiement=e.mTypePaiement;$("#contenu").replaceWith(e.affect($(f.template(c))));e.changerTypePaiement($(":input[name=typepaiement]"));e.majNouveauSolde()}else{Infobulle.generer(d,"")}};this.affect=function(b){b=this.affectSelectTypePaiement(b);b=this.affectNouveauSolde(b);b=this.mCommunVue.comNumeric(b);b=this.affectNouveauPrixProduit(b);b=this.affectChampComplementaire(b);b=this.affectValider(b);b=this.affectAnnuler(b);b=this.affectModifier(b);b=this.affectSupprimerPdt(b);b=this.mCommunVue.comHoverBtn(b);return b};this.affectSelectTypePaiement=function(b){var c=this;b.find(":input[name=typepaiement]").change(function(){c.changerTypePaiement($(this));c.controlerAchat()});return b};this.affectNouveauSolde=function(b){var c=this;b.find(":input[name=montant-rechargement], .produit-prix").keyup(function(){c.majNouveauSolde();c.controlerAchat()});b.find(".produit-solidaire-prix").keyup(function(){c.majNouveauSoldeSolidaire();c.controlerAchat()});return b};this.affectNouveauPrixProduit=function(b){var c=this;b.find(".produit-quantite").keyup(function(){c.majPrixProduit($(this));c.controlerAchat()});b.find(".produit-solidaire-quantite").keyup(function(){c.controlerAchat()});return b};this.affectChampComplementaire=function(b){var c=this;b.find(":input[name=champ-complementaire]").keyup(function(){c.controlerAchat()});return b};this.affectValider=function(b){var c=this;b.find("#btn-valider").click(function(){c.creerRecapitulatif()});return b};this.affectAnnuler=function(b){var c=this;b.find("#btn-annuler").click(function(){c.retourListe()});return b};this.affectModifier=function(b){var c=this;b.find("#btn-modifier").click(function(){c.boutonModifier()});return b};this.affectSupprimerPdt=function(b){if(b.find(".ligne-produit").size()==0){b.find("#achat-pdt-widget").remove()}if(b.find(".ligne-produit-solidaire").size()==0){b.find("#achat-pdt-solidaire-widget").remove()}return b};this.majPrixProduit=function(b){var f=parseFloat(b.val().numberFrToDb());if(isNaN(f)){f=0}var c=b.parent().parent();var d=c.find(".produit-id").text();var e=0;if(this.pdtCommande[d].prixUnitaire!=null){e=this.pdtCommande[d].prixUnitaire*f}if(isNaN(e)){e=0}if(e!=0){c.find(".produit-prix").val(e.nombreFormate(2,","," "))}else{c.find(".produit-prix").val("")}this.majNouveauSolde()};this.controlerAchat=function(){Infobulle.init();var b=new AchatCommandeValid();var c=b.validAjout(this.getAchatCommandeVO());Infobulle.generer(c,"");return c};this.majTotal=function(){var b=this.calculerTotal();$("#total-achat").text(b.nombreFormate(2,","," "));this.total=b};this.majTotalSolidaire=function(){var b=this.calculerTotalSolidaire();$("#total-achat-solidaire").text(b.nombreFormate(2,","," "));this.totalSolidaire=b};this.calculerTotal=function(){var b=0;$(".produit-prix").each(function(){var c=parseFloat($(this).val().numberFrToDb());if(isNaN(c)){c=0}b+=c});return b};this.calculerTotalSolidaire=function(){var b=0;$(".produit-solidaire-prix").each(function(){var c=parseFloat($(this).val().numberFrToDb());if(isNaN(c)){c=0}b+=c});return b};this.majNouveauSolde=function(){this.majTotal();var b=this.calculNouveauSolde();if(b<=0){$("#nouveau-solde").addClass("com-nombre-negatif");$("#nouveau-solde-sigle").addClass("com-nombre-negatif")}else{$("#nouveau-solde").removeClass("com-nombre-negatif");$("#nouveau-solde-sigle").removeClass("com-nombre-negatif")}$("#nouveau-solde").text(b.nombreFormate(2,","," "))};this.majNouveauSoldeSolidaire=function(){this.majTotalSolidaire();var b=this.calculNouveauSolde();if(b<=0){$("#nouveau-solde").addClass("com-nombre-negatif");$("#nouveau-solde-sigle").addClass("com-nombre-negatif")}else{$("#nouveau-solde").removeClass("com-nombre-negatif");$("#nouveau-solde-sigle").removeClass("com-nombre-negatif")}$("#nouveau-solde").text(b.nombreFormate(2,","," "))};this.calculNouveauSolde=function(){var d=this.total;if(isNaN(d)){d=0}var c=this.totalSolidaire;if(isNaN(c)){c=0}var b=parseFloat($(":input[name=montant-rechargement]").val().numberFrToDb());if(isNaN(b)){b=0}return this.solde-d-c+b};this.changerTypePaiement=function(d){var c=d.val();var b=this.getLabelChamComplementaire(c);if(b!=null){$("#label-champ-complementaire").text(b).show();$("#td-champ-complementaire").show()}else{$("#label-champ-complementaire").text("").hide();$(":input[name=champ-complementaire]").val("");$("#td-champ-complementaire").hide()}};this.getLabelChamComplementaire=function(c){var b=this.mTypePaiement;if(b[c]){if(b[c].tppChampComplementaire==1){return b[c].tppLabelChampComplementaire}}return null};this.getAchatCommandeVO=function(){var b=new AchatCommandeVO();b.id=this.idCommande;b.idCompte=this.idCompte;b.produits=this.getProduitsVO();b.produitsSolidaire=this.getProduitsSolidaireVO();b.rechargement=this.getRechargementVO();b.NbProduits=$(".ligne-produit").size();b.NbProduitsSolidaire=$(".ligne-produit-solidaire").size();return b};this.getProduitsVO=function(){var b=new Array();$(".ligne-produit").each(function(){var d=new ProduitAchatVO();d.id=$(this).find(".produit-id").text();var e=$(this).find(".produit-quantite").val().numberFrToDb();if(!isNaN(e)&&!e.isEmpty()){e=parseFloat(e)}d.quantite=e;var c=$(this).find(".produit-prix").val().numberFrToDb();if(!isNaN(c)&&!c.isEmpty()){c=parseFloat(c)}d.prix=c;b.push(d)});return b};this.getProduitsSolidaireVO=function(){var b=new Array();$(".ligne-produit-solidaire").each(function(){var d=new ProduitAchatVO();d.id=$(this).find(".produit-id").text();var e=$(this).find(".produit-solidaire-quantite").val().numberFrToDb();if(!isNaN(e)&&!e.isEmpty()){e=parseFloat(e)}d.quantite=e;var c=$(this).find(".produit-solidaire-prix").val().numberFrToDb();if(!isNaN(c)&&!c.isEmpty()){c=parseFloat(c)}d.prix=c;b.push(d)});return b};this.getRechargementVO=function(){var b=new RechargementCompteVO();b.id=this.idCompte;var c=$(":input[name=montant-rechargement]").val().numberFrToDb();if(!isNaN(c)&&!c.isEmpty()){c=parseFloat(c)}b.montant=c;b.typePaiement=$(":input[name=typepaiement]").val();if(this.getLabelChamComplementaire(b.typePaiement)!=null){b.champComplementaireObligatoire=1;b.champComplementaire=$(":input[name=champ-complementaire]").val()}else{b.champComplementaireObligatoire=0}return b};this.creerRecapitulatif=function(){var b=this.controlerAchat();if(b.valid){if(this.etapeValider==0){$(".produit-quantite,.produit-solidaire-quantite,#rechargementchampComplementaire,#rechargementtypePaiement").each(function(){$(this).inputToText()});$(".produit-prix,.produit-solidaire-prix,#rechargementmontant").each(function(){$(this).inputToText("montant")});$("#btn-modifier").show();$("#btn-annuler").hide();this.etapeValider=1}else{if(this.etapeValider==1){this.enregistrerAchat()}}}};this.enregistrerAchat=function(){var c=this;var b=this.getAchatCommandeVO();$.post("./index.php?m=GestionCommande&v=MarcheCommande","achat="+$.toJSON(b),function(e){if(e.valid){var d=new GestionCommandeTemplate();var f=d.achatCommandeSucces;$("#contenu").replaceWith(c.affectAnnuler($(f)))}else{c.boutonModifier();Infobulle.generer(e,"")}c.etapeValider=0},"json")};this.boutonModifier=function(){if(this.etapeValider==1){$(".produit-prix,.produit-solidaire-prix,#rechargementmontant,.produit-quantite,.produit-solidaire-quantite,#rechargementchampComplementaire,#rechargementtypePaiement").each(function(){$(this).textToInput()});$("#btn-modifier").hide();$("#btn-annuler").show();this.etapeValider=0}};this.retourListe=function(){MarcheCommandeVue({id_commande:this.idCommande})};this.construct(a)}function ListeCommandeArchiveVue(a){this.mCommunVue=new CommunVue();this.construct=function(b){var c=this;var d={archive:1};$.post("./index.php?m=GestionCommande&v=ListeCommande","pParam="+$.toJSON(d),function(e){Infobulle.init();if(e.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.afficher(e)}else{Infobulle.generer(e,"")}},"json")};this.afficher=function(e){var d=this;var c=new GestionCommandeTemplate();if(e.listeCommande.length>0&&e.listeCommande[0].comId!=null){var f=new Object;f.commande=new Array();$(e.listeCommande).each(function(){var h=new Object();h.id=this.comId;h.numero=this.comNumero;h.dateFinReservation=this.comDateFinReservation.extractDbDate().dateDbToFr();h.heureFinReservation=this.comDateFinReservation.extractDbHeure();h.minuteFinReservation=this.comDateFinReservation.extractDbMinute();h.dateMarcheDebut=this.comDateMarcheDebut.extractDbDate().dateDbToFr();h.heureMarcheDebut=this.comDateMarcheDebut.extractDbHeure();h.minuteMarcheDebut=this.comDateMarcheDebut.extractDbMinute();h.heureMarcheFin=this.comDateMarcheFin.extractDbHeure();h.minuteMarcheFin=this.comDateMarcheFin.extractDbMinute();h.dateTimeFinResa=this.comDateFinReservation.replace("-","").replace(" ","").replace(":","");h.dateTimeMarche=this.comDateMarcheDebut.replace("-","").replace(" ","").replace(":","");f.commande.push(h)});var g=c.listeCommandeArchivePage;var b=$(g.template(f));if(e.listeCommande.length<31){b=this.masquerPagination(b)}else{b=this.paginnation(b)}$("#contenu").replaceWith(d.affect(b))}else{$("#contenu").replaceWith(d.affect($(c.listeCommandeArchiveVide)))}};this.affect=function(b){b=this.affectLienListeCommandeArchive(b);b=this.affectLienDetail(b);b=this.mCommunVue.comHoverBtn(b);return b};this.affectLienListeCommandeArchive=function(b){b.find("#lien-marche-encours").click(function(){GestionListeCommandeVue()});return b};this.paginnation=function(b){b.find("#table-marche-archive").tablesorter({sortList:[[2,1]]}).tablesorterPager({container:b.find("#content-nav-liste-operation"),positionFixed:false,size:30});return b};this.masquerPagination=function(b){b.find("#content-nav-liste-operation").hide();b.find("#table-marche-archive").tablesorter({sortList:[[2,1]]});return b};this.affectLienDetail=function(b){b.find(".detail-commande-ligne").click(function(){var c={id_commande:$(this).find(".id-commande").text()};InfoCommandeArchiveVue(c)});return b};this.construct(a)}function MarcheCommandeVue(a){this.idCommande=null;this.construct=function(b){var c=this;$.post("./index.php?m=GestionCommande&v=MarcheCommande","id_commande="+b.id_commande,function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.afficher(d)}else{Infobulle.generer(d,"")}},"json");this.idCommande=b.id_commande};this.afficher=function(d){Infobulle.init();if(d.valid){if(d.listeAdherentCommande){var e=this;var b=new GestionCommandeTemplate();if(d.listeAdherentCommande.length>0&&d.listeAdherentCommande[0].adhId!=null){var f=b.listeAdherentCommandePage;d.comNumero=d.listeAdherentCommande[0].comNumero;$("#contenu").replaceWith(e.affect($(f.template(d))))}else{$("#contenu").replaceWith(b.listeMarcheVide)}}else{var g=new TemplateVR();g.valid=false;g.log.valid=false;var c=new VRerreur();c.code=ERR_211_CODE;c.message=ERR_211_MSG;g.log.push(c);Infobulle.generer(g,"")}}else{Infobulle.generer(d,"")}};this.affect=function(b){b=this.affectTri(b);b=this.affectRecherche(b);b=this.affectLienAchat(b);return b};this.affectTri=function(b){b.find(".com-table").tablesorter({sortList:[[2,0]]});return b};this.affectRecherche=function(b){b.find("#filter").keyup(function(){$.uiTableFilter($(".com-table"),this.value)});b.find("#filter-form").submit(function(){return false});return b};this.affectLienAchat=function(b){var c=this;b.find(".achat-commande-ligne").click(function(){var d={id_commande:c.idCommande,id_adherent:$(this).find(".id-adherent").text()};AchatCommandeVue(d)});return b};this.construct(a)}function BonDeLivraisonVue(a){this.mCommunVue=new CommunVue();this.mIdCommande=null;this.mComNumero=null;this.mEtatEdition=false;this.mListeProduit=[];this.mSuiteEdition=0;this.mIdProducteur=0;this.mTypePaiement=[];this.construct=function(b){var c=this;b.export_type=0;$.post("./index.php?m=GestionCommande&v=BonDeLivraison","pParam="+$.toJSON(b),function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.mEtatEdition=false;c.afficher(d)}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(c){var d=this;var b=new GestionCommandeTemplate();var e=b.bonDeLivraison;this.mIdCommande=c.producteurs[0].comId;this.mComNumero=c.comNumero;$(c.typePaiement).each(function(){d.mTypePaiement[this.tppId]=this});$("#contenu").replaceWith(d.affect($(e.template(c))))};this.affect=function(b){b=this.mCommunVue.comHoverBtn(b);b=this.affectBtnRetourMarche(b);b=this.affectChangementProducteur(b);b=this.affectExportBonDeLivraison(b);return b};this.affectBtnRetourMarche=function(b){var c=this;b.find("#btn-editer-com").click(function(){EditerCommandeVue({id_commande:c.mIdCommande})});return b};this.affectChangementProducteur=function(b){var c=this;b.find("#select-prdt").change(function(){if(c.mEtatEdition){c.mSuiteEdition=1;c.dialogEnregistrer()}else{c.changementProducteur()}});return b};this.changementProducteur=function(){var d=this;var c=$("#select-prdt").val();if(c>0){var e={id_commande:d.mIdCommande,id_producteur:c,export_type:0};$.post("./index.php?m=GestionCommande&v=BonDeLivraison","pParam="+$.toJSON(e),function(l){Infobulle.init();if(l.valid){d.mIdProducteur=c;d.mEtatEdition=false;var k=0;$(l.produits).each(function(){d.mListeProduit[this.proId]=parseFloat(this.stoQuantite);this.stoQuantiteCommande="";this.opeMontant="";var q=0;var o=this.proId;var p=this;$(l.produitsCommande).each(function(){if(this.proId==o){var r=0;p.stoQuantiteCommande="";p.opeMontantCommande="";p.stoQuantiteLivraison="";p.opeMontantLivraison="";p.stoQuantiteSolidaire="";if(this.stoQuantite!=null){p.stoQuantiteCommande=this.stoQuantite.nombreFormate(2,","," ")}if(this.opeMontant!=null){p.opeMontantCommande=this.opeMontant.nombreFormate(2,","," ");r=parseFloat(this.opeMontant)}if(this.stoQuantiteLivraison!=null){p.stoQuantiteLivraison=this.stoQuantiteLivraison.nombreFormate(2,","," ");q+=parseFloat(this.stoQuantiteLivraison)}if(this.opeMontantLivraison!=null){p.opeMontantLivraison=this.opeMontantLivraison.nombreFormate(2,","," ")}if(this.stoQuantiteSolidaire!=null){p.stoQuantiteSolidaire=this.stoQuantiteSolidaire.nombreFormate(2,","," ");q+=parseFloat(this.stoQuantiteSolidaire)}k+=r}else{if(this.proId==null){p.stoQuantiteCommande="0".nombreFormate(2,","," ");p.opeMontantCommande="0".nombreFormate(2,","," ");p.stoQuantiteLivraison="";p.opeMontantLivraison="";p.stoQuantiteSolidaire=""}}});if(q-parseFloat(this.stoQuantite)<0){this.classEtat="qte-reservation-ko"}else{this.classEtat="qte-reservation-ok"}this.stoQuantite=this.stoQuantite.nombreFormate(2,","," ")});l.total="";if(l.operationProducteur[0]){if(l.operationProducteur[0].montant!=null){l.total=(l.operationProducteur[0].montant*-1).nombreFormate(2,","," ")}if(l.operationProducteur[0].typePaiementChampComplementaire!=null){l.champComplementaire=l.operationProducteur[0].typePaiementChampComplementaire}}l.sigleMonetaire=gSigleMonetaire;l.totalCommande=k.nombreFormate(2,","," ");l.typePaiement=d.mTypePaiement;var h=new GestionCommandeTemplate();var n=h.listeProduitLivraison;var g=d.affectListeProduit($(n.template(l)));if(l.operationProducteur[0]&&l.operationProducteur[0].typePaiement!=null){var m=l.operationProducteur[0].typePaiement;g.find(":input[name=typepaiement]").selectOptions(m);var j=d.getLabelChamComplementaire(m);if(j!=null){g.find("#label-champ-complementaire").text(j);g.find("#tr-champ-complementaire").show()}else{g.find("#label-champ-complementaire").text("");g.find("#tr-champ-complementaire").hide()}}else{g.find("#label-champ-complementaire").text("");g.find("#tr-champ-complementaire").hide()}$("#liste-pdt").replaceWith(g)}else{Infobulle.generer(l,"")}},"json")}else{var b=new GestionCommandeTemplate();var f=b.listeProduitVide;$("#liste-pdt").replaceWith(f)}};this.affectListeProduit=function(b){b=this.mCommunVue.comNumeric(b);b=this.affectEtatCommande(b);b=this.mCommunVue.comHoverBtn(b);b=this.affectEnregistrer(b);b=this.affectTypePaiement(b);b=this.affectChangementEtatEdition(b);return b};this.affectTypePaiement=function(b){var c=this;b.find(":input[name=typepaiement]").change(function(){c.changerTypePaiement($(this))});return b};this.changerTypePaiement=function(d){var c=d.val();var b=this.getLabelChamComplementaire(c);if(b!=null){$("#label-champ-complementaire").text(b);$("#tr-champ-complementaire").show()}else{$("#label-champ-complementaire").text("");$(":input[name=champ-complementaire]").val("");$("#tr-champ-complementaire").hide()}};this.getLabelChamComplementaire=function(c){var b=this.mTypePaiement;if(b[c]){if(b[c].tppChampComplementaire==1){return b[c].tppLabelChampComplementaire}}return null};this.affectEtatCommande=function(b){var c=this;b.find(".qte-commande ,.qte-solidaire-commande ").keyup(function(){c.mEtatEdition=true;var e=$(this).prev(".pro-id-etat").text();if(c.mListeProduit[e]){var g=0;var f=$(":input[name=qte-commande-"+e+"]").val().numberFrToDb();var d=$(":input[name=qte-solidaire-commande-"+e+"]").val().numberFrToDb();if(!isNaN(f)&&!f.isEmpty()){g+=parseFloat(f)}if(!isNaN(d)&&!d.isEmpty()){g+=parseFloat(d)}if(g-c.mListeProduit[e]<0){$("#etat-commande-"+e).removeClass("qte-reservation-ok").addClass("qte-reservation-ko")}else{$("#etat-commande-"+e).removeClass("qte-reservation-ko").addClass("qte-reservation-ok")}}});return b};this.affectEnregistrer=function(b){var c=this;b.find("#btn-enregistrer").click(function(){c.mSuiteEdition=0;c.enregistrer()});b.find(".qte-commande ,.prix-commande ").keyup(function(d){if(d.keyCode=="13"){c.mSuiteEdition=0;c.enregistrer()}});return b};this.enregistrer=function(){var c=this;var d=new ProduitsBonDeLivraisonVO();d.id_commande=this.mIdCommande;d.id_producteur=this.mIdProducteur;d.export_type=0;$(".pro-id").each(function(){var f=$(this).text();var g=new ProduitBonDeLivraisonVO();g.id=f;g.quantite=$(":input[name=qte-commande-"+f+"]").val().numberFrToDb();g.quantiteSolidaire=$(":input[name=qte-solidaire-commande-"+f+"]").val().numberFrToDb();g.prix=$(":input[name=prix-commande-"+f+"]").val().numberFrToDb();d.produits.push(g)});d.typePaiement=$(":input[name=typepaiement]").val();d.total=$(":input[name=total]").val().numberFrToDb();if(this.getLabelChamComplementaire(d.typePaiement)!=null){d.typePaiementChampComplementaireObligatoire=1;d.typePaiementChampComplementaire=$(":input[name=champ-complementaire]").val()}else{d.typePaiementChampComplementaireObligatoire=0}var b=new ProduitsBonDeLivraisonValid();var e=b.validAjout(d);if(e.valid){$.post("./index.php?m=GestionCommande&v=BonDeLivraison","pParam="+$.toJSON(d),function(g){Infobulle.init();if(g.valid){c.mEtatEdition=false;if(c.mSuiteEdition==1){c.changementProducteur()}else{if(c.mSuiteEdition==2){c.dialogExportBonDeLivraison()}else{var h=new TemplateVR();h.valid=false;h.log.valid=false;var f=new VRerreur();f.code=ERR_301_CODE;f.message=ERR_301_MSG;h.log.erreurs.push(f);Infobulle.generer(h,"")}}}else{Infobulle.generer(g,"");$("#select-prdt").selectOptions(c.mIdProducteur)}},"json")}else{Infobulle.generer(e,"");$("#select-prdt").selectOptions(c.mIdProducteur)}};this.affectExportBonDeLivraison=function(b){var c=this;b.find("#btn-export-bcom").click(function(){if(c.mEtatEdition){c.mSuiteEdition=2;c.dialogEnregistrer()}else{c.dialogExportBonDeLivraison()}});return b};this.affectChangementEtatEdition=function(b){var c=this;b.find(".com-input-text").keyup(function(){c.mEtatEdition=true});b.find(":input[name=typepaiement]").change(function(){c.mEtatEdition=true});return b};this.dialogExportBonDeLivraison=function(){var c=this;var b=new GestionCommandeTemplate();var d=b.dialogExportBonDeLivraison;$(d.template({comNumero:c.mComNumero})).dialog({autoOpen:true,modal:true,draggable:false,resizable:false,width:600,buttons:{Exporter:function(){var e=$(this).find(":input[name=format]:checked").val();var g=new ExportBonLivraisonVO();g.pParam=1;g.export_type=1;g.id_commande=c.mIdCommande;g.format=e;var f=new ExportBonLivraisonValid();var h=f.validAjout(g);Infobulle.init();if(h.valid){$.download("./index.php?m=GestionCommande&v=BonDeLivraison",g)}else{Infobulle.generer(h,"")}},Annuler:function(){$(this).dialog("close")}},close:function(e,f){$(this).remove();Infobulle.init()}})};this.dialogEnregistrer=function(){var c=this;var b=new GestionCommandeTemplate();var d=b.dialogEnregistrement;$(d).dialog({autoOpen:true,modal:true,draggable:false,resizable:false,width:600,buttons:{Enregistrer:function(){c.enregistrer();$(this).dialog("close")},Annuler:function(){if(c.mSuiteEdition==1){$("#select-prdt").selectOptions(c.mIdProducteur)}$(this).dialog("close")},"Ne pas Enregistrer":function(){c.mEtatEdition=false;if(c.mSuiteEdition==1){c.changementProducteur()}else{if(c.mSuiteEdition==2){c.changementProducteur();c.dialogExportBonDeLivraison()}}$(this).dialog("close")}},close:function(e,f){$(this).remove();Infobulle.init()}})};this.construct(a)}function InfoCommandeArchiveVue(a){this.mCommunVue=new CommunVue();this.construct=function(b){var c=this;b.fonction="afficherCommande";$.post("./index.php?m=GestionCommande&v=InfoCommandeArchive","pParam="+$.toJSON(b),function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.afficher(d)}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(e){var d=this;var b=new GestionCommandeTemplate();var g=b.infoCommandeArchive;e.sigleMonetaire=gSigleMonetaire;var c=0;var f=0;$(e.infoCommande).each(function(){if(this.stoQuantite==null){this.stoQuantite=0}if(this.opeMontant==null){this.opeMontant=0}if(this.stoQuantiteLivraison==null){this.stoQuantiteLivraison=0}if(this.opeMontantLivraison==null){this.opeMontantLivraison=0}if(this.stoQuantiteSolidaire==null){this.stoQuantiteSolidaire=0}if(this.stoQuantiteVente==null){this.stoQuantiteVente=0}if(this.opeMontantVente==null){this.opeMontantVente=0}if(this.stoQuantiteVenteSolidaire==null){this.stoQuantiteVenteSolidaire=0}if(this.opeMontantVenteSolidaire==null){this.opeMontantVenteSolidaire=0}c-=parseFloat(this.opeMontantLivraison);c+=parseFloat(this.opeMontantVente);f+=parseFloat(this.opeMontantVenteSolidaire);this.stoQuantite=this.stoQuantite.nombreFormate(2,","," ");this.opeMontant=this.opeMontant.nombreFormate(2,","," ");this.stoQuantiteLivraison=this.stoQuantiteLivraison.nombreFormate(2,","," ");this.opeMontantLivraison=this.opeMontantLivraison.nombreFormate(2,","," ");this.stoQuantiteSolidaire=this.stoQuantiteSolidaire.nombreFormate(2,","," ");this.stoQuantiteVente=this.stoQuantiteVente.nombreFormate(2,","," ");this.opeMontantVente=this.opeMontantVente.nombreFormate(2,","," ");this.stoQuantiteVenteSolidaire=this.stoQuantiteVenteSolidaire.nombreFormate(2,","," ");this.opeMontantVenteSolidaire=this.opeMontantVenteSolidaire.nombreFormate(2,","," ")});e.total=c.nombreFormate(2,","," ");e.totalSolidaire=f.nombreFormate(2,","," ");e.numero=e.detailMarche.numero;$("#contenu").replaceWith(d.affect($(g.template(e))))};this.affect=function(b){return b};this.construct(a)}function BonDeCommandeVue(a){this.mCommunVue=new CommunVue();this.mIdCommande=null;this.mComNumero=null;this.mEtatEdition=false;this.mListeProduit=[];this.mSuiteEdition=0;this.mIdProducteur=0;this.construct=function(b){var c=this;b.export_type=0;$.post("./index.php?m=GestionCommande&v=BonDeCommande","pParam="+$.toJSON(b),function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.mEtatEdition=false;c.afficher(d)}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(c){var d=this;var b=new GestionCommandeTemplate();var e=b.bonDeCommande;this.mIdCommande=c.producteurs[0].comId;this.mComNumero=c.comNumero;$("#contenu").replaceWith(d.affect($(e.template(c))))};this.affect=function(b){b=this.mCommunVue.comHoverBtn(b);b=this.affectBtnRetourMarche(b);b=this.affectChangementProducteur(b);b=this.affectExportBonCommande(b);return b};this.affectBtnRetourMarche=function(b){var c=this;b.find("#btn-editer-com").click(function(){EditerCommandeVue({id_commande:c.mIdCommande})});return b};this.affectChangementProducteur=function(b){var c=this;b.find("#select-prdt").change(function(){if(c.mEtatEdition){c.mSuiteEdition=1;c.dialogEnregistrer()}else{c.changementProducteur()}});return b};this.changementProducteur=function(){var d=this;var c=$("#select-prdt").val();if(c>0){var e={id_commande:d.mIdCommande,id_producteur:c,export_type:0};$.post("./index.php?m=GestionCommande&v=BonDeCommande","pParam="+$.toJSON(e),function(h){Infobulle.init();if(h.valid){d.mIdProducteur=c;d.mEtatEdition=false;$(h.produits).each(function(){d.mListeProduit[this.proId]=this.stoQuantite;this.stoQuantiteCommande="";this.opeMontant="";var k=this.proId;var l=this;$(h.produitsCommande).each(function(){if(this.proId==k){l.stoQuantiteCommande=this.stoQuantite;l.opeMontant=this.opeMontant.nombreFormate(2,","," ")}});if(this.stoQuantiteCommande-this.stoQuantite<0){this.classEtat="qte-reservation-ko"}else{this.classEtat="qte-reservation-ok"}if(this.stoQuantiteCommande!=""){this.stoQuantiteCommande=this.stoQuantiteCommande.nombreFormate(2,","," ")}this.stoQuantite=this.stoQuantite.nombreFormate(2,","," ")});h.sigleMonetaire=gSigleMonetaire;var g=new GestionCommandeTemplate();var j=g.listeProduitBonDeCommande;$("#liste-pdt").replaceWith(d.affectListeProduit($(j.template(h))))}else{Infobulle.generer(h,"")}},"json")}else{var b=new GestionCommandeTemplate();var f=b.listeProduitVide;$("#liste-pdt").replaceWith(f)}};this.affectListeProduit=function(b){b=this.mCommunVue.comNumeric(b);b=this.affectEtatCommande(b);b=this.mCommunVue.comHoverBtn(b);b=this.affectEnregistrer(b);return b};this.affectEtatCommande=function(b){var c=this;b.find(":input").keyup(function(){c.mEtatEdition=true;var d=$(this).prev(".pro-id").text();if(c.mListeProduit[d]){if($(this).val().numberFrToDb()-c.mListeProduit[d]<0){$("#etat-commande-"+d).removeClass("qte-reservation-ok").addClass("qte-reservation-ko")}else{$("#etat-commande-"+d).removeClass("qte-reservation-ko").addClass("qte-reservation-ok")}}});return b};this.affectEnregistrer=function(b){var c=this;b.find("#btn-enregistrer").click(function(){c.mSuiteEdition=0;c.enregistrer()});b.find(".qte-commande ,.prix-commande ").keyup(function(d){if(d.keyCode=="13"){c.mSuiteEdition=0;c.enregistrer()}});return b};this.enregistrer=function(){var c=this;var d=new ProduitsBonDeCommandeVO();d.id_commande=this.mIdCommande;d.id_producteur=this.mIdProducteur;d.export_type=0;$(".pro-id").each(function(){var f=$(this).text();var g=new ProduitBonDeCommandeVO();g={id:f,quantite:$(":input[name=qte-commande-"+f+"]").val().numberFrToDb(),prix:$(":input[name=prix-commande-"+f+"]").val().numberFrToDb()};d.produits.push(g)});var b=new ProduitsBonDeCommandeValid();var e=b.validAjout(d);if(e.valid){return $.post("./index.php?m=GestionCommande&v=BonDeCommande","pParam="+$.toJSON(d),function(g){Infobulle.init();if(g.valid){c.mEtatEdition=false;if(c.mSuiteEdition==1){c.changementProducteur()}else{if(c.mSuiteEdition==2){c.dialogExportBonDeCommande()}else{var h=new TemplateVR();h.valid=false;h.log.valid=false;var f=new VRerreur();f.code=ERR_301_CODE;f.message=ERR_301_MSG;h.log.erreurs.push(f);Infobulle.generer(h,"")}}}else{Infobulle.generer(g,"");$("#select-prdt").selectOptions(c.mIdProducteur)}},"json")}else{Infobulle.generer(e,"");$("#select-prdt").selectOptions(c.mIdProducteur)}};this.affectExportBonCommande=function(b){var c=this;b.find("#btn-export-bcom").click(function(){if(c.mEtatEdition){c.mSuiteEdition=2;c.dialogEnregistrer()}else{c.dialogExportBonDeCommande()}});return b};this.dialogExportBonDeCommande=function(){var c=this;var b=new GestionCommandeTemplate();var d=b.dialogExportBonDeCommande;$(d.template({comNumero:c.mComNumero})).dialog({autoOpen:true,modal:true,draggable:false,resizable:false,width:600,buttons:{Exporter:function(){var e=$(this).find(":input[name=format]:checked").val();var g=new ExportBonReservationVO();g.pParam=1;g.export_type=1;g.id_commande=c.mIdCommande;g.format=e;var f=new ExportBonReservationValid();var h=f.validAjout(g);Infobulle.init();if(h.valid){$.download("./index.php?m=GestionCommande&v=BonDeCommande",g)}else{Infobulle.generer(h,"")}},Annuler:function(){$(this).dialog("close")}},close:function(e,f){$(this).remove();Infobulle.init()}})};this.dialogEnregistrer=function(){var c=this;var b=new GestionCommandeTemplate();var d=b.dialogEnregistrement;$(d).dialog({autoOpen:true,modal:true,draggable:false,resizable:false,width:600,buttons:{Enregistrer:function(){c.enregistrer();$(this).dialog("close")},Annuler:function(){if(c.mSuiteEdition==1){$("#select-prdt").selectOptions(c.mIdProducteur)}$(this).dialog("close")},"Ne pas Enregistrer":function(){c.mEtatEdition=false;if(c.mSuiteEdition==1){c.changementProducteur()}else{if(c.mSuiteEdition==2){c.changementProducteur();c.dialogExportBonDeCommande()}}$(this).dialog("close")}},close:function(e,f){$(this).remove();Infobulle.init()}})};this.construct(a)}function ReservationAdherentVue(a){this.mCommunVue=new CommunVue();this.mAdherent=null;this.infoCommande=new Object();this.pdtCommande=new Array();this.reservation=new Array();this.reservationModif=new Array();this.construct=function(b){var c=this;b.fonction="afficherReservation";$.post("./index.php?m=GestionCommande&v=ReservationAdherent","pParam="+$.toJSON(b),function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.mAdherent=d.adherent;c.infoCommande.comId=d.commande[0].comId;c.infoCommande.comNumero=d.commande[0].comNumero;c.infoCommande.comNom=d.commande[0].comNom;c.infoCommande.comDescription=d.commande[0].comDescription;c.infoCommande.dateTimeFinReservation=d.commande[0].comDateFinReservation;c.infoCommande.dateFinReservation=d.commande[0].comDateFinReservation.extractDbDate().dateDbToFr();c.infoCommande.heureFinReservation=d.commande[0].comDateFinReservation.extractDbHeure();c.infoCommande.minuteFinReservation=d.commande[0].comDateFinReservation.extractDbMinute();c.infoCommande.dateMarcheDebut=d.commande[0].comDateMarcheDebut.extractDbDate().dateDbToFr();c.infoCommande.heureMarcheDebut=d.commande[0].comDateMarcheDebut.extractDbHeure();c.infoCommande.minuteMarcheDebut=d.commande[0].comDateMarcheDebut.extractDbMinute();c.infoCommande.heureMarcheFin=d.commande[0].comDateMarcheFin.extractDbHeure();c.infoCommande.minuteMarcheFin=d.commande[0].comDateMarcheFin.extractDbMinute();c.infoCommande.comArchive=d.commande[0].comArchive;$(d.commande).each(function(){var f=new Object();f.dcomId=this.dcomId;f.dcomIdProduit=this.dcomIdProduit;f.dcomTaille=this.dcomTaille;f.dcomPrix=this.dcomPrix;if(c.pdtCommande[this.proId]){c.pdtCommande[this.proId].lot[f.dcomId]=f}else{var e=new Object();e.proId=this.proId;e.proUniteMesure=this.proUniteMesure;e.proMaxProduitCommande=this.proMaxProduitCommande;$(d.stock).each(function(){if(this.proId==e.proId){if(parseFloat(this.stoQuantite)<parseFloat(e.proMaxProduitCommande)){e.proMaxProduitCommande=this.stoQuantite}}});e.nproNom=this.nproNom;e.nproDescription=this.nproDescription;e.nproIdCategorie=this.nproIdCategorie;e.lot=new Array();e.lot[f.dcomId]=f;c.pdtCommande[e.proId]=e}});$(d.reservation).each(function(){this.stoQuantite=this.stoQuantite*-1;c.reservation[this.proId]=this});c.afficher()}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(){this.afficherDetailReservation()};this.afficherDetailReservation=function(){var e=this;var b=new GestionCommandeTemplate();var f=b.detailReservation;var c={};c.adhId=this.mAdherent.adhId;c.adhNumero=this.mAdherent.adhNumero;c.adhCompte=this.mAdherent.cptLabel;c.adhNom=this.mAdherent.adhNom;c.adhPrenom=this.mAdherent.adhPrenom;c.adhSolde=this.mAdherent.opeMontant.nombreFormate(2,","," ");c.sigleMonetaire=gSigleMonetaire;c.comNumero=this.infoCommande.comNumero;c.dateFinReservation=this.infoCommande.dateFinReservation;c.heureFinReservation=this.infoCommande.heureFinReservation;c.minuteFinReservation=this.infoCommande.minuteFinReservation;c.dateMarcheDebut=this.infoCommande.dateMarcheDebut;c.heureMarcheDebut=this.infoCommande.heureMarcheDebut;c.minuteMarcheDebut=this.infoCommande.minuteMarcheDebut;c.heureMarcheFin=this.infoCommande.heureMarcheFin;c.minuteMarcheFin=this.infoCommande.minuteMarcheFin;c.reservation=new Array();var d=0;$(this.pdtCommande).each(function(){if(e.reservation[this.proId]){var g=new Object;g.nproNom=this.nproNom;g.stoQuantite=parseFloat(e.reservation[this.proId].stoQuantite);g.proUniteMesure=this.proUniteMesure;g.prix=0;var h=e.reservation[this.proId].dcomId;$(this.lot).each(function(){if(this.dcomId==h){g.prix=(g.stoQuantite/this.dcomTaille)*this.dcomPrix}});d+=g.prix;g.stoQuantite=g.stoQuantite.nombreFormate(2,","," ");g.prix=g.prix.nombreFormate(2,","," ");c.reservation.push(g)}});c.total=parseFloat(d).nombreFormate(2,","," ");$("#contenu").replaceWith(e.affect($(f.template(c))))};this.afficherModifier=function(){var e=this;var b=new GestionCommandeTemplate();var f=b.modifierReservation;var c={};c.adhId=this.mAdherent.adhId;c.adhNumero=this.mAdherent.adhNumero;c.adhCompte=this.mAdherent.cptLabel;c.adhNom=this.mAdherent.adhNom;c.adhPrenom=this.mAdherent.adhPrenom;c.adhSolde=this.mAdherent.opeMontant.nombreFormate(2,","," ");c.adhNouveauSolde=0;c.sigleMonetaire=gSigleMonetaire;c.comNumero=this.infoCommande.comNumero;c.dateFinReservation=this.infoCommande.dateFinReservation;c.heureFinReservation=this.infoCommande.heureFinReservation;c.minuteFinReservation=this.infoCommande.minuteFinReservation;c.dateMarcheDebut=this.infoCommande.dateMarcheDebut;c.heureMarcheDebut=this.infoCommande.heureMarcheDebut;c.minuteMarcheDebut=this.infoCommande.minuteMarcheDebut;c.heureMarcheFin=this.infoCommande.heureMarcheFin;c.minuteMarcheFin=this.infoCommande.minuteMarcheFin;c.produit=new Array();var d=0;$(this.pdtCommande).each(function(){if(this.proId){var g={};g.proId=this.proId;g.nproNom=this.nproNom;g.proMaxProduitCommande=parseFloat(this.proMaxProduitCommande).nombreFormate(2,","," ");g.proUniteMesure=this.proUniteMesure;g.lot=new Array();var j=0;var h=-1;var k=-1;$(this.lot).each(function(){if(this.dcomId){var l={};l.dcomId=this.dcomId;l.dcomTaille=parseFloat(this.dcomTaille).nombreFormate(2,","," ");l.dcomPrix=parseFloat(this.dcomPrix).nombreFormate(2,","," ");l.prixReservation=parseFloat(this.dcomPrix);l.stoQuantiteReservation=parseFloat(this.dcomTaille);if(e.reservation[g.proId]&&(e.reservation[g.proId].dcomId==this.dcomId)){l.stoQuantiteReservation=parseFloat(e.reservation[g.proId].stoQuantite);l.prixReservation=(l.stoQuantiteReservation/this.dcomTaille)*this.dcomPrix;d+=l.prixReservation;h=this.dcomId;l.checked='checked="checked"'}g.prixUnitaire=(l.prixReservation/l.stoQuantiteReservation).nombreFormate(2,","," ");l.stoQuantiteReservation=l.stoQuantiteReservation.nombreFormate(2,","," ");l.prixReservation=l.prixReservation.nombreFormate(2,","," ");g.lot.push(l)}});c.total=parseFloat(d).nombreFormate(2,","," ");if(h!=-1){g.checked='checked="checked"'}else{if(g.lot[0]){g.lot[0].checked='checked="checked"'}}c.produit.push(g)}});this.reservationModif=new Array();$(this.reservation).each(function(){if(this.proId){e.reservationModif[this.proId]={comId:this.comId,proId:this.proId,dcomId:this.dcomId,stoId:this.stoId,stoQuantite:this.stoQuantite,stoType:this.stoType,stoIdCompte:this.stoIdCompte}}});$("#contenu").replaceWith(e.affectModifier($(f.template(c))))};this.affect=function(b){b=this.affectModifierReservation(b);b=this.affectAnnulerDetailReservation(b);b=this.mCommunVue.comHoverBtn(b);b=this.affectSupprimerReservation(b);return b};this.affectModifier=function(b){b=this.affectBtnQte(b);b=this.affectChangementLot(b);b=this.affectChangementProduit(b);b=this.preparerAffichageModifier(b);b=this.affectValiderReservation(b);b=this.affectAnnulerReservation(b);b=this.affectNouveauSolde(b);b=this.mCommunVue.comHoverBtn(b);b=this.supprimerSelect(b);b=this.affectInitLot(b);return b};this.affectBtnQte=function(b){var c=this;b.find(".btn-plus").click(function(){var d=$(this).parent().parent().find(".pdt-id").text();c.nouvelleQuantite(d,$(this).parent().parent().find("#lot-"+d).val(),1)});b.find(".btn-moins").click(function(){var d=$(this).parent().parent().find(".pdt-id").text();c.nouvelleQuantite(d,$(this).parent().parent().find("#lot-"+d).val(),-1)});return b};this.affectChangementLot=function(b){var c=this;b.find(".pdt select").change(function(){c.changerLot($(this).parent().parent().find(".pdt-id").text(),$(this).val())});return b};this.affectChangementProduit=function(b){var c=this;b.find(".pdt :checkbox").click(function(){c.changerProduit($(this).parent().parent().find(".pdt-id").text())});return b};this.affectValiderReservation=function(b){var c=this;b.find("#btn-valider").click(function(){c.validerReservation()});return b};this.affectAnnulerReservation=function(b){var c=this;b.find("#btn-annuler").click(function(){c.afficherDetailReservation()});return b};this.affectModifierReservation=function(b){var c=this;b.find("#btn-modifier").click(function(){c.afficherModifier()});return b};this.affectAnnulerDetailReservation=function(b){var c=this;b.find("#btn-annuler").click(function(){EditerCommandeVue({id_commande:c.infoCommande.comId})});return b};this.affectInitLot=function(b){var c=this;b.find(".pdt select").each(function(){var d=$(this).parent().parent().find(".pdt-id").text();var g=$(this).val();var e=c.pdtCommande[d].lot[g].dcomPrix;var h=c.pdtCommande[d].lot[g].dcomTaille;var f=(e/h).nombreFormate(2,","," ");$(b).find("#prix-unitaire-"+d).text(f)});return b};this.nouvelleQuantite=function(f,l,b){var h=this.pdtCommande[f].proMaxProduitCommande;var m=this.pdtCommande[f].lot[l].dcomTaille;var k=this.pdtCommande[f].lot[l].dcomPrix;var d=0;if(this.reservationModif[f]&&(this.reservationModif[f].dcomId==l)){d=this.reservationModif[f].stoQuantite/m}d+=b;var c=0;c=d*m;if(c>0&&c<=h){var e=0;e=d*k;this.reservationModif[f].stoQuantite=c;$("#qte-pdt-"+f).text(parseFloat(c).nombreFormate(2,","," "));$("#prix-pdt-"+f).text(parseFloat(e).nombreFormate(2,","," "));this.majTotal()}else{if(c>h){var g=new TemplateVR();g.valid=false;g.log.valid=false;var j=new VRerreur();j.code=ERR_304_CODE;j.message=ERR_304_MSG;g.log.erreurs.push(j);Infobulle.generer(g,"")}}};this.changerLot=function(b,c){var d=this.pdtCommande[b].lot[c].dcomPrix;var f=this.pdtCommande[b].lot[c].dcomTaille;var e=(d/f).nombreFormate(2,","," ");$("#prix-unitaire-"+b).text(e);if(this.reservationModif[b]){this.reservationModif[b].dcomId=c;this.reservationModif[b].stoQuantite=f;$("#qte-pdt-"+b).text(f.nombreFormate(2,","," "));$("#prix-pdt-"+b).text(d.nombreFormate(2,","," "))}this.majTotal()};this.changerProduit=function(b){if(this.reservationModif[b]!=null){$(".resa-pdt-"+b).hide();$("#qte-pdt-"+b).text("");$("#prix-pdt-"+b).text("");this.reservationModif[b]=null}else{var e=$("#lot-"+b).val();var f=this.pdtCommande[b].lot[e].dcomTaille;var d={};d.comId=this.infoCommande.comId;d.proId=b;d.dcomId=e;d.stoQuantite=f;this.reservationModif[b]=d;$("#qte-pdt-"+b).text(f.nombreFormate(2,","," "));var c=this.pdtCommande[b].lot[e].dcomPrix.nombreFormate(2,","," ");$("#prix-pdt-"+b).text(c);$(".resa-pdt-"+b).show()}this.majTotal()};this.majTotal=function(){$("#total").text(this.calculTotal().nombreFormate(2,","," "));this.majNouveauSolde()};this.majNouveauSolde=function(){var b=this.mAdherent.opeMontant-this.calculTotal();if(b<=0){$("#nouveau-solde").addClass("com-nombre-negatif");$("#nouveau-solde-sigle").addClass("com-nombre-negatif")}else{$("#nouveau-solde").removeClass("com-nombre-negatif");$("#nouveau-solde-sigle").removeClass("com-nombre-negatif")}$("#nouveau-solde").text(b.nombreFormate(2,","," "))};this.affectNouveauSolde=function(c){var b=this.mAdherent.opeMontant-this.calculTotal();if(b<=0){c.find("#nouveau-solde").addClass("com-nombre-negatif");c.find("#nouveau-solde-sigle").addClass("com-nombre-negatif")}else{c.find("#nouveau-solde").removeClass("com-nombre-negatif");c.find("#nouveau-solde-sigle").removeClass("com-nombre-negatif")}c.find("#nouveau-solde").text(b.nombreFormate(2,","," "));return c};this.calculTotal=function(){var c=this;var b=0;$(this.reservationModif).each(function(){var d=this;if(d.stoQuantite){if(c.pdtCommande[d.proId]){$(c.pdtCommande[d.proId].lot).each(function(){if(d.dcomId==this.dcomId){b+=(d.stoQuantite/this.dcomTaille)*this.dcomPrix}})}}});return b};this.preparerAffichageModifier=function(b){var c=this;$(b).find(".pdt").each(function(){var d=$(this).find(".pdt-id").text();if(c.reservation[d]!=null){var g=c.reservation[d];var f=g.dcomId;var h=g.stoQuantite;$(b).find("#qte-pdt-"+d).text(h.nombreFormate(2,","," "));var e=((c.pdtCommande[d].lot[f].dcomPrix*g.stoQuantite)/c.pdtCommande[d].lot[f].dcomTaille).nombreFormate(2,","," ");$(b).find("#prix-pdt-"+d).text(e);$(b).find("#lot-"+d).selectOptions(f);$(b).find(".resa-pdt-"+d).show()}});return b};this.validerReservation=function(){var e=this;Infobulle.init();var c=new ListeReservationCommandeVO();var f=0;$(this.reservationModif).each(function(){if(this.stoQuantite){var h=new ReservationCommandeVO();h.id="";h.stoQuantite=this.stoQuantite*-1;h.stoIdDetailCommande=this.dcomId;c.commandes.push(h);f++}});if(f>0){var d=new ListeReservationCommandeValid();var g=d.validAjout(c);if(!g.valid){Infobulle.generer(g,"")}else{lParam={reservation:c,id_compte:this.mAdherent.adhIdCompte,fonction:"modifierReservation"};$.post("./index.php?m=GestionCommande&v=ReservationAdherent","pParam="+$.toJSON(lParam),function(h){Infobulle.init();if(h.valid){e.reservation=new Array();$(e.reservationModif).each(function(){if(this.proId){e.reservation[this.proId]={comId:this.comId,proId:this.proId,dcomId:this.dcomId,stoId:this.stoId,stoQuantite:this.stoQuantite,stoType:this.stoType,stoIdCompte:this.stoIdCompte}}});e.afficher()}else{Infobulle.generer(h,"")}},"json")}}else{var g=new TemplateVR();g.valid=false;g.log.valid=false;var b=new VRerreur();b.code=ERR_207_CODE;b.message=ERR_207_MSG;g.log.erreurs.push(b);Infobulle.generer(g,"")}};this.affectSupprimerReservation=function(b){var c=this;b.find("#btn-supprimer").click(function(){var d=new GestionCommandeTemplate();var e=d.supprimerReservationDialog;$(e).dialog({autoOpen:true,modal:true,draggable:false,resizable:false,width:600,buttons:{Supprimer:function(){var f={id_commande:c.infoCommande.comId,id_adherent:c.mAdherent.adhId,fonction:"supprimerReservation"};var g=this;$.post("./index.php?m=GestionCommande&v=ReservationAdherent","pParam="+$.toJSON(f),function(j){Infobulle.init();if(j.valid){var k=new TemplateVR();k.valid=false;k.log.valid=false;var h=new VRerreur();h.code=ERR_303_CODE;h.message=ERR_303_MSG;k.log.erreurs.push(h);EditerCommandeVue({id_commande:c.infoCommande.comId,vr:k});$(g).dialog("close")}else{Infobulle.generer(j,"")}},"json")},Annuler:function(){$(this).dialog("close")}},close:function(f,g){$(this).remove()}})});return b};this.supprimerSelect=function(b){b.find(".pdt select").each(function(){if($(this).find("option").size()==1){var e=new CommandeTemplate();var d=e.lotUnique;var c={};c.IdPdt=$(this).parent().parent().find(".pdt-id").text();c.valeur=$(this).val();c.text=$(this).text();$(this).replaceWith(d.template(c))}});return b};this.construct(a)}function EditerCommandeVue(a){this.mNiveau=[];this.mIdCommande=null;this.mCommande=null;this.construct=function(b){var c=this;b.export_type=0;$.post("./index.php?m=GestionCommande&v=EditerCommande","pParam="+$.toJSON(b),function(d){Infobulle.init();if(d.valid){c.afficher(d);if(b.vr){Infobulle.generer(b.vr,"")}}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(e){var f=this;var d={};d.comId=e.commande[0].comId;this.mIdCommande=d.comId;d.comNumero=e.commande[0].comNumero;d.comDescription=e.commande[0].comDescription;d.dateTimeFinReservation=e.commande[0].comDateFinReservation;d.dateFinReservation=e.commande[0].comDateFinReservation.extractDbDate().dateDbToFr();d.heureFinReservation=e.commande[0].comDateFinReservation.extractDbHeure();d.minuteFinReservation=e.commande[0].comDateFinReservation.extractDbMinute();d.dateMarcheDebut=e.commande[0].comDateMarcheDebut.extractDbDate().dateDbToFr();d.heureMarcheDebut=e.commande[0].comDateMarcheDebut.extractDbHeure();d.minuteMarcheDebut=e.commande[0].comDateMarcheDebut.extractDbMinute();d.heureMarcheFin=e.commande[0].comDateMarcheFin.extractDbHeure();d.minuteMarcheFin=e.commande[0].comDateMarcheFin.extractDbMinute();d.pdtCommande=[];$(e.commande).each(function(){var h={dcomTaille:this.dcomTaille.nombreFormate(2,","," "),dcomPrix:this.dcomPrix.nombreFormate(2,","," ")};if(d.pdtCommande[this.proId]){d.pdtCommande[this.proId].lot[this.dcomId]=h}else{var j={proId:this.proId,proUniteMesure:this.proUniteMesure,proMaxProduitCommande:this.proMaxProduitCommande.nombreFormate(2,","," "),nproNom:this.nproNom,lot:[]};j.lot[this.dcomId]=h;$(e.stockInitiaux).each(function(){if(this.idProduit==j.proId){j.quantiteInit=this.quantite}});$(e.stock).each(function(){if(this.proId==j.proId){j.quantite=this.stoQuantite}});j.quantiteCommande=j.quantiteInit-j.quantite;f.mNiveau.push({id:j.proId,quantite:parseInt(j.quantiteCommande*100/j.quantiteInit)});j.quantiteCommande=j.quantiteCommande.nombreFormate(2,","," ");j.quantiteInit=j.quantiteInit.nombreFormate(2,","," ");j.quantite=j.quantite.nombreFormate(2,","," ");d.pdtCommande[this.proId]=j}});d.listeAdherentCommande=e.listeAdherentCommande;d.sigleMonetaire=gSigleMonetaire;this.mCommande=d;var c=new GestionCommandeTemplate();var g=c.editerCommandePage;var b=f.affect($(g.template(d)));if(!(e.listeAdherentCommande.length>0&&e.listeAdherentCommande[0].adhId!=null)){b.find("#edt-com-recherche").hide();b.find("#edt-com-liste-resa").replaceWith(c.listeReservationVide)}$("#contenu").replaceWith(b)};this.affect=function(b){b=this.affectTri(b);b=this.affectRecherche(b);b=this.affectNiveau(b);b=this.affectReservation(b);b=this.affectModifier(b);b=this.affectCloturer(b);b=this.affectExportReservation(b);b=this.affectBonDeCommande(b);b=this.affectBonDeLivraison(b);b=gCommunVue.comHoverBtn(b);return b};this.affectTri=function(b){b.find(".com-table").tablesorter({sortList:[[2,0]]});return b};this.affectRecherche=function(b){b.find("#filter").keyup(function(){$.uiTableFilter($(".com-table"),this.value)});b.find("#filter-form").submit(function(){return false});return b};this.affectNiveau=function(b){$(this.mNiveau).each(function(){var c=this.id;var d=this.quantite;b.find("#pdt-"+c).progressbar({value:d});b.find(".pdt-"+c+"-afficher-detail").click(function(){b.find("#pdt-"+c+"-detail").slideToggle();b.find(".pdt-"+c+"-afficher-detail").toggle()})});return b};this.affectReservation=function(b){var c=this;b.find(".edt-com-reservation-ligne").click(function(){ReservationAdherentVue({id_commande:c.mIdCommande,id_adherent:$(this).find(".id-adherent").text()})});return b};this.affectModifier=function(b){var c=this;b.find("#btn-modif-com").click(function(){ModifierCommandeVue({id_commande:c.mIdCommande})});return b};this.affectBonDeCommande=function(b){var c=this;b.find("#btn-bon-com").click(function(){BonDeCommandeVue({id_commande:c.mIdCommande})});return b};this.affectBonDeLivraison=function(b){var c=this;b.find("#btn-livraison-com").click(function(){BonDeLivraisonVue({id_commande:c.mIdCommande})});return b};this.affectCloturer=function(b){var c=this;b.find("#btn-cloture-com").click(function(){var d=new GestionCommandeTemplate();var e=d.dialogClotureCommande;$(e.template(c.mCommande)).dialog({autoOpen:true,modal:true,draggable:false,resizable:false,width:600,buttons:{Cloturer:function(){var f={id_commande:c.mIdCommande};var g=this;$.post("./index.php?m=GestionCommande&v=CloturerCommande","pParam="+$.toJSON(f),function(j){Infobulle.init();if(j.valid){var h=new GestionCommandeTemplate();var k=h.cloturerCommandeSucces;$("#contenu").replaceWith(k.template(j));$(g).dialog("close")}else{Infobulle.generer(j,"")}},"json")},Annuler:function(){$(this).dialog("close")}},close:function(f,g){$(this).remove();Infobulle.init()}})});return b};this.affectExportReservation=function(b){var c=this;b.find("#btn-export-resa").click(function(){var d=new GestionCommandeTemplate();var e=d.dialogExportListeReservation;$(e.template(c.mCommande)).dialog({autoOpen:true,modal:true,draggable:false,resizable:false,width:600,buttons:{Exporter:function(){var h="";$(this).find(":input[name=id_produits]:checked").each(function(){h+=$(this).val()+","});h=h.substr(0,h.length-1);var f=$(this).find(":input[name=format]:checked").val();var j=new ExportListeReservationVO();j={pParam:1,export_type:1,id_commande:c.mIdCommande,id_produits:h,format:f};var g=new ExportListeReservationValid();var k=g.validAjout(j);Infobulle.init();if(k.valid){$.download("./index.php?m=GestionCommande&v=EditerCommande",j)}else{Infobulle.generer(k,"")}},Annuler:function(){$(this).dialog("close")}},close:function(f,g){$(this).remove();Infobulle.init()}})});return b};this.construct(a)}function MonCompteVue(a){this.construct=function(b){var c=this;$.post("./index.php?m=MonCompte&v=MonCompte",function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.afficher(d);var e=new CommunVue();e.majMenu("MonCompte","MonCompte")}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(g){var f=this;if(g.adherent.adhId==null){g.adherent.opeMontant=0;g.adherent.adhDateNaissance="0000-00-00";g.adherent.adhDateAdhesion="0000-00-00"}g.opeMontant=g.adherent.opeMontant.nombreFormate(2,","," ");g.sigleMonetaire=gSigleMonetaire;g.adherent.adhDateNaissance=g.adherent.adhDateNaissance.extractDbDate().dateDbToFr();g.adherent.adhDateAdhesion=g.adherent.adhDateAdhesion.extractDbDate().dateDbToFr();$(g.operationPassee).each(function(){if(this.opeDate!=null){this.opeDate=this.opeDate.extractDbDate().dateDbToFr();if(this.tppType==null){this.tppType=""}if(this.opeMontant<0){this.debit=(this.opeMontant*-1).nombreFormate(2,","," ")+" "+gSigleMonetaire;this.credit=""}else{this.debit="";this.credit=this.opeMontant.nombreFormate(2,","," ")+" "+gSigleMonetaire}}});var e=parseFloat(g.adherent.opeMontant);var d=0;$(g.operationAvenir).each(function(){if(this.opeDate!=null){e+=parseFloat(this.opeMontant);this.nouveauSolde=e.nombreFormate(2,","," ");this.rechargement=(0).nombreFormate(2,","," ");var j=5;if(e<j){this.rechargement=(Math.ceil((j-e)/j)*j)-d}d+=this.rechargement;this.rechargement=this.rechargement.nombreFormate(2,","," ");this.opeDate=this.opeDate.extractDbDate().dateDbToFr();this.comDateMarche=this.comDateMarche.extractDbDate().dateDbToFr();this.opeMontant=(this.opeMontant*-1).nombreFormate(2,","," ")}});var c=new MonCompteTemplate();var h=new CommunTemplate();var b=h.debutContenu;b+=c.infoCompteAdherent.template(g.adherent);b+=c.listeOperationAdherentDebut.template(g);b+=c.listeOperationPassee.template(g);if(isArray(g.operationAvenir)&&g.operationAvenir[0].opeLibelle!=null){b+=c.listeOperationAvenir.template(g)}b+=c.listeOperationAdherentFin.template(g);b+=h.finContenu;b=$(b);if(g.adherent.opeMontant<0){b=this.soldeNegatif(b)}if(g.operationPassee.length<11){b=this.masquerPagination(b)}else{b=this.paginnation(b)}$("#contenu").replaceWith(f.affect(b))};this.affect=function(b){b=this.nouveauSoldeNegatif(b);b=this.affectHover(b);b=this.affectEditionInfo(b);b=gCommunVue.comHoverBtn(b);return b};this.paginnation=function(b){b.find("#table-operation").tablesorter({headers:{0:{sorter:false},1:{sorter:false},2:{sorter:false},3:{sorter:false},4:{sorter:false}}}).tablesorterPager({container:b.find("#content-nav-liste-operation"),positionFixed:false});return b};this.nouveauSoldeNegatif=function(b){b.find(".nouveau-solde-val").each(function(){if(parseFloat($(this).text().numberFrToDb())<0){$(this).closest(".nouveau-solde").addClass("com-nombre-negatif")}});return b};this.soldeNegatif=function(b){b.find("#solde").addClass("com-nombre-negatif");return b};this.affectHover=function(b){b.find("#icone-nav-liste-operation-w,#icone-nav-liste-operation-e").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")});return b};this.masquerPagination=function(b){b.find("#content-nav-liste-operation").hide();return b};this.affectEditionInfo=function(b){var c=this;b.find("#btn-edt-info").click(function(){var d=new MonCompteTemplate();var e=d.dialogEditionCompte;var f=$(e).dialog({autoOpen:true,modal:true,draggable:false,resizable:false,width:600,buttons:{Valider:function(){c.changerMotPasse(this)},Annuler:function(){$(this).dialog("close")}},close:function(g,h){$(this).remove()}});f.find(":input").keyup(function(g){if(g.keyCode=="13"){c.changerMotPasse(f)}})});return b};this.changerMotPasse=function(b){var d=new InfoAdherentVO();var c=$("#dialog-edt-info-cpt form");d.motPasse=c.find(":input[name=pass]").val();d.motPasseNouveau=c.find(":input[name=pass_nouveau]").val();d.motPasseConfirm=c.find(":input[name=pass_confirm]").val();var e=new InfoAdherentValid();var f=e.validAjout(d);if(f.valid){$.post("./index.php?m=MonCompte&v=ModifierMonCompte","pParam="+$.toJSON(d),function(h){Infobulle.init();if(h.valid){var j=new TemplateVR();j.valid=false;j.log.valid=false;var g=new VRerreur();g.code=ERR_302_CODE;g.message=ERR_302_MSG;j.log.erreurs.push(g);Infobulle.generer(j,"");$(b).dialog("close")}else{Infobulle.generer(h,"")}},"json")}else{Infobulle.generer(f,"")}};this.construct(a)}function AfficherReservationVue(a){this.mCommunVue=new CommunVue();this.infoCommande=new Object();this.pdtCommande=new Array();this.reservation=new Array();this.reservationModif=new Array();this.construct=function(b){var c=this;$.post("./index.php?m=Commande&v=AfficherReservation","id_commande="+b.id_commande,function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.infoCommande.comId=d.commande[0].comId;c.infoCommande.comNumero=d.commande[0].comNumero;c.infoCommande.comNom=d.commande[0].comNom;c.infoCommande.comDescription=d.commande[0].comDescription;c.infoCommande.dateTimeFinReservation=d.commande[0].comDateFinReservation;c.infoCommande.dateFinReservation=d.commande[0].comDateFinReservation.extractDbDate().dateDbToFr();c.infoCommande.heureFinReservation=d.commande[0].comDateFinReservation.extractDbHeure();c.infoCommande.minuteFinReservation=d.commande[0].comDateFinReservation.extractDbMinute();c.infoCommande.dateMarcheDebut=d.commande[0].comDateMarcheDebut.extractDbDate().dateDbToFr();c.infoCommande.heureMarcheDebut=d.commande[0].comDateMarcheDebut.extractDbHeure();c.infoCommande.minuteMarcheDebut=d.commande[0].comDateMarcheDebut.extractDbMinute();c.infoCommande.heureMarcheFin=d.commande[0].comDateMarcheFin.extractDbHeure();c.infoCommande.minuteMarcheFin=d.commande[0].comDateMarcheFin.extractDbMinute();c.infoCommande.comArchive=d.commande[0].comArchive;$(d.commande).each(function(){var f=new Object();f.dcomId=this.dcomId;f.dcomIdProduit=this.dcomIdProduit;f.dcomTaille=this.dcomTaille;f.dcomPrix=this.dcomPrix;if(c.pdtCommande[this.proId]){c.pdtCommande[this.proId].lot[f.dcomId]=f}else{var e=new Object();e.proId=this.proId;e.proUniteMesure=this.proUniteMesure;e.proMaxProduitCommande=this.proMaxProduitCommande;$(d.stock).each(function(){if(this.proId==e.proId){if(parseFloat(this.stoQuantite)<parseFloat(e.proMaxProduitCommande)){e.proMaxProduitCommande=this.stoQuantite}}});e.nproNom=this.nproNom;e.nproDescription=this.nproDescription;e.nproIdCategorie=this.nproIdCategorie;e.lot=new Array();e.lot[f.dcomId]=f;c.pdtCommande[e.proId]=e}});$(d.reservation).each(function(){this.stoQuantite=this.stoQuantite*-1;c.reservation[this.proId]=this});c.afficher()}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(){this.afficherDetailReservation()};this.afficherDetailReservation=function(){var d=this;var f=new CommandeTemplate();var e=f.mesCommandesDetailReservation;var b=new Object();b.sigleMonetaire=gSigleMonetaire;b.comNumero=this.infoCommande.comNumero;b.dateFinReservation=this.infoCommande.dateFinReservation;b.heureFinReservation=this.infoCommande.heureFinReservation;b.minuteFinReservation=this.infoCommande.minuteFinReservation;b.dateMarcheDebut=this.infoCommande.dateMarcheDebut;b.heureMarcheDebut=this.infoCommande.heureMarcheDebut;b.minuteMarcheDebut=this.infoCommande.minuteMarcheDebut;b.heureMarcheFin=this.infoCommande.heureMarcheFin;b.minuteMarcheFin=this.infoCommande.minuteMarcheFin;b.reservation=new Array();var c=0;$(this.pdtCommande).each(function(){if(d.reservation[this.proId]){var g=new Object;g.nproNom=this.nproNom;g.stoQuantite=parseFloat(d.reservation[this.proId].stoQuantite);g.proUniteMesure=this.proUniteMesure;g.prix=0;var h=d.reservation[this.proId].dcomId;$(this.lot).each(function(){if(this.dcomId==h){g.prix=(g.stoQuantite/this.dcomTaille)*this.dcomPrix}});c+=g.prix;g.stoQuantite=g.stoQuantite.nombreFormate(2,","," ");g.prix=g.prix.nombreFormate(2,","," ");b.reservation.push(g)}});b.total=parseFloat(c).nombreFormate(2,","," ");$("#contenu").replaceWith(d.affect($(e.template(b))))};this.afficherModifier=function(){var d=this;var f=new CommandeTemplate();var e=f.modifierReservation;var b={};b.sigleMonetaire=gSigleMonetaire;b.comNumero=this.infoCommande.comNumero;b.dateFinReservation=this.infoCommande.dateFinReservation;b.heureFinReservation=this.infoCommande.heureFinReservation;b.minuteFinReservation=this.infoCommande.minuteFinReservation;b.dateMarcheDebut=this.infoCommande.dateMarcheDebut;b.heureMarcheDebut=this.infoCommande.heureMarcheDebut;b.minuteMarcheDebut=this.infoCommande.minuteMarcheDebut;b.heureMarcheFin=this.infoCommande.heureMarcheFin;b.minuteMarcheFin=this.infoCommande.minuteMarcheFin;b.produit=new Array();var c=0;$(this.pdtCommande).each(function(){if(this.proId){var g={};g.proId=this.proId;g.nproNom=this.nproNom;g.proMaxProduitCommande=parseFloat(this.proMaxProduitCommande).nombreFormate(2,","," ");g.proUniteMesure=this.proUniteMesure;g.lot=new Array();var j=0;var h=-1;var k=-1;$(this.lot).each(function(){if(this.dcomId){var l={};l.dcomId=this.dcomId;l.dcomTaille=parseFloat(this.dcomTaille).nombreFormate(2,","," ");l.dcomPrix=parseFloat(this.dcomPrix).nombreFormate(2,","," ");l.prixReservation=parseFloat(this.dcomPrix);l.stoQuantiteReservation=parseFloat(this.dcomTaille);if(d.reservation[g.proId]&&(d.reservation[g.proId].dcomId==this.dcomId)){l.stoQuantiteReservation=parseFloat(d.reservation[g.proId].stoQuantite);l.prixReservation=(l.stoQuantiteReservation/this.dcomTaille)*this.dcomPrix;c+=l.prixReservation;h=this.dcomId;l.checked='checked="checked"'}g.prixUnitaire=(l.prixReservation/l.stoQuantiteReservation).nombreFormate(2,","," ");l.stoQuantiteReservation=l.stoQuantiteReservation.nombreFormate(2,","," ");l.prixReservation=l.prixReservation.nombreFormate(2,","," ");g.lot.push(l)}});b.total=parseFloat(c).nombreFormate(2,","," ");if(h!=-1){g.checked='checked="checked"'}else{if(g.lot[0]){g.lot[0].checked='checked="checked"'}}b.produit.push(g)}});this.reservationModif=new Array();$(this.reservation).each(function(){if(this.proId){d.reservationModif[this.proId]={comId:this.comId,proId:this.proId,dcomId:this.dcomId,stoId:this.stoId,stoQuantite:this.stoQuantite,stoType:this.stoType,stoIdCompte:this.stoIdCompte}}});$("#contenu").replaceWith(d.affectModifier($(e.template(b))))};this.affect=function(b){b=this.affectDroitEdition(b);b=this.affectModifierReservation(b);b=this.affectSupprimerReservation(b);b=this.mCommunVue.comHoverBtn(b);return b};this.affectDroitEdition=function(b){if(!dateTimeEstPLusGrandeEgale(this.infoCommande.dateTimeFinReservation,getDateTimeAujourdhuiDb(),"db")){b.find(".boutons-edition").hide()}return b};this.affectModifier=function(b){b=this.affectBtnQte(b);b=this.affectChangementLot(b);b=this.affectChangementProduit(b);b=this.preparerAffichageModifier(b);b=this.affectValiderReservation(b);b=this.affectAnnulerReservation(b);b=this.supprimerSelect(b);b=this.mCommunVue.comHoverBtn(b);b=this.affectInitLot(b);return b};this.affectBtnQte=function(b){var c=this;b.find(".btn-plus").click(function(){var d=$(this).parent().parent().find(".pdt-id").text();c.nouvelleQuantite(d,$(this).parent().parent().find("#lot-"+d).val(),1)});b.find(".btn-moins").click(function(){var d=$(this).parent().parent().find(".pdt-id").text();c.nouvelleQuantite(d,$(this).parent().parent().find("#lot-"+d).val(),-1)});return b};this.affectChangementLot=function(b){var c=this;b.find(".pdt select").change(function(){c.changerLot($(this).parent().parent().find(".pdt-id").text(),$(this).val())});return b};this.affectChangementProduit=function(b){var c=this;b.find(".pdt :checkbox").click(function(){c.changerProduit($(this).parent().parent().find(".pdt-id").text())});return b};this.affectValiderReservation=function(b){var c=this;b.find("#btn-valider").click(function(){c.validerReservation()});return b};this.affectAnnulerReservation=function(b){var c=this;b.find("#btn-annuler").click(function(){c.afficherDetailReservation()});return b};this.affectModifierReservation=function(b){var c=this;b.find("#btn-modifier").click(function(){c.afficherModifier()});return b};this.affectInitLot=function(b){var c=this;b.find(".pdt select").each(function(){var d=$(this).parent().parent().find(".pdt-id").text();var g=$(this).val();var e=c.pdtCommande[d].lot[g].dcomPrix;var h=c.pdtCommande[d].lot[g].dcomTaille;var f=(e/h).nombreFormate(2,","," ");$(b).find("#prix-unitaire-"+d).text(f)});return b};this.nouvelleQuantite=function(f,l,b){var h=this.pdtCommande[f].proMaxProduitCommande;var m=this.pdtCommande[f].lot[l].dcomTaille;var k=this.pdtCommande[f].lot[l].dcomPrix;var d=0;if(this.reservationModif[f]&&(this.reservationModif[f].dcomId==l)){d=this.reservationModif[f].stoQuantite/m}d+=b;var c=0;c=d*m;if(c>0&&c<=h){var e=0;e=d*k;this.reservationModif[f].stoQuantite=c;$("#qte-pdt-"+f).text(parseFloat(c).nombreFormate(2,","," "));$("#prix-pdt-"+f).text(parseFloat(e).nombreFormate(2,","," "));this.majTotal()}else{if(c>h){var g=new TemplateVR();g.valid=false;g.log.valid=false;var j=new VRerreur();j.code=ERR_304_CODE;j.message=ERR_304_MSG;g.log.erreurs.push(j);Infobulle.generer(g,"")}}};this.changerLot=function(b,c){var d=this.pdtCommande[b].lot[c].dcomPrix;var f=this.pdtCommande[b].lot[c].dcomTaille;var e=(d/f).nombreFormate(2,","," ");$("#prix-unitaire-"+b).text(e);if(this.reservationModif[b]){this.reservationModif[b].dcomId=c;this.reservationModif[b].stoQuantite=f;$("#qte-pdt-"+b).text(f.nombreFormate(2,","," "));$("#prix-pdt-"+b).text(d.nombreFormate(2,","," "))}this.majTotal()};this.changerProduit=function(b){if(this.reservationModif[b]!=null){$(".resa-pdt-"+b).hide();$("#qte-pdt-"+b).text("");$("#prix-pdt-"+b).text("");this.reservationModif[b]=null}else{var e=$("#lot-"+b).val();var f=this.pdtCommande[b].lot[e].dcomTaille;var d={};d.comId=this.infoCommande.comId;d.proId=b;d.dcomId=e;d.stoQuantite=f;this.reservationModif[b]=d;$("#qte-pdt-"+b).text(f.nombreFormate(2,","," "));var c=this.pdtCommande[b].lot[e].dcomPrix.nombreFormate(2,","," ");$("#prix-pdt-"+b).text(c);$(".resa-pdt-"+b).show()}this.majTotal()};this.majTotal=function(){$("#total").text(this.calculTotal().nombreFormate(2,","," "))};this.calculTotal=function(){var c=this;var b=0;$(this.reservationModif).each(function(){var d=this;if(d.stoQuantite){if(c.pdtCommande[d.proId]){$(c.pdtCommande[d.proId].lot).each(function(){if(d.dcomId==this.dcomId){b+=(d.stoQuantite/this.dcomTaille)*this.dcomPrix}})}}});return b};this.preparerAffichageModifier=function(b){var c=this;$(b).find(".pdt").each(function(){var d=$(this).find(".pdt-id").text();if(c.reservation[d]!=null){var g=c.reservation[d];var f=g.dcomId;var h=g.stoQuantite;$(b).find("#qte-pdt-"+d).text(h.nombreFormate(2,","," "));var e=((c.pdtCommande[d].lot[f].dcomPrix*g.stoQuantite)/c.pdtCommande[d].lot[f].dcomTaille).nombreFormate(2,","," ");$(b).find("#prix-pdt-"+d).text(e);$(b).find("#lot-"+d).selectOptions(f);$(b).find(".resa-pdt-"+d).show()}});return b};this.validerReservation=function(){var e=this;Infobulle.init();var c=new ListeReservationCommandeVO();var f=0;$(this.reservationModif).each(function(){if(this.stoQuantite){var h=new ReservationCommandeVO();h.id="";h.stoQuantite=this.stoQuantite*-1;h.stoIdDetailCommande=this.dcomId;c.commandes.push(h);f++}});if(f>0){var d=new ListeReservationCommandeValid();var g=d.validAjout(c);if(!g.valid){Infobulle.generer(g,"")}else{$.post("./index.php?m=Commande&v=AfficherReservation","reservation="+$.toJSON(c),function(h){Infobulle.init();if(h.valid){e.reservation=new Array();$(e.reservationModif).each(function(){if(this.proId){e.reservation[this.proId]={comId:this.comId,proId:this.proId,dcomId:this.dcomId,stoId:this.stoId,stoQuantite:this.stoQuantite,stoType:this.stoType,stoIdCompte:this.stoIdCompte}}});e.afficher()}else{Infobulle.generer(h,"")}},"json")}}else{var g=new TemplateVR();g.valid=false;g.log.valid=false;var b=new VRerreur();b.code=ERR_207_CODE;b.message=ERR_207_MSG;g.log.erreurs.push(b);Infobulle.generer(g,"")}};this.affectSupprimerReservation=function(b){var c=this;b.find("#btn-supprimer").click(function(){var e=new CommandeTemplate();var d=e.supprimerReservationDialog;$(d).dialog({autoOpen:true,modal:true,draggable:false,resizable:false,width:600,buttons:{Supprimer:function(){var f={id_commande:c.infoCommande.comId,fonction:"supprimerReservation"};var g=this;$.post("./index.php?m=Commande&v=SupprimerReservation","pParam="+$.toJSON(f),function(j){Infobulle.init();if(j.valid){var k=new TemplateVR();k.valid=false;k.log.valid=false;var h=new VRerreur();h.code=ERR_303_CODE;h.message=ERR_303_MSG;k.log.erreurs.push(h);ListeReservationVue({vr:k});$(g).dialog("close")}else{Infobulle.generer(j,"")}},"json")},Annuler:function(){$(this).dialog("close")}},close:function(f,g){$(this).remove()}})});return b};this.supprimerSelect=function(b){b.find(".pdt select").each(function(){if($(this).find("option").size()==1){var e=new CommandeTemplate();var d=e.lotUnique;var c={};c.IdPdt=$(this).parent().parent().find(".pdt-id").text();c.valeur=$(this).val();c.text=$(this).text();$(this).replaceWith(d.template(c))}});return b};this.construct(a)}function ListeReservationVue(a){this.construct=function(b){var c=this;$.post("./index.php?m=Commande&v=ListeReservation",function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.afficher(d);var e=new CommunVue();e.majMenu("Commande","MesCommandes")}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(c){var b=this;var e=new Object;e.reservation=new Array();$(c.reservations).each(function(){if(this.comNumero!=null){var g=new Object();g.numero=this.comNumero;g.dateFinReservation=this.comDateFinReservation.extractDbDate().dateDbToFr();g.heureFinReservation=this.comDateFinReservation.extractDbHeure();g.minuteFinReservation=this.comDateFinReservation.extractDbMinute();g.dateMarcheDebut=this.comDateMarcheDebut.extractDbDate().dateDbToFr();g.heureMarcheDebut=this.comDateMarcheDebut.extractDbHeure();g.minuteMarcheDebut=this.comDateMarcheDebut.extractDbMinute();g.heureMarcheFin=this.comDateMarcheFin.extractDbHeure();g.minuteMarcheFin=this.comDateMarcheFin.extractDbMinute();g.idCommande='"'+this.comId+'"';e.reservation.push(g)}});var f=new CommandeTemplate();if(e.reservation.length>0){var d=f.listeReservation}else{var d=f.listeReservationVide}$("#contenu").replaceWith(b.affect($(d.template(e))))};this.affect=function(b){b=this.affectVisualiser(b);return b};this.affectVisualiser=function(b){b.find(".visualiser-reservation").click(function(){AfficherReservationVue({id_commande:$(this).attr("id")})});return b};this.construct(a)}function ListeCommandeVue(a){this.mCommunVue=new CommunVue();this.construct=function(b){var c=this;$.post("./index.php?m=Commande&v=ListeCommande",function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.afficher(d);var e=new CommunVue();e.majMenu("Commande","ListeCommande")}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(c){Infobulle.init();if(c.listeCommande[0]&&c.listeCommande[0].comDateFinReservation!=null){var b=this;var d=new Object;d.commande=new Array();$(c.listeCommande).each(function(){var g=new Object();g.id=this.comId;g.numero=this.comNumero;g.dateFinReservation=this.comDateFinReservation.extractDbDate().dateDbToFr();g.heureFinReservation=this.comDateFinReservation.extractDbHeure();g.minuteFinReservation=this.comDateFinReservation.extractDbMinute();g.dateMarcheDebut=this.comDateMarcheDebut.extractDbDate().dateDbToFr();g.heureMarcheDebut=this.comDateMarcheDebut.extractDbHeure();g.minuteMarcheDebut=this.comDateMarcheDebut.extractDbMinute();g.heureMarcheFin=this.comDateMarcheFin.extractDbHeure();g.minuteMarcheFin=this.comDateMarcheFin.extractDbMinute();d.commande.push(g)});var f=new CommandeTemplate();var e=f.listeCommandePage;$("#contenu").replaceWith(b.affect($(e.template(d))))}else{var f=new CommandeTemplate();$("#contenu").replaceWith(f.listeCommandeVide)}};this.affect=function(b){b=this.affectBtnCommander(b);b=this.mCommunVue.comHoverBtn(b);return b};this.affectBtnCommander=function(b){b.find(".btn-commander").click(function(){var c={id_commande:$(this).attr("id")};ReservationCommandeVue(c)});return b};this.construct(a)}function ReservationCommandeVue(a){this.mCommunVue=new CommunVue();this.infoCommande=new Object();this.pdtCommande=new Array();this.reservation=new Array();this.solde=0;this.soldeNv=0;this.construct=function(b){var c=this;$.post("./index.php?m=Commande&v=ReservationCommande","pParam="+$.toJSON(b),function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.solde=d.adherent.opeMontant;c.soldeNv=d.adherent.opeMontant;c.infoCommande.comId=d.commande[0].comId;c.infoCommande.comNumero=d.commande[0].comNumero;c.infoCommande.comNom=d.commande[0].comNom;c.infoCommande.comDescription=d.commande[0].comDescription;c.infoCommande.dateTimeFinReservation=d.commande[0].comDateFinReservation;c.infoCommande.dateFinReservation=d.commande[0].comDateFinReservation.extractDbDate().dateDbToFr();c.infoCommande.heureFinReservation=d.commande[0].comDateFinReservation.extractDbHeure();c.infoCommande.minuteFinReservation=d.commande[0].comDateFinReservation.extractDbMinute();c.infoCommande.dateMarcheDebut=d.commande[0].comDateMarcheDebut.extractDbDate().dateDbToFr();c.infoCommande.heureMarcheDebut=d.commande[0].comDateMarcheDebut.extractDbHeure();c.infoCommande.minuteMarcheDebut=d.commande[0].comDateMarcheDebut.extractDbMinute();c.infoCommande.heureMarcheFin=d.commande[0].comDateMarcheFin.extractDbHeure();c.infoCommande.minuteMarcheFin=d.commande[0].comDateMarcheFin.extractDbMinute();c.infoCommande.comArchive=d.commande[0].comArchive;$(d.commande).each(function(){var f=new Object();f.dcomId=this.dcomId;f.dcomIdProduit=this.dcomIdProduit;f.dcomTaille=this.dcomTaille;f.dcomPrix=this.dcomPrix;if(c.pdtCommande[this.proId]){c.pdtCommande[this.proId].lot[f.dcomId]=f}else{var e=new Object();e.proId=this.proId;e.proUniteMesure=this.proUniteMesure;e.proMaxProduitCommande=this.proMaxProduitCommande;$(d.stock).each(function(){if(this.proId==e.proId){if(parseFloat(this.stoQuantite)<parseFloat(e.proMaxProduitCommande)){e.proMaxProduitCommande=this.stoQuantite}}});e.nproNom=this.nproNom;e.nproDescription=this.nproDescription;e.nproIdCategorie=this.nproIdCategorie;e.lot=new Array();e.lot[f.dcomId]=f;c.pdtCommande[e.proId]=e}});c.afficher()}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(){this.afficherReservation()};this.afficherDetailCommande=function(){var d=this;var f=new CommandeTemplate();var e=f.detailReservation;var b=new Object();b.sigleMonetaire=gSigleMonetaire;b.solde=this.solde.nombreFormate(2,","," ");b.soldeNv=this.soldeNv.nombreFormate(2,","," ");b.comNumero=this.infoCommande.comNumero;b.dateFinReservation=this.infoCommande.dateFinReservation;b.heureFinReservation=this.infoCommande.heureFinReservation;b.minuteFinReservation=this.infoCommande.minuteFinReservation;b.dateMarcheDebut=this.infoCommande.dateMarcheDebut;b.heureMarcheDebut=this.infoCommande.heureMarcheDebut;b.minuteMarcheDebut=this.infoCommande.minuteMarcheDebut;b.heureMarcheFin=this.infoCommande.heureMarcheFin;b.minuteMarcheFin=this.infoCommande.minuteMarcheFin;b.reservation=new Array();var c=0;$(this.pdtCommande).each(function(){if(d.reservation[this.proId]){var g=new Object;g.nproNom=this.nproNom;g.stoQuantite=parseFloat(d.reservation[this.proId].stoQuantite);g.proUniteMesure=this.proUniteMesure;g.prix=0;var h=d.reservation[this.proId].dcomId;$(this.lot).each(function(){if(this.dcomId==h){g.prix=(g.stoQuantite/this.dcomTaille)*this.dcomPrix}});c+=g.prix;g.stoQuantite=g.stoQuantite.nombreFormate(2,","," ");g.prix=g.prix.nombreFormate(2,","," ");b.reservation.push(g)}});b.total=parseFloat(c).nombreFormate(2,","," ");$("#contenu").replaceWith(d.affect($(e.template(b))));this.majNouveauSolde()};this.afficherReservation=function(){var d=this;var f=new CommandeTemplate();var e=f.reservation;var b={};b.sigleMonetaire=gSigleMonetaire;b.solde=this.solde.nombreFormate(2,","," ");b.soldeNv=this.soldeNv.nombreFormate(2,","," ");b.comNumero=this.infoCommande.comNumero;b.dateFinReservation=this.infoCommande.dateFinReservation;b.heureFinReservation=this.infoCommande.heureFinReservation;b.minuteFinReservation=this.infoCommande.minuteFinReservation;b.dateMarcheDebut=this.infoCommande.dateMarcheDebut;b.heureMarcheDebut=this.infoCommande.heureMarcheDebut;b.minuteMarcheDebut=this.infoCommande.minuteMarcheDebut;b.heureMarcheFin=this.infoCommande.heureMarcheFin;b.minuteMarcheFin=this.infoCommande.minuteMarcheFin;b.produit=new Array();var c=0;$(this.pdtCommande).each(function(){if(this.proId){var g={};g.proId=this.proId;g.nproNom=this.nproNom;g.proMaxProduitCommande=parseFloat(this.proMaxProduitCommande).nombreFormate(2,","," ");g.proUniteMesure=this.proUniteMesure;g.lot=new Array();var j=0;var h=-1;var k=-1;$(this.lot).each(function(){if(this.dcomId){var l={};l.dcomId=this.dcomId;l.dcomTaille=parseFloat(this.dcomTaille).nombreFormate(2,","," ");l.dcomPrix=parseFloat(this.dcomPrix).nombreFormate(2,","," ");l.prixReservation=parseFloat(this.dcomPrix);l.stoQuantiteReservation=parseFloat(this.dcomTaille);if(d.reservation[g.proId]&&(d.reservation[g.proId].dcomId==this.dcomId)){l.stoQuantiteReservation=parseFloat(d.reservation[g.proId].stoQuantite);l.prixReservation=(l.stoQuantiteReservation/this.dcomTaille)*this.dcomPrix;c+=l.prixReservation;h=this.dcomId;l.checked='checked="checked"'}g.prixUnitaire=(l.prixReservation/l.stoQuantiteReservation).nombreFormate(2,","," ");g.stoQuantiteReservation=l.stoQuantiteReservation.nombreFormate(2,","," ");g.prixReservation=l.prixReservation.nombreFormate(2,","," ");g.lot.push(l)}});b.total=parseFloat(c).nombreFormate(2,","," ");if(h!=-1){g.checked='checked="checked"'}else{if(g.lot[0]){g.lot[0].checked='checked="checked"'}}b.produit.push(g)}});$("#contenu").replaceWith(d.affectModifier($(e.template(b))));this.majNouveauSolde()};this.affect=function(b){b=this.affectDroitEdition(b);b=this.affectModifierReservation(b);b=this.affectValiderReservation(b);b=this.mCommunVue.comHoverBtn(b);return b};this.affectDroitEdition=function(b){if(!dateTimeEstPLusGrandeEgale(this.infoCommande.dateTimeFinReservation,getDateTimeAujourdhuiDb(),"db")){b.find(".boutons-edition").hide()}return b};this.affectModifier=function(b){b=this.affectBtnQte(b);b=this.preparerAffichageModifier(b);b=this.affectChangementLot(b);b=this.affectChangementProduit(b);b=this.affectDetailReservation(b);b=this.supprimerSelect(b);b=this.mCommunVue.comHoverBtn(b);b=this.affectInitLot(b);return b};this.affectBtnQte=function(b){var c=this;b.find(".btn-plus").click(function(){var d=$(this).parent().parent().find(".pdt-id").text();c.nouvelleQuantite(d,$(this).parent().parent().find("#lot-"+d).val(),1)});b.find(".btn-moins").click(function(){var d=$(this).parent().parent().find(".pdt-id").text();c.nouvelleQuantite(d,$(this).parent().parent().find("#lot-"+d).val(),-1)});return b};this.affectInitLot=function(b){var c=this;b.find(".pdt select").each(function(){var d=$(this).parent().parent().find(".pdt-id").text();var g=$(this).val();var e=c.pdtCommande[d].lot[g].dcomPrix;var h=c.pdtCommande[d].lot[g].dcomTaille;var f=(e/h).nombreFormate(2,","," ");$(b).find("#prix-unitaire-"+d).text(f)});return b};this.affectChangementLot=function(b){var c=this;b.find(".pdt select").change(function(){c.changerLot($(this).parent().parent().find(".pdt-id").text(),$(this).val())});return b};this.affectChangementProduit=function(b){var c=this;b.find(".pdt :checkbox").click(function(){c.changerProduit($(this).parent().parent().find(".pdt-id").text())});return b};this.affectModifierReservation=function(b){var c=this;b.find("#btn-modifier").click(function(){c.afficherReservation()});return b};this.affectDetailReservation=function(b){var c=this;b.find("#btn-valider").click(function(){c.validerReservation()});return b};this.affectValiderReservation=function(b){var c=this;b.find("#btn-valider").click(function(){c.enregistrerReservation()});return b};this.nouvelleQuantite=function(f,l,b){var h=this.pdtCommande[f].proMaxProduitCommande;var m=this.pdtCommande[f].lot[l].dcomTaille;var k=this.pdtCommande[f].lot[l].dcomPrix;var d=0;if(this.reservation[f]&&(this.reservation[f].dcomId==l)){d=this.reservation[f].stoQuantite/m}d+=b;var c=0;c=d*m;if(c>0&&c<=h){var e=0;e=d*k;this.reservation[f].stoQuantite=c;$("#qte-pdt-"+f).text(parseFloat(c).nombreFormate(2,","," "));$("#prix-pdt-"+f).text(parseFloat(e).nombreFormate(2,","," "));this.majTotal()}else{if(c>h){var g=new TemplateVR();g.valid=false;g.log.valid=false;var j=new VRerreur();j.code=ERR_304_CODE;j.message=ERR_304_MSG;g.log.erreurs.push(j);Infobulle.generer(g,"")}}};this.changerLot=function(b,c){var d=this.pdtCommande[b].lot[c].dcomPrix;var f=this.pdtCommande[b].lot[c].dcomTaille;var e=(d/f).nombreFormate(2,","," ");$("#prix-unitaire-"+b).text(e);if(this.reservation[b]){this.reservation[b].dcomId=c;this.reservation[b].stoQuantite=f;$("#qte-pdt-"+b).text(f.nombreFormate(2,","," "));$("#prix-pdt-"+b).text(d.nombreFormate(2,","," "))}this.majTotal()};this.changerProduit=function(b){if(this.reservation[b]!=null){$(".resa-pdt-"+b).hide();$("#qte-pdt-"+b).text("");$("#prix-pdt-"+b).text("");this.reservation[b]=null}else{var e=$("#lot-"+b).val();var f=this.pdtCommande[b].lot[e].dcomTaille;var d={};d.comId=this.infoCommande.comId;d.proId=b;d.dcomId=e;d.stoQuantite=f;this.reservation[b]=d;$("#qte-pdt-"+b).text(f.nombreFormate(2,","," "));var c=this.pdtCommande[b].lot[e].dcomPrix.nombreFormate(2,","," ");$("#prix-pdt-"+b).text(c);$(".resa-pdt-"+b).show()}this.majTotal()};this.majTotal=function(){var b=this.calculTotal();$("#total").text(b.nombreFormate(2,","," "));this.soldeNv=this.solde-b;this.majNouveauSolde();$("#nouveau-solde").text(this.soldeNv.nombreFormate(2,","," "))};this.majNouveauSolde=function(){if(this.soldeNv<=0){$("#nouveau-solde, #nouveau-solde-sigle").addClass("com-nombre-negatif")}else{$("#nouveau-solde, #nouveau-solde-sigle").removeClass("com-nombre-negatif")}};this.calculTotal=function(){var c=this;var b=0;$(this.reservation).each(function(){var d=this;if(d.stoQuantite){if(c.pdtCommande[d.proId]){$(c.pdtCommande[d.proId].lot).each(function(){if(d.dcomId==this.dcomId){b+=(d.stoQuantite/this.dcomTaille)*this.dcomPrix}})}}});return b};this.preparerAffichageModifier=function(b){var c=this;$(b).find(".pdt").each(function(){var d=$(this).find(".pdt-id").text();if(c.reservation[d]!=null){var g=c.reservation[d];var f=g.dcomId;var h=g.stoQuantite;$(b).find("#qte-pdt-"+d).text(h.nombreFormate(2,","," "));var e=((c.pdtCommande[d].lot[f].dcomPrix*g.stoQuantite)/c.pdtCommande[d].lot[f].dcomTaille).nombreFormate(2,","," ");$(b).find("#prix-pdt-"+d).text(e);$(b).find("#lot-"+d).selectOptions(f);$(b).find(".resa-pdt-"+d).show()}});return b};this.validerReservation=function(){Infobulle.init();var b=this.genererListeReservation();var c=this.verifierReservation(b);if(c.valid){this.afficherDetailCommande()}else{Infobulle.generer(c,"")}};this.enregistrerReservation=function(){Infobulle.init();var c=this;var b=this.genererListeReservation();var d=this.verifierReservation(b);if(d.valid){$.post("./index.php?m=Commande&v=ReservationCommande","reservation="+$.toJSON(b),function(e){Infobulle.init();if(e.valid){c.afficherRetour()}else{Infobulle.generer(e,"")}},"json")}else{Infobulle.generer(d,"")}};this.genererListeReservation=function(){var b=new ListeReservationCommandeVO();$(this.reservation).each(function(){if(this.stoQuantite){var c=new ReservationCommandeVO();c.id="";c.stoQuantite=this.stoQuantite*-1;c.stoIdDetailCommande=this.dcomId;b.commandes.push(c)}});return b};this.verifierReservation=function(d){if($(d.commandes).length>0){var c=new ListeReservationCommandeValid();var e=c.validAjout(d)}else{var e=new TemplateVR();e.valid=false;e.log.valid=false;var b=new VRerreur();b.code=ERR_207_CODE;b.message=ERR_207_MSG;e.log.erreurs.push(b)}return e};this.afficherRetour=function(){var b=new CommandeTemplate();$("#contenu").replaceWith(b.reservationOk)};this.supprimerSelect=function(b){b.find(".pdt select").each(function(){if($(this).find("option").size()==1){var e=new CommandeTemplate();var d=e.lotUnique;var c={};c.IdPdt=$(this).parent().parent().find(".pdt-id").text();c.valeur=$(this).val();c.text=$(this).text();$(this).replaceWith(d.template(c))}});return b};this.construct(a)};