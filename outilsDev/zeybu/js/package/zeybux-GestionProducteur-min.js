function GestionProducteurTemplate(){this.formulaireAjoutProducteur='<div id="contenu"><div id="formulaire_ajout_producteur"><form><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Information du producteur</div><div class="com-widget-content"><table class="com-table-form"><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Nom *</th><td class="com-table-form-td"><input type="hidden" name="{NAME_ID}" value="{VALUE_ID}" /><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="nom" value="{nom}" maxlength="50" id="nom"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Prénom *</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="prenom" value="{prenom}" maxlength="50" id="prenom"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Date de Naissance (jj/mm/aaaa)</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="date_naissance" value="{dateNaissance}" maxlength="10" id="dateNaissance"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Lier un compte<input type="checkbox" name="lien_numero_compte" /></th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="numero_compte" value="{compte}" maxlength="5" disabled="disabled" id="compte"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Commentaire</th><td class="com-table-form-td"><textarea class="com-input-text ui-widget-content ui-corner-all" name="commentaire" id="commentaire">{commentaire}</textarea></td></tr></table></div></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Coordonnées du producteur</div><div class="com-widget-content"><table class="com-table-form"><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Courriel Principal</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="courriel_principal" value="{courrielPrincipal}" maxlength="100" id="courrielPrincipal"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Courriel Secondaire</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" ype="text" name="courriel_secondaire" value="{courrielSecondaire}" maxlength="100" id="courrielSecondaire"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Téléphone Principal</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="telephone_principal" value="{telephonePrincipal}" maxlength="20" id="telephonePrincipal"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Téléphone Secondaire</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="telephone_secondaire" value="{telephoneSecondaire}" maxlength="20" id="telephoneSecondaire"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Adresse</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="adresse" value="{adresse}" maxlength="300" id="adresse"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Code Postal</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="code_postal" value="{codePostal}" maxlength="10" id="codePostal"/></td></tr><tr><th class="com-table-form-th ui-widget-content ui-corner-all">Ville</th><td class="com-table-form-td"><input class="com-input-text ui-widget-content ui-corner-all" type="text" name="ville" value="{ville}" maxlength="100" id="ville"/></td></tr><tr><td colspan="2" class="com-center com-ligne-submit"><input class="ui-state-default ui-corner-all com-button com-center" type="submit" value="Valider" /></td></tr></table></div></div></form></div></div>';this.ajoutProducteurSucces='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Nouveau Producteur</div><div class="com-widget-content"><p class="com-msg-confirm-icon" ><span class="com-float-left ui-icon ui-icon-check"></span>Le producteur {numero} a été ajouté avec succès.</p></div></div></div>';this.modifierProducteurSucces='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Modification d\'un Producteur</div><div class="com-widget-content"><p class="com-msg-confirm-icon" ><span class="com-float-left ui-icon ui-icon-check"></span>Le producteur {numero} a été mis à jour avec succès.</p></div></div></div>';this.supprimerProducteurSucces='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Suppression d\'un Producteur</div><div class="com-widget-content"><p class="com-msg-confirm-icon" ><span class="com-float-left ui-icon ui-icon-check"></span>Le producteur {numero} a été supprimé avec succès.</p></div></div></div>';this.listeProducteur='<div id="contenu"><div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Les Producteurs</div><div id="liste-adh-recherche" class="recherche com-widget-header ui-widget ui-widget-header ui-corner-all"><form id="filter-form"><div><span class="conteneur-icon com-float-left ui-widget-content ui-corner-left" title="Chercher"><span class="ui-icon ui-icon-search"></span></span><input class="com-input-text ui-widget-content ui-corner-right" name="filter" id="filter" value="" maxlength="30" size="15" type="text" /></div></form></div><table class="com-table"><thead><tr class="ui-widget ui-widget-header"><th class="com-table-th com-underline-hover liste-adh-th-num com-cursor-pointer"><span class="ui-icon span-icon"></span>N°</th><th class="com-table-th com-underline-hover liste-adh-th-nom com-cursor-pointer"><span class="ui-icon span-icon"></span>Nom</th><th class="com-table-th com-underline-hover liste-adh-th-nom com-cursor-pointer"><span class="ui-icon span-icon"></span>Prénom</th><th class="com-table-th com-underline-hover com-cursor-pointer"><span class="ui-icon span-icon"></span>Courriel</th><th class="com-table-th com-underline-hover com-cursor-pointer"><span class="ui-icon span-icon"></span>Téléphone</th></tr></thead><tbody><!-- BEGIN listeProducteur --><tr class="com-cursor-pointer compte-ligne" ><td class="com-table-td com-underline-hover"><span class="ui-helper-hidden id-producteur">{listeProducteur.prdtId}</span>{listeProducteur.prdtNumero}</td><td class="com-table-td com-underline-hover">{listeProducteur.prdtNom}</td><td class="com-table-td com-underline-hover">{listeProducteur.prdtPrenom}</td><td class="com-table-td com-underline-hover">{listeProducteur.prdtCourrielPrincipal}</td><td class="com-table-td com-underline-hover">{listeProducteur.prdtTelephonePrincipal}</td></tr><!-- END listeProducteur --></tbody></table></div></div></div></div>';this.listeProducteurVide='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Les Producteurs</div><p id="texte-liste-vide">Aucun producteur dans la base.</p></div></div>';this.dialogSuppressionProducteur='<div id="dialog-supp-prdt" title="Supprimer le producteur {prdtNumero}"><p class="ui-state-error ui-corner-all"><span class="ui-icon ui-icon-alert com-float-left"></span>ATTENTION : Voulez-vous réellement supprimer le producteur : {prdtNumero}</p></div>';this.infoCompteProducteur='<div id="info_compte_solde_adherent_ext"><div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Informations<span class="com-btn-header-multiples ui-widget-content ui-corner-all com-cursor-pointer" id="btn-supp" title="Supprimer"><span class="ui-icon ui-icon-trash"></span></span><span class="com-btn-header-multiples ui-widget-content ui-corner-all com-cursor-pointer" id="btn-edt" title="Modifier"><span class="ui-icon ui-icon-pencil"></span></span></div><div class="com-widget-content"><div>Numéro du producteur : {prdtNumero}</div><div>Numéro de Compte : {cptLabel}</div><div>Nom : {prdtNom}</div><div>Prénom : {prdtPrenom}</div><div>Date de naissance : {prdtDateNaissance}</div><div>Commentaire : {prdtCommentaire}</div></div></div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Coordonnées</div><div class="com-widget-content"><div>Courriel Principal : {prdtCourrielPrincipal}</div><div>Courriel Secondaire : {prdtCourrielSecondaire}</div><div>Téléphone Principal : {prdtTelephonePrincipal}</div><div>Téléphone Secondaire : {prdtTelephoneSecondaire}</div><div>Adresse : {prdtAdresse}</div><div>Ville : {prdtVille}</div><div>Code Postal : {prdtCodePostal}</div></div></div></div></div>';this.listeOperationProducteur='<div id="liste_operation_adherent_ext"><div><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Liste des Opérations</span></div>	<div><div id="content-nav-liste-operation" class="ui-helper-clearfix ui-state-default ui-corner-all"><form>	<span id="icone-nav-liste-operation-w" class="prev ui-helper-hidden ui-state-default ui-corner-all com-button" ><span class="ui-icon ui-icon-circle-arrow-w"></span></span>	<span id="page-compteur">Page : <span type="text" class="pagedisplay"></span></span>	<span id="icone-nav-liste-operation-e" class="next ui-state-default ui-corner-all com-button" ><span class="ui-icon ui-icon-circle-arrow-e"></span></span>	<input type="hidden" class="pagesize" value="10"></form></div><table id="table-operation" class="com-table"><thead><tr class="ui-widget ui-widget-header" ><th class="com-table-th">Date</th><th class="com-table-th">Libellé</th><th class="com-table-th">Type de paiement</th><th class="com-table-th">Débit</th><th class="com-table-th">Crédit</th></tr></thead><tbody><!-- BEGIN operationPassee --><tr><td class="com-table-td td-date ">{operationPassee.opeDate}</td><td class="com-table-td td-libelle">{operationPassee.opeLibelle}</td><td class="com-table-td td-type-paiement">{operationPassee.tppType}</td><td class="com-table-td td-montant">{operationPassee.debit}</td><td class="com-table-td td-montant">{operationPassee.credit}</td></tr><!-- END operationPassee --></tbody></table></div></div>';"</div></div>"}function ListeProducteurVue(a){this.construct=function(b){var c=this;$.post("./index.php?m=GestionProducteur&v=ListeProducteur",function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.afficher(d)}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(d){var c=this;var b=new GestionProducteurTemplate();if(d.listeProducteur.length>0&&d.listeProducteur[0].prdtId!=null){var e=b.listeProducteur;$("#contenu").replaceWith(c.affect($(e.template(d))))}else{$("#contenu").replaceWith(b.listeProducteurVide)}};this.affect=function(b){b=this.affectTri(b);b=this.affectRecherche(b);b=this.affectLienCompte(b);return b};this.affectTri=function(b){b.find(".com-table").tablesorter({sortList:[[0,0]]});return b};this.affectRecherche=function(b){b.find("#filter").keyup(function(){$.uiTableFilter($(".com-table"),this.value)});b.find("#filter-form").submit(function(){return false});return b};this.affectLienCompte=function(b){var c=this;b.find(".compte-ligne").click(function(){CompteProducteurVue({id_producteur:$(this).find(".id-producteur").text()})});return b};this.construct(a)}function CompteProducteurVue(a){this.mIdProducteur=null;this.mPrdtNumero=null;this.construct=function(b){var c=this;$.post("./index.php?m=GestionProducteur&v=CompteProducteur","pParam="+$.toJSON(b),function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.afficher(d)}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(e){var d=this;this.mIdProducteur=e.producteur.prdtId;this.mPrdtNumero=e.producteur.prdtNumero;e.producteur.prdtDateNaissance=e.producteur.prdtDateNaissance.extractDbDate().dateDbToFr();$(e.operationPassee).each(function(){this.opeDate=this.opeDate.extractDbDate().dateDbToFr();if(this.tppType==null){this.tppType=""}if(this.opeMontant<0){this.credit=(this.opeMontant*-1).nombreFormate(2,","," ")+" "+gSigleMonetaire;this.debit=""}else{this.credit="";this.debit=this.opeMontant.nombreFormate(2,","," ")+" "+gSigleMonetaire}});var c=new GestionProducteurTemplate();var f=new CommunTemplate();var b=f.debutContenu;b+=c.infoCompteProducteur.template(e.producteur);b+=c.listeOperationProducteur.template(e);b+=f.finContenu;b=$(b);if(e.operationPassee.length<11){b=this.masquerPagination(b)}else{b=this.paginnation(b)}$("#contenu").replaceWith(d.affect(b))};this.affect=function(b){b=this.affectHover(b);b=this.affectLienModifier(b);b=this.affectDialogSuppProducteur(b);b=gCommunVue.comHoverBtn(b);return b};this.paginnation=function(b){b.find("#table-operation").tablesorter({headers:{0:{sorter:false},1:{sorter:false},2:{sorter:false},3:{sorter:false},4:{sorter:false}}}).tablesorterPager({container:b.find("#content-nav-liste-operation"),positionFixed:false});return b};this.masquerPagination=function(b){b.find("#content-nav-liste-operation").hide();return b};this.affectHover=function(b){b.find("#icone-nav-liste-operation-w,#icone-nav-liste-operation-e").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")});return b};this.affectLienModifier=function(b){var c=this;b.find("#btn-edt").click(function(){ModificationProducteurVue({id_producteur:c.mIdProducteur})});return b};this.affectDialogSuppProducteur=function(b){var c=this;b.find("#btn-supp").click(function(){var d=new GestionProducteurTemplate();var e=d.dialogSuppressionProducteur;$(e.template({prdtNumero:c.mPrdtNumero})).dialog({autoOpen:true,modal:true,draggable:false,resizable:false,width:600,buttons:{Supprimer:function(){var f={id_producteur:c.mIdProducteur};var g=this;$.post("./index.php?m=GestionProducteur&v=SuppressionProducteur","pParam="+$.toJSON(f),function(i){Infobulle.init();if(i.valid){var h=new GestionProducteurTemplate();var j=h.supprimerProducteurSucces;$("#contenu").replaceWith(j.template(i));$(g).dialog("close")}else{Infobulle.generer(i,"")}},"json")},Annuler:function(){$(this).dialog("close")}},close:function(f,g){$(this).remove()}})});return b};this.construct(a)}function ModificationProducteurVue(a){this.mCommunVue=new CommunVue();this.mIdProducteur=null;this.construct=function(b){var c=this;$.post("./index.php?m=GestionProducteur&v=ModificationProducteur","pParam="+$.toJSON(b),function(d){Infobulle.init();if(d.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.mIdProducteur=b.id_producteur;c.afficher(d)}else{Infobulle.generer(d,"")}},"json")};this.afficher=function(e){var d=this;e.dateNaissance=e.dateNaissance.extractDbDate().dateDbToFr();var c=new GestionProducteurTemplate();var f=c.formulaireAjoutProducteur;var b=f.template(e);$("#contenu").replaceWith(d.affect($(f.template(e))))};this.affect=function(b){b=this.boutonLienCompte(b);b=this.mCommunVue.comNumeric(b);b=this.affectControleDatepicker(b);b=this.affectSubmit(b);b=this.mCommunVue.comHoverBtn(b);return b};this.boutonLienCompte=function(b){b.find(":input[name=lien_numero_compte]").click(function(){if(b.find(":input[name=numero_compte]").attr("disabled")){b.find(":input[name=numero_compte]").removeAttr("disabled")}else{b.find(":input[name=numero_compte]").attr("disabled","disabled")}});return b};this.affectControleDatepicker=function(b){b=this.mCommunVue.comDatepicker("dateNaissance",b);return b};this.affectSubmit=function(b){var c=this;b.find("form").submit(function(){c.modifProducteur();return false});return b};this.modifProducteur=function(){var b=new ProducteurVO();b.id=this.mIdProducteur;b.nom=$(":input[name=nom]").val();b.prenom=$(":input[name=prenom]").val();b.dateNaissance=$(":input[name=date_naissance]").val().dateFrToDb();b.compte=$(":input[name=numero_compte]").val();b.commentaire=$(":input[name=commentaire]").val();b.courrielPrincipal=$(":input[name=courriel_principal]").val();b.courrielSecondaire=$(":input[name=courriel_secondaire]").val();b.telephonePrincipal=$(":input[name=telephone_principal]").val();b.telephoneSecondaire=$(":input[name=telephone_secondaire]").val();b.adresse=$(":input[name=adresse]").val();b.codePostal=$(":input[name=code_postal]").val();b.ville=$(":input[name=ville]").val();var c=new ProducteurValid();var d=c.validUpdate(b);if(d.valid){Infobulle.init();$.post("./index.php?m=GestionProducteur&v=ModificationProducteur","pParam="+$.toJSON(b),function(f){Infobulle.init();if(f.valid){var e=new GestionProducteurTemplate();var g=e.modifierProducteurSucces;$("#contenu").replaceWith(g.template(f))}else{Infobulle.generer(f,"")}},"json")}else{Infobulle.generer(d,"")}};this.construct(a)}function AjoutProducteurVue(a){this.mCommunVue=new CommunVue();this.construct=function(b){if(b&&b.vr){Infobulle.generer(b.vr,"")}this.afficher()};this.afficher=function(){var c=this;var b=new GestionProducteurTemplate();var d=b.formulaireAjoutProducteur;$("#contenu").replaceWith(c.affect($(d.template())))};this.affect=function(b){b=this.boutonLienCompte(b);b=this.mCommunVue.comNumeric(b);b=this.affectControleDatepicker(b);b=this.affectSubmit(b);b=this.mCommunVue.comHoverBtn(b);return b};this.boutonLienCompte=function(b){b.find(":input[name=lien_numero_compte]").click(function(){if(b.find(":input[name=numero_compte]").attr("disabled")){b.find(":input[name=numero_compte]").removeAttr("disabled")}else{b.find(":input[name=numero_compte]").attr("disabled","disabled").val("")}});return b};this.affectControleDatepicker=function(b){b=this.mCommunVue.comDatepicker("dateNaissance",b);return b};this.affectSubmit=function(b){var c=this;b.find("form").submit(function(){c.ajoutProducteur();return false});return b};this.ajoutProducteur=function(){var b=new ProducteurVO();b.nom=$(":input[name=nom]").val();b.prenom=$(":input[name=prenom]").val();b.dateNaissance=$(":input[name=date_naissance]").val().dateFrToDb();b.compte=$(":input[name=numero_compte]").val();b.commentaire=$(":input[name=commentaire]").val();b.courrielPrincipal=$(":input[name=courriel_principal]").val();b.courrielSecondaire=$(":input[name=courriel_secondaire]").val();b.telephonePrincipal=$(":input[name=telephone_principal]").val();b.telephoneSecondaire=$(":input[name=telephone_secondaire]").val();b.adresse=$(":input[name=adresse]").val();b.codePostal=$(":input[name=code_postal]").val();b.ville=$(":input[name=ville]").val();var c=new ProducteurValid();var d=c.validAjout(b);if(d.valid){Infobulle.init();$.post("./index.php?m=GestionProducteur&v=AjoutProducteur","pParam="+$.toJSON(b),function(f){Infobulle.init();if(f.valid){var e=new GestionProducteurTemplate();var g=e.ajoutProducteurSucces;$("#contenu").replaceWith(g.template(f))}else{Infobulle.generer(f,"")}},"json")}else{Infobulle.generer(d,"")}};this.construct(a)};