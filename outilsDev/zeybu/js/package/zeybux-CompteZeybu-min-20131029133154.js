function CompteZeybuTemplate(){this.rechercheListeOperation='<div id="contenu"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Le Compte du Zeybu<span class="com-cursor-pointer com-btn-header ui-widget-content ui-corner-all" id="btn-export-liste-operation" title="Exporter"><span class="ui-icon ui-icon-print"></span></div><table id="table-info-solde-zeybu"><thead><tr class="ui-widget ui-widget-header"><th id="td-solde-zeybu-total" class="com-table-th">Solde Zeybu Marche : {soldeTotal} {sigleMonetaire}</th><th id="td-solde-zeybu-banque" class="com-table-th">Montant en Banque : {soldeBanque} {sigleMonetaire}</th></tr><tr class="ui-widget ui-widget-header"><th id="td-solde-zeybu-banque" class="com-table-th">Solde EAU : {soldeSolidaire} {sigleMonetaire}</th><th id="td-solde-zeybu-caisse" class="com-table-th">Montant en Caisse : {soldeCaisse} {sigleMonetaire}</th></tr></thead></table><div id="form-recherche-liste-operation" class="com-center com-widget-window ui-widget ui-widget-content ui-widget-content-transparent ui-corner-all">Entre le <input type="text" value="{dateDebut}" id="dateDebut" class="com-input-text ui-widget-content ui-corner-all"> et le <input type="text" value="{dateFin}" id="dateFin" class="com-input-text ui-widget-content ui-corner-all"> Marché <select id="idMarche" ><option value="0" >Tout</option><option value="-1" >Hors Marché</option><!-- BEGIN listeMarche --><option value="{listeMarche.id}">N° {listeMarche.numero}</option><!-- END listeMarche --></select><button type="button" id="btn-rechercher-liste-operation" class="ui-state-default ui-corner-all com-button com-center">Rechercher</button></span></div><div id="liste-operation" class="com-widget-window ui-widget ui-widget-content ui-widget-content-transparent ui-corner-all"></div></div>';this.listeOperationVide='<p id="texte-liste-vide">Aucune Opération effectuée.</p>';this.InfoCompte='<div><div id="content-nav-liste-operation" class="ui-helper-clearfix ui-state-default ui-corner-all"><form>	<span id="icone-nav-liste-operation-w" class="prev ui-helper-hidden ui-state-default ui-corner-all com-button" ><span class="ui-icon ui-icon-circle-arrow-w"></span></span>	<span id="page-compteur">Page : <span type="text" class="pagedisplay"></span></span>	<span id="icone-nav-liste-operation-e" class="next ui-state-default ui-corner-all com-button" ><span class="ui-icon ui-icon-circle-arrow-e"></span></span>	<input type="hidden" class="pagesize" value="30"></form></div><table id="table-operation" class="com-table"><thead><tr class="ui-widget ui-widget-header" ><th class="com-table-th">Date</th><th class="com-table-th">Compte</th><th class="com-table-th">Libellé</th><th class="com-table-th">Type de paiement</th><th class="com-table-th">Débit</th><th class="com-table-th">Crédit</th></tr></thead><tbody><!-- BEGIN operation --><tr><td class="com-table-td td-date ">{operation.opeDate}</td><td class="com-table-td td-date ">{operation.cptLabel}</td><td class="com-table-td td-libelle">{operation.opeLibelle}</td><td class="com-table-td td-type-paiement">{operation.tppType}</td><td class="com-table-td td-montant">{operation.debit} {operation.sigleMonetaireDebit}</td><td class="com-table-td td-montant">{operation.credit} {operation.sigleMonetaireCredit}</td></tr><!-- END operation --></tbody></table></div>';this.listeAdherent='<div id="contenu" class="ui-helper-reset"><div id="virements"><ul><li><a href="#virement-solidaire">Virement Solidaire</a></li><li><a href="#virement-adherent">Virement Adherent</a></li><li><a href="#virement-producteur">Virement Producteur</a></li></ul><div id="virement-solidaire"><div class="com-center"><button id="btn-virement-solidaire" class="ui-state-default ui-corner-all com-button com-center"> Compte Zeybu vers Compte Solidaire</button></div><div class="com-center"><button id="btn-virement-solidaire-inverse" class="ui-state-default ui-corner-all com-button com-center"> Compte Solidaire vers Compte Zeybu</button></div></div><div id="virement-adherent"><div id="liste-adh-recherche" class="recherche com-widget-header ui-widget ui-widget-header ui-corner-all"><form id="filter-form-adherent"><div><span class="conteneur-icon com-float-left ui-widget-content ui-corner-left" title="Chercher"><span class="ui-icon ui-icon-search"></span></span><input class="com-input-text ui-widget-content ui-corner-right filter" name="filter-adherent" id="filter-adherent" value="" maxlength="30" size="15" type="text" /></div></form></div><table class="com-table table-adherent"><thead><tr class="ui-widget ui-widget-header"><th class="com-table-th com-underline-hover liste-adh-th-num com-cursor-pointer"><span class="ui-icon span-icon"></span>N°</th><th class="com-table-th com-underline-hover com-cursor-pointer"><span class="ui-icon span-icon"></span>Compte</th><th class="com-table-th com-underline-hover liste-adh-th-nom  com-cursor-pointer"><span class="ui-icon span-icon"></span>Nom</th><th class="com-table-th com-underline-hover liste-adh-th-nom  com-cursor-pointer"><span class="ui-icon span-icon"></span>Prénom</th><th class="com-table-th com-underline-hover com-cursor-pointer"></th><th class="com-table-th com-underline-hover com-cursor-pointer"></th></tr></thead><tbody><!-- BEGIN listeAdherent --><tr class="com-cursor-pointer compte-ligne-adherent" id-adherent="{listeAdherent.adhId}"><td class="com-table-td"><span class="ui-helper-hidden">{listeAdherent.adhIdTri}</span>{listeAdherent.adhNumero}</td><td class="com-table-td">{listeAdherent.cptLabel}</td><td class="com-table-td">{listeAdherent.adhNom}</td><td class="com-table-td">{listeAdherent.adhPrenom}</td><td class="com-table-td com-center"><button class="btn-virement ui-state-default ui-corner-all com-button com-center">Zeybu vers {listeAdherent.cptLabel}</button></td><td class="com-table-td com-center"><button class="btn-virement-inverse ui-state-default ui-corner-all com-button com-center">{listeAdherent.cptLabel} vers Zeybu</button></td></tr><!-- END listeAdherent --></tbody></table></div><div id="virement-producteur"><div id="liste-prdt-recherche" class="recherche com-widget-header ui-widget ui-widget-header ui-corner-all"><form id="filter-form-producteur"><div><span class="conteneur-icon com-float-left ui-widget-content ui-corner-left" title="Chercher"><span class="ui-icon ui-icon-search"></span></span><input class="com-input-text ui-widget-content ui-corner-right filter" name="filter-producteur" id="filter-producteur" value="" maxlength="30" size="15" type="text" /></div></form></div><table class="com-table table-producteur"><thead><tr class="ui-widget ui-widget-header"><th class="com-table-th com-underline-hover liste-adh-th-num com-cursor-pointer"><span class="ui-icon span-icon"></span>N°</th><th class="com-table-th com-underline-hover com-cursor-pointer"><span class="ui-icon span-icon"></span>Compte</th><th class="com-table-th com-underline-hover liste-adh-th-nom com-cursor-pointer"><span class="ui-icon span-icon"></span>Nom</th><th class="com-table-th com-underline-hover com-cursor-pointer"></th><th class="com-table-th com-underline-hover com-cursor-pointer"></th></tr></thead><tbody><!-- BEGIN listeProducteur --><tr class="com-cursor-pointer compte-ligne-producteur" id-producteur="{listeProducteur.ferId}"><td class="com-table-td"><span class="ui-helper-hidden">{listeProducteur.ferIdTri}</span>{listeProducteur.ferNumero}</td><td class="com-table-td">{listeProducteur.cptLabel}</td><td class="com-table-td">{listeProducteur.ferNom}</td><td class="com-table-td com-center"><button class="btn-virement ui-state-default ui-corner-all com-button com-center">Zeybu vers {listeProducteur.cptLabel}</button></td><td class="com-table-td com-center"><button class="btn-virement-inverse ui-state-default ui-corner-all com-button com-center">{listeProducteur.cptLabel} vers Zeybu</button></td></tr><!-- END listeProducteur --></tbody></table></div></div></div>';this.listeAdherentVide='<div id="virement-adherent"><p id="texte-liste-vide">Aucun adhérent dans la base.</p></div>';this.listeProducteurVide='<div id="virement-producteur"><p id="texte-liste-vide">Aucun producteur dans la base.</p></div>';this.dialogVirementSolidaire='<div id="dialog-ajout-virement" title="Virement Solidaire"><form><table class="com-table-100"><tr>Du compte : {cptDebit} vers le compte : {cptCredit}</tr><tr class="com-center" ><td class="com-table-form-td montant-virement">Montant <input class="com-numeric com-input-text ui-widget-content ui-corner-all" type="text" name="montant" maxlength="12" id="montant"/> {sigleMonetaire}</td></tr></table></form></div>';this.dialogAjoutVirement='<div id="dialog-ajout-virement" title="Virement"><form><table class="com-table-100"><tr>Du compte : {cptDebit} vers le compte : {cptCredit}</tr><tr class="com-center" ><td class="com-table-form-td montant-virement">Montant <input class="com-numeric com-input-text ui-widget-content ui-corner-all" type="text" name="montant" maxlength="12" id="montant"/> {sigleMonetaire}</td></tr></table></form></div>';this.listeVirement='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Liste des virements</div><div><div id="content-nav-liste-operation" class="ui-helper-clearfix ui-state-default ui-corner-all"><form>	<span id="icone-nav-liste-operation-w" class="prev ui-helper-hidden ui-state-default ui-corner-all com-button" ><span class="ui-icon ui-icon-circle-arrow-w"></span></span>	<span id="page-compteur">Page : <span type="text" class="pagedisplay"></span></span>	<span id="icone-nav-liste-operation-e" class="next ui-state-default ui-corner-all com-button" ><span class="ui-icon ui-icon-circle-arrow-e"></span></span>	<input type="hidden" class="pagesize" value="20"></form></div><table id="table-operation" class="com-table"><thead><tr class="ui-widget ui-widget-header" ><th class="com-table-th">Date</th><th class="com-table-th">Compte</th><th class="com-table-th">Débit</th><th class="com-table-th">Crédit</th><th class="com-table-th"></th><th class="com-table-th"></th></tr></thead><tbody><!-- BEGIN operation --><tr><td class="com-table-td td-date "><span class="ui-helper-hidden id-operation">{operation.opeId}</span>{operation.opeDate}</td><td class="com-table-td cpt-label">{operation.cptLabel}</td><td class="com-table-td td-montant">{operation.debit}</td><td class="com-table-td td-montant">{operation.credit}</td><td class="com-table-td td-edt" id="td-edt-{operation.opeId}"></td><td class="com-table-td td-edt" id="td-sup-{operation.opeId}"></td></tr><!-- END operation --></tbody></table></div></div></div>';this.listeVirementVide='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">Liste des virements</div><p id="texte-liste-vide">Aucun Virement effectué.</p></div></div>';this.montantDebit='<span class="montant">{debit}</span> {sigleMonetaire}';this.montantCredit='<span class="montant">{credit}</span> {sigleMonetaire}';this.btnEdt='<span class="com-cursor-pointer com-btn-header ui-widget-content ui-corner-all btn-edt-modifier" title="Modifier"><span class="ui-icon ui-icon-pencil"></span>';this.btnSup='<span class="com-cursor-pointer com-btn-header ui-widget-content ui-corner-all btn-edt-supprimer" title="Supprimer"><span class="ui-icon ui-icon-closethick"></span>';this.dialogModifVirement='<div id="dialog-ajout-virement" title="Virement Solidaire"><form><table class="com-table-100"><tr><td>N° de compte : {label}</td></tr><tr class="com-center" ><td class="com-table-form-td montant-virement">Montant <input class="com-numeric com-input-text ui-widget-content ui-corner-all" type="text" name="montant" maxlength="12" id="montant" value="{montant}" /> {sigleMonetaire}</td></tr></table></form></div>';this.dialogSupVirement='<div id="dialog-ajout-virement" title="Supprimer un Virement"><form><table class="com-table-100"><tr><td>N° de compte : {label}</td></tr><tr class="com-center" ><td class="com-table-form-td montant-virement">Montant {montant} {sigleMonetaire}</td></tr></table></form></div>';this.listePaiement='<div id="contenu" class="ui-helper-reset"><div id="listePaiement"><ul><li><a href="#cheque-adherent" id="li-cheque-adherent">Chèques Adhérent</a></li><li><a href="#espece-adherent" id="li-espece-adherent">Espèces Adhérent</a></li><li><a href="#cheque-ferme" id="li-cheque-ferme">Chèques Ferme</a></li><li><a href="#espece-ferme" id="li-espece-ferme">Espèces Ferme</a></li></ul><div id="cheque-adherent"><div>Total : {totalChequeAdherent} {sigleMonetaire}</div><div id="liste-adh-recherche" class="recherche com-widget-header ui-widget ui-widget-header ui-corner-all"><form id="filter-form-cheque-adherent"><div><span class="conteneur-icon com-float-left ui-widget-content ui-corner-left" title="Chercher"><span class="ui-icon ui-icon-search"></span></span><input class="com-input-text ui-widget-content ui-corner-right filter" name="filter-cheque-adherent" id="filter-cheque-adherent" value="" maxlength="30" size="15" type="text" /></div></form></div>{chequeInvite}Adhérents<table class="com-table table-cheque-adherent"><thead><tr class="ui-widget ui-widget-header"><th class="com-table-th-debut com-underline-hover td-date com-cursor-pointer"><span class="ui-icon span-icon"></span>Date</th><th class="com-table-th-med com-underline-hover liste-adh-th-num com-cursor-pointer"><span class="ui-icon span-icon"></span>N°</th><th class="com-table-th-med com-underline-hover com-cursor-pointer tab-cell-compte"><span class="ui-icon span-icon"></span>Compte</th><th class="com-table-th-med com-underline-hover liste-adh-th-nom  com-cursor-pointer"><span class="ui-icon span-icon"></span>Nom</th><th class="com-table-th-med com-underline-hover liste-adh-th-nom  com-cursor-pointer"><span class="ui-icon span-icon"></span>Prénom</th><th class="com-table-th-med com-underline-hover com-cursor-pointer td-montant"><span class="ui-icon span-icon"></span>Montant</th><th class="com-table-th-med com-underline-hover com-cursor-pointer"><span class="ui-icon span-icon"></span>N°</th><th class="com-table-th-med com-underline-hover com-cursor-pointer td-edt"></th><th class="com-table-th-med com-underline-hover com-cursor-pointer td-edt"></th><th class="com-table-th-fin com-underline-hover com-cursor-pointer td-edt"></th></tr></thead><tbody><!-- BEGIN listeChequeAdherent --><tr class="com-cursor-pointer compte-ligne-adherent"><td class="com-table-td"><span class="ui-helper-hidden">{listeChequeAdherent.opeDateTri}</span>{listeChequeAdherent.opeDate}</td><td class="com-table-td"><span class="ui-helper-hidden">{listeChequeAdherent.adhIdTri}</span>{listeChequeAdherent.adhNumero}</td><td class="com-table-td"><span class="ui-helper-hidden">{listeChequeAdherent.cptIdTri}</span>{listeChequeAdherent.cptLabel}</td><td class="com-table-td">{listeChequeAdherent.adhNom}</td><td class="com-table-td">{listeChequeAdherent.adhPrenom}</td><td class="com-table-td"><span class="ui-helper-hidden">{listeChequeAdherent.opeMontant}</span>{listeChequeAdherent.opeMontantAffichage} {sigleMonetaire}</td><td class="com-table-td">{listeChequeAdherent.numeroCheque}</td><td class="com-table-td-med com-center"><button class="btn-valid ui-state-default ui-corner-all com-button com-center" id-operation="{listeChequeAdherent.opeId}">Ok</button></td><td class="com-table-td-med td-edt"><span class="com-cursor-pointer com-btn-header ui-widget-content ui-corner-all btn-modifier" type="2" id-operation="{listeChequeAdherent.opeId}" title="Modifier"><span class="ui-icon ui-icon-pencil"></span></span></td><td class="com-table-td-fin td-edt"><span class="com-cursor-pointer com-btn-header ui-widget-content ui-corner-all btn-supprimer"  id-operation="{listeChequeAdherent.opeId}" title="Supprimer"><span class="ui-icon ui-icon-trash"></span></span></td></tr><!-- END listeChequeAdherent --></tbody></table></div><div id="espece-adherent"><div>Total : {totalEspeceAdherent} {sigleMonetaire}</div><div id="liste-prdt-recherche" class="recherche com-widget-header ui-widget ui-widget-header ui-corner-all"><form id="filter-form-espece-adherent"><div><span class="conteneur-icon com-float-left ui-widget-content ui-corner-left" title="Chercher"><span class="ui-icon ui-icon-search"></span></span><input class="com-input-text ui-widget-content ui-corner-right filter" name="filter-espece-adherent" id="filter-espece-adherent" value="" maxlength="30" size="15" type="text" /></div></form></div>{especeInvite}Adhérents<table class="com-table table-espece-adherent"><thead><tr class="ui-widget ui-widget-header"><th class="com-table-th-debut com-underline-hover td-date com-cursor-pointer"><span class="ui-icon span-icon"></span>Date</th><th class="com-table-th-med com-underline-hover liste-adh-th-num com-cursor-pointer"><span class="ui-icon span-icon"></span>N°</th><th class="com-table-th-med com-underline-hover com-cursor-pointer tab-cell-compte"><span class="ui-icon span-icon"></span>Compte</th><th class="com-table-th-med com-underline-hover liste-adh-th-nom  com-cursor-pointer"><span class="ui-icon span-icon"></span>Nom</th><th class="com-table-th-med com-underline-hover com-cursor-pointer"><span class="ui-icon span-icon"></span>Prénom</th><th class="com-table-th-med com-underline-hover com-cursor-pointer td-montant"><span class="ui-icon span-icon"></span>Montant</th><th class="com-table-th-med com-underline-hover com-cursor-pointer td-edt"></th><th class="com-table-th-med com-underline-hover com-cursor-pointer td-edt"></th><th class="com-table-th-fin com-underline-hover com-cursor-pointer td-edt"></th></tr></thead><tbody><!-- BEGIN listeEspeceAdherent --><tr class="com-cursor-pointer compte-ligne-producteur"><td class="com-table-td"><span class="ui-helper-hidden">{listeEspeceAdherent.opeDateTri}</span>{listeEspeceAdherent.opeDate}</td><td class="com-table-td"><span class="ui-helper-hidden">{listeEspeceAdherent.adhIdTri}</span>{listeEspeceAdherent.adhNumero}</td><td class="com-table-td"><span class="ui-helper-hidden">{listeEspeceAdherent.cptIdTri}</span>{listeEspeceAdherent.cptLabel}</td><td class="com-table-td">{listeEspeceAdherent.adhNom}</td><td class="com-table-td">{listeEspeceAdherent.adhPrenom}</td><td class="com-table-td"><span class="ui-helper-hidden">{listeEspeceAdherent.opeMontant}</span>{listeEspeceAdherent.opeMontantAffichage} {sigleMonetaire}</td><td class="com-table-td-med com-center"><button class="btn-valid ui-state-default ui-corner-all com-button com-center" id-operation="{listeEspeceAdherent.opeId}">Ok</button></td><td class="com-table-td-med td-edt"><span class="com-cursor-pointer com-btn-header ui-widget-content ui-corner-all btn-modifier" type="1" id-operation="{listeEspeceAdherent.opeId}" title="Modifier"><span class="ui-icon ui-icon-pencil"></span></span></td><td class="com-table-td-fin td-edt"><span class="com-cursor-pointer com-btn-header ui-widget-content ui-corner-all btn-supprimer"  id-operation="{listeEspeceAdherent.opeId}" title="Supprimer"><span class="ui-icon ui-icon-trash"></span></span></td></tr><!-- END listeEspeceAdherent --></tbody></table></div><div id="cheque-ferme"><div>Total : {totalChequeFerme} {sigleMonetaire}</div><div id="liste-adh-recherche" class="recherche com-widget-header ui-widget ui-widget-header ui-corner-all"><form id="filter-form-cheque-ferme"><div><span class="conteneur-icon com-float-left ui-widget-content ui-corner-left" title="Chercher"><span class="ui-icon ui-icon-search"></span></span><input class="com-input-text ui-widget-content ui-corner-right filter" name="filter-cheque-ferme" id="filter-cheque-ferme" value="" maxlength="30" size="15" type="text" /></div></form></div><table class="com-table table-cheque-ferme"><thead><tr class="ui-widget ui-widget-header"><th class="com-table-th-debut com-underline-hover td-date com-cursor-pointer"><span class="ui-icon span-icon"></span>Date</th><th class="com-table-th-med com-underline-hover liste-adh-th-num com-cursor-pointer"><span class="ui-icon span-icon"></span>N°</th><th class="com-table-th-med com-underline-hover com-cursor-pointer tab-cell-compte"><span class="ui-icon span-icon"></span>Compte</th><th class="com-table-th-med com-underline-hover liste-adh-th-nom  com-cursor-pointer"><span class="ui-icon span-icon"></span>Nom</th><th class="com-table-th-med com-underline-hover com-cursor-pointer td-montant"><span class="ui-icon span-icon"></span>Montant</th><th class="com-table-th-med com-underline-hover com-cursor-pointer"><span class="ui-icon span-icon"></span>N°</th><th class="com-table-th-med com-underline-hover com-cursor-pointer td-edt"></th><th class="com-table-th-fin com-underline-hover com-cursor-pointer td-edt"></th></tr></thead><tbody><!-- BEGIN listeChequeFerme --><tr class="com-cursor-pointer compte-ligne-adherent"><td class="com-table-td"><span class="ui-helper-hidden">{listeChequeFerme.opeDateTri}</span>{listeChequeFerme.opeDate}</td><td class="com-table-td"><span class="ui-helper-hidden">{listeChequeFerme.ferIdTri}</span>{listeChequeFerme.ferNumero}</td><td class="com-table-td"><span class="ui-helper-hidden">{listeChequeFerme.cptIdTri}</span>{listeChequeFerme.cptLabel}</td><td class="com-table-td">{listeChequeFerme.ferNom}</td><td class="com-table-td"><span class="ui-helper-hidden">{listeChequeFerme.opeMontant}</span>{listeChequeFerme.opeMontantAffichage} {sigleMonetaire}</td><td class="com-table-td">{listeChequeFerme.numeroCheque}</td><td class="com-table-td-med com-center"><button class="btn-valid ui-state-default ui-corner-all com-button com-center" id-operation="{listeChequeFerme.opeId}">Ok</button></td><td class="com-table-td-fin td-edt"><span class="com-cursor-pointer com-btn-header ui-widget-content ui-corner-all btn-modifier" type="2" id-operation="{listeChequeFerme.opeId}" title="Modifier"><span class="ui-icon ui-icon-pencil"></span></span></td></tr><!-- END listeChequeFerme --></tbody></table></div><div id="espece-ferme"><div>Total : {totalEspeceFerme} {sigleMonetaire}</div><div id="liste-prdt-recherche" class="recherche com-widget-header ui-widget ui-widget-header ui-corner-all"><form id="filter-form-espece-ferme"><div><span class="conteneur-icon com-float-left ui-widget-content ui-corner-left" title="Chercher"><span class="ui-icon ui-icon-search"></span></span><input class="com-input-text ui-widget-content ui-corner-right filter" name="filter-espece-ferme" id="filter-espece-ferme" value="" maxlength="30" size="15" type="text" /></div></form></div><table class="com-table table-espece-ferme"><thead><tr class="ui-widget ui-widget-header"><th class="com-table-th-debut com-underline-hover td-date com-cursor-pointer"><span class="ui-icon span-icon"></span>Date</th><th class="com-table-th-med com-underline-hover liste-adh-th-num com-cursor-pointer"><span class="ui-icon span-icon"></span>N°</th><th class="com-table-th-med com-underline-hover com-cursor-pointer tab-cell-compte"><span class="ui-icon span-icon"></span>Compte</th><th class="com-table-th-med com-underline-hover liste-adh-th-nom  com-cursor-pointer"><span class="ui-icon span-icon"></span>Nom</th><th class="com-table-th-med com-underline-hover com-cursor-pointer td-montant"><span class="ui-icon span-icon"></span>Montant</th><th class="com-table-th-med com-underline-hover com-cursor-pointer td-edt"></th><th class="com-table-th-fin com-underline-hover com-cursor-pointer td-edt"></th></tr></thead><tbody><!-- BEGIN listeEspeceFerme --><tr class="com-cursor-pointer compte-ligne-producteur"><td class="com-table-td"><span class="ui-helper-hidden">{listeEspeceFerme.opeDateTri}</span>{listeEspeceFerme.opeDate}</td><td class="com-table-td"><span class="ui-helper-hidden">{listeEspeceFerme.ferIdTri}</span>{listeEspeceFerme.ferNumero}</td><td class="com-table-td"><span class="ui-helper-hidden">{listeEspeceFerme.cptIdTri}</span>{listeEspeceFerme.cptLabel}</td><td class="com-table-td">{listeEspeceFerme.ferNom}</td><td class="com-table-td"><span class="ui-helper-hidden">{listeEspeceFerme.opeMontant}</span>{listeEspeceFerme.opeMontantAffichage} {sigleMonetaire}</td><td class="com-table-td-med com-center"><button class="btn-valid ui-state-default ui-corner-all com-button com-center" id-operation="{listeEspeceFerme.opeId}">Ok</button></td><td class="com-table-td-fin td-edt"><span class="com-cursor-pointer com-btn-header ui-widget-content ui-corner-all btn-modifier" type="1" id-operation="{listeEspeceFerme.opeId}" title="Modifier"><span class="ui-icon ui-icon-pencil"></span></span></td></tr><!-- END listeEspeceFerme --></tbody></table></div></div></div>';this.listePaiementVide='<div id="{id}" class="com-center">Aucun paiement en attente.</div>';this.listeChequeInvite='Invité<table class="com-table table-cheque-invite"><thead><tr class="ui-widget ui-widget-header"><th class="com-table-th-debut com-underline-hover td-date com-cursor-pointer"><span class="ui-icon span-icon"></span>Date</th><th class="com-table-th-med com-underline-hover com-cursor-pointer td-montant"><span class="ui-icon span-icon"></span>Montant</th><th class="com-table-th-med com-underline-hover com-cursor-pointer"><span class="ui-icon span-icon"></span>N°</th><th class="com-table-th-med com-underline-hover com-cursor-pointer td-edt"></th><th class="com-table-th-med com-underline-hover com-cursor-pointer td-edt"></th><th class="com-table-th-fin com-underline-hover com-cursor-pointer td-edt"></th></tr></thead><tbody><!-- BEGIN listeChequeInvite --><tr class="com-cursor-pointer compte-ligne-adherent"><td class="com-table-td"><span class="ui-helper-hidden">{listeChequeInvite.opeDateTri}</span>{listeChequeInvite.opeDate}</td><td class="com-table-td"><span class="ui-helper-hidden">{listeChequeInvite.opeMontant}</span>{listeChequeInvite.opeMontantAffichage} {sigleMonetaire}</td><td class="com-table-td">{listeChequeInvite.numeroCheque}</td><td class="com-table-td-med com-center"><button class="btn-valid ui-state-default ui-corner-all com-button com-center" id-operation="{listeChequeInvite.opeId}">Ok</button></td><td class="com-table-td-med td-edt"><span class="com-cursor-pointer com-btn-header ui-widget-content ui-corner-all btn-modifier" type="2" id-operation="{listeChequeInvite.opeId}" title="Modifier"><span class="ui-icon ui-icon-pencil"></span></span></td><td class="com-table-td-fin td-edt"><span class="com-cursor-pointer com-btn-header ui-widget-content ui-corner-all btn-supprimer"  id-operation="{listeChequeInvite.opeId}" title="Supprimer"><span class="ui-icon ui-icon-trash"></span></span></td></tr><!-- END listeChequeInvite --></tbody></table>';this.listeEspeceInvite='Invité<table class="com-table table-espece-invite"><thead><tr class="ui-widget ui-widget-header"><th class="com-table-th-debut com-underline-hover td-date com-cursor-pointer"><span class="ui-icon span-icon"></span>Date</th><th class="com-table-th-med com-underline-hover com-cursor-pointer "><span class="ui-icon span-icon"></span>Montant</th><th class="com-table-th-med com-underline-hover com-cursor-pointer td-edt"></th><th class="com-table-th-med com-underline-hover com-cursor-pointer td-edt"></th><th class="com-table-th-fin com-underline-hover com-cursor-pointer td-edt"></th></tr></thead><tbody><!-- BEGIN listeEspeceInvite --><tr class="com-cursor-pointer compte-ligne-producteur"><td class="com-table-td"><span class="ui-helper-hidden">{listeEspeceInvite.opeDateTri}</span>{listeEspeceInvite.opeDate}</td><td class="com-table-td"><span class="ui-helper-hidden">{listeEspeceInvite.opeMontant}</span>{listeEspeceInvite.opeMontantAffichage} {sigleMonetaire}</td><td class="com-table-td-med com-center"><button class="btn-valid ui-state-default ui-corner-all com-button com-center" id-operation="{listeEspeceInvite.opeId}">Ok</button></td><td class="com-table-td-med td-edt"><span class="com-cursor-pointer com-btn-header ui-widget-content ui-corner-all btn-modifier" type="1" id-operation="{listeEspeceInvite.opeId}" title="Modifier"><span class="ui-icon ui-icon-pencil"></span></span></td><td class="com-table-td-fin td-edt"><span class="com-cursor-pointer com-btn-header ui-widget-content ui-corner-all btn-supprimer"  id-operation="{listeEspeceInvite.opeId}" title="Supprimer"><span class="ui-icon ui-icon-trash"></span></span></td></tr><!-- END listeEspeceInvite --></tbody></table>';this.dialogValiderPaiement='<div id="dialog-valider-paiement" title="Valider le paiement"><form><table class="com-table-100"><tr><td>N° de compte : {cptLabel}</td></tr><tr class="com-center" ><td class="com-table-form-td montant-virement">Montant : {opeMontantAffichage} {sigleMonetaire}</td></tr></table></form></div>';this.dialogSupprimerPaiement='<div id="dialog-supprimer-paiement" title="Supprimer le paiement"><form><table class="com-table-100"><tr><td>Voulez-vous supprimer le paiement ?</td></tr><tr><td>N° de compte : {cptLabel}</td></tr><tr class="com-center" ><td class="com-table-form-td montant-virement">Montant : {opeMontantAffichage} {sigleMonetaire}</td></tr></table></form></div>';this.dialogModifierPaiement='<div id="dialog-modifier-paiement" title="Modifier le paiement"><form><table class="com-table-100"><tr><td>N° de compte </td><td>{cptLabel}</td></tr><tr><td>Montant</td><td><input type="text" name="montant-rechargement" value="{opeMontant}" class="com-numeric com-input-text ui-widget-content ui-corner-all" id="montant" maxlength="12" size="5"/> <span>{sigleMonetaire}</span></td></tr>{champComplementaire}</table></form></div>'}function SuiviPaiementVue(a){this.mListeOperation=[];this.mSelectedTabs=0;this.mBanques=[];this.mBanquesTriId=[];this.mTypePaiement=[];this.construct=function(b){$.history({vue:function(){SuiviPaiementVue(b)}});var c=this;var d={fonction:"afficher"};if(b&&b.selectedTabs){this.mSelectedTabs=b.selectedTabs}$.post("./index.php?m=CompteZeybu&v=SuiviPaiement","pParam="+$.toJSON(d),function(e){Infobulle.init();if(e){if(e.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}$(e.banques).each(function(){c.mBanquesTriId[this.id]=this});c.mBanques=e.banques;c.mTypePaiement=e.typePaiement;c.afficher(e)}else{Infobulle.generer(e,"")}}},"json")};this.afficher=function(k){var h=this;var c=0;$.each(k.listeEspeceAdherent,function(){if(this.opeId){this.opeDateTri=this.opeDate.extractDbDate().replace("-","");this.opeDate=this.opeDate.extractDbDate().dateDbToFr();this.opeMontantAffichage=this.opeMontant.nombreFormate(2,","," ");this.opeMontant=this.opeMontant.nombreFormate(2,",","");this.adhIdTri=this.adhNumero.replace("Z","");this.cptIdTri=this.cptLabel.replace("C","");c+=parseFloat(this.opeMontant);h.mListeOperation[this.opeId]=this}});var j=false;$.each(k.listeEspeceInvite,function(){if(this.opeId){this.opeDateTri=this.opeDate.extractDbDate().replace("-","");this.opeDate=this.opeDate.extractDbDate().dateDbToFr();this.opeMontantAffichage=this.opeMontant.nombreFormate(2,","," ");this.opeMontant=this.opeMontant.nombreFormate(2,",","");c+=parseFloat(this.opeMontant);h.mListeOperation[this.opeId]=this;j=true}});var g=0;$.each(k.listeChequeAdherent,function(){if(this.opeId){this.opeDateTri=this.opeDate.extractDbDate().replace("-","");this.opeDate=this.opeDate.extractDbDate().dateDbToFr();this.opeMontantAffichage=this.opeMontant.nombreFormate(2,","," ");this.opeMontant=this.opeMontant.nombreFormate(2,",","");this.adhIdTri=this.adhNumero.replace("Z","");this.cptIdTri=this.cptLabel.replace("C","");this.numeroCheque="";if(this.opeTypePaiementChampComplementaire[3]){this.numeroCheque=this.opeTypePaiementChampComplementaire[3].valeur}g+=parseFloat(this.opeMontant);h.mListeOperation[this.opeId]=this}});var b=false;$.each(k.listeChequeInvite,function(){if(this.opeId){this.opeDateTri=this.opeDate.extractDbDate().replace("-","");this.opeDate=this.opeDate.extractDbDate().dateDbToFr();this.opeMontantAffichage=this.opeMontant.nombreFormate(2,","," ");this.opeMontant=this.opeMontant.nombreFormate(2,",","");this.numeroCheque="";if(this.opeTypePaiementChampComplementaire[3]){this.numeroCheque=this.opeTypePaiementChampComplementaire[3].valeur}g+=parseFloat(this.opeMontant);h.mListeOperation[this.opeId]=this;b=true}});var l=0;$.each(k.listeEspeceFerme,function(){if(this.opeId){this.opeDateTri=this.opeDate.extractDbDate().replace("-","");this.opeDate=this.opeDate.extractDbDate().dateDbToFr();this.opeMontantAffichage=this.opeMontant.nombreFormate(2,","," ");this.opeMontant=this.opeMontant.nombreFormate(2,",","");this.ferIdTri=this.ferNumero.replace("F","");this.cptIdTri=this.cptLabel.replace("C","");l+=parseFloat(this.opeMontant);h.mListeOperation[this.opeId]=this}});var i=0;$.each(k.listeChequeFerme,function(){if(this.opeId){this.opeDateTri=this.opeDate.extractDbDate().replace("-","");this.opeDate=this.opeDate.extractDbDate().dateDbToFr();this.opeMontantAffichage=this.opeMontant.nombreFormate(2,","," ");this.opeMontant=this.opeMontant.nombreFormate(2,",","");this.ferIdTri=this.ferNumero.replace("F","");this.cptIdTri=this.cptLabel.replace("C","");this.numeroCheque="";if(this.opeTypePaiementChampComplementaire[3]){this.numeroCheque=this.opeTypePaiementChampComplementaire[3].valeur}i+=parseFloat(this.opeMontant);h.mListeOperation[this.opeId]=this}});k.sigleMonetaire=gSigleMonetaire;k.totalEspeceAdherent=c.nombreFormate(2,","," ");k.totalChequeAdherent=g.nombreFormate(2,","," ");k.totalEspeceFerme=l.nombreFormate(2,","," ");k.totalChequeFerme=i.nombreFormate(2,","," ");var d=new CompteZeybuTemplate();if(b){k.chequeInvite=d.listeChequeInvite.template(k)}if(j){k.especeInvite=d.listeEspeceInvite.template(k)}var e=d.listePaiement;var f=$(e.template(k));if(k.listeChequeAdherent.length<=0||(k.listeChequeAdherent[0]&&k.listeChequeAdherent[0].adhId==null)){f.find("#cheque-adherent").replaceWith(d.listePaiementVide.template({id:"cheque-adherent"}))}if(k.listeEspeceAdherent.length<=0||(k.listeEspeceAdherent[0]&&k.listeEspeceAdherent[0].adhId==null)){f.find("#espece-adherent").replaceWith(d.listePaiementVide.template({id:"espece-adherent"}))}if(k.listeChequeFerme.length<=0||(k.listeChequeFerme[0]&&k.listeChequeFerme[0].ferId==null)){f.find("#cheque-ferme").replaceWith(d.listePaiementVide.template({id:"cheque-ferme"}))}if(k.listeEspeceFerme.length<=0||(k.listeEspeceFerme[0]&&k.listeEspeceFerme[0].ferId==null)){f.find("#espece-ferme").replaceWith(d.listePaiementVide.template({id:"espece-ferme"}))}$("#contenu").replaceWith(h.affect(f))};this.affect=function(b){b=this.affectTri(b);b=this.affectRecherche(b);b=this.affectTabs(b);b=this.affectValiderPaiement(b);b=this.affectModifierPaiement(b);b=this.affectSupprimerPaiement(b);b=gCommunVue.comHoverBtn(b);return b};this.affectTabs=function(b){var c=this;b.find("#listePaiement").tabs({selected:c.mSelectedTabs});b.find("#li-cheque-adherent,#li-espece-adherent,#li-cheque-ferme,#li-espece-ferme").click(function(){c.mSelectedTabs=$("#listePaiement").tabs("option","selected")});return b};this.affectTri=function(b){b.find(".table-cheque-adherent").tablesorter({sortList:[[0,0]],headers:{7:{sorter:false}}});b.find(".table-espece-adherent").tablesorter({sortList:[[0,0]],headers:{6:{sorter:false}}});b.find(".table-cheque-ferme").tablesorter({sortList:[[0,0]],headers:{7:{sorter:false}}});b.find(".table-espece-ferme").tablesorter({sortList:[[0,0]],headers:{6:{sorter:false}}});b.find(".table-cheque-invite").tablesorter({sortList:[[0,0]],headers:{3:{sorter:false}}});b.find(".table-espece-invite").tablesorter({sortList:[[0,0]],headers:{2:{sorter:false}}});return b};this.affectRecherche=function(b){b.find("#filter-cheque-adherent").keyup(function(){$.uiTableFilter($(".table-cheque-adherent"),this.value)});b.find("#filter-espece-adherent").keyup(function(){$.uiTableFilter($(".table-espece-adherent"),this.value)});b.find("#filter-cheque-ferme").keyup(function(){$.uiTableFilter($(".table-cheque-ferme"),this.value)});b.find("#filter-espece-ferme").keyup(function(){$.uiTableFilter($(".table-espece-ferme"),this.value)});b.find("#filter-form-cheque-adherent, #filter-form-espece-adherent, #filter-form-cheque-ferme, #filter-form-espece-ferme").submit(function(){return false});return b};this.affectValiderPaiement=function(b){var c=this;b.find(".btn-valid").click(function(){c.dialogValiderPaiement($(this).attr("id-operation"))});return b};this.dialogValiderPaiement=function(e){var d=this;var b=this.mListeOperation[e];b.sigleMonetaire=gSigleMonetaire;var c=new CompteZeybuTemplate();$(c.dialogValiderPaiement.template(b)).dialog({autoOpen:true,modal:true,draggable:false,resizable:false,width:450,buttons:{Valider:function(){d.validerPaiement(e,this)},Annuler:function(){$(this).dialog("close")}},close:function(f,g){$(this).remove()}})};this.validerPaiement=function(e,b){var d=this;var c={id:e,fonction:"valider"};$.post("./index.php?m=CompteZeybu&v=SuiviPaiement","pParam="+$.toJSON(c),function(g){Infobulle.init();if(g){if(g.valid){var h=new TemplateVR();h.valid=false;h.log.valid=false;var f=new VRerreur();f.code=ERR_351_CODE;f.message=ERR_351_MSG;h.log.erreurs.push(f);$(b).dialog("close");d.construct({vr:h,selectedTabs:d.mSelectedTabs})}else{Infobulle.generer(g,"")}}},"json")};this.affectModifierPaiement=function(b){var c=this;b.find(".btn-modifier").click(function(){c.dialogModifierPaiement($(this).attr("id-operation"),$(this).attr("type"))});return b};this.dialogModifierPaiement=function(g,c){var f=this;var b=this.mListeOperation[g];b.sigleMonetaire=gSigleMonetaire;b.champComplementaire="";if(this.mTypePaiement[c]&&this.mTypePaiement[c].champComplementaire.length>0){var d=new TypePaiementService();var h=[];$(this.mTypePaiement[c].champComplementaire).each(function(){var j=b.opeTypePaiementChampComplementaire[this.id];j.id=this.id;j.tppCpVisible=1;j.chCpLabel=this.label;h.push(j)});b.champComplementaire=d.getFormChampcomplementaire(h,this.mBanquesTriId)}var e=new CompteZeybuTemplate();var i=$(f.affectDialog($(e.dialogModifierPaiement.template(b)))).dialog({autoOpen:true,modal:true,draggable:false,resizable:false,width:400,buttons:{Valider:function(){f.modifierPaiement(g,c,this)},Annuler:function(){$(this).dialog("close")}},close:function(j,k){$(this).remove()}});i.find("form").submit(function(){f.modifierPaiement(g,c,i);return false})};this.modifierPaiement=function(h,d,b){var g=this;var c=new OperationDetailVO();c.id=h;c.fonction="modifier";c.montant=$(b).find("#montant").val().numberFrToDb();c.typePaiement=d;if(this.mTypePaiement[c.typePaiement]){var e=new TypePaiementService();c.champComplementaire=e.getChampComplementaire(this.mTypePaiement[c.typePaiement].champComplementaire)}var f=new OperationDetailValid();var i=f.validAjout(c);Infobulle.init();if(i.valid){$.post("./index.php?m=CompteZeybu&v=SuiviPaiement","pParam="+$.toJSON(c),function(k){Infobulle.init();if(k){if(k.valid){var l=new TemplateVR();l.valid=false;l.log.valid=false;var j=new VRerreur();j.code=ERR_352_CODE;j.message=ERR_352_MSG;l.log.erreurs.push(j);$(b).dialog("close");g.construct({vr:l,selectedTabs:g.mSelectedTabs})}else{Infobulle.generer(k,"")}}},"json")}else{Infobulle.generer(i,"")}};this.affectDialog=function(c){var b=new TypePaiementService();c=b.affect(c,this.mBanques);c=gCommunVue.comNumeric(c);return c};this.affectSupprimerPaiement=function(b){var c=this;b.find(".btn-supprimer").click(function(){c.dialogSupprimerPaiement($(this).attr("id-operation"))});return b};this.dialogSupprimerPaiement=function(e){var d=this;var b=this.mListeOperation[e];b.sigleMonetaire=gSigleMonetaire;var c=new CompteZeybuTemplate();$(c.dialogSupprimerPaiement.template(b)).dialog({autoOpen:true,modal:true,draggable:false,resizable:false,width:450,buttons:{Supprimer:function(){d.supprimerPaiement(e,this)},Annuler:function(){$(this).dialog("close")}},close:function(f,g){$(this).remove()}})};this.supprimerPaiement=function(e,b){var d=this;var c={id:e,fonction:"supprimer"};$.post("./index.php?m=CompteZeybu&v=SuiviPaiement","pParam="+$.toJSON(c),function(g){Infobulle.init();if(g){if(g.valid){var h=new TemplateVR();h.valid=false;h.log.valid=false;var f=new VRerreur();f.code=ERR_353_CODE;f.message=ERR_353_MSG;h.log.erreurs.push(f);$(b).dialog("close");d.construct({vr:h,selectedTabs:d.mSelectedTabs})}else{Infobulle.generer(g,"")}}},"json")};this.construct(a)}function CompteZeybuVue(a){this.construct=function(b){$.history({vue:function(){CompteZeybuVue(b)}});var c=this;b=$.extend(true,{},b);b.fonction="afficher";$.post("./index.php?m=CompteZeybu&v=CompteZeybu","pParam="+$.toJSON(b),function(f){Infobulle.init();if(f){if(f.valid){var d=new RechercheListeOperationVO();if(b&&b.vr){d.vr=b.vr}d.dateDebut=getPremierJourDuMois();f.dateDebut=d.dateDebut.dateDbToFr();d.dateFin=getDernierJourDuMois();f.dateFin=d.dateFin.dateDbToFr();if(f.soldeTotal!=null){f.soldeTotal=f.soldeTotal.nombreFormate(2,","," ")}else{f.soldeTotal="0".nombreFormate(2,","," ")}if(f.soldeCaisse!=null){f.soldeCaisse=f.soldeCaisse.nombreFormate(2,","," ")}else{f.soldeCaisse="0".nombreFormate(2,","," ")}if(f.soldeBanque!=null){f.soldeBanque=f.soldeBanque.nombreFormate(2,","," ")}else{f.soldeBanque="0".nombreFormate(2,","," ")}if(f.soldeSolidaire!=null){f.soldeSolidaire=f.soldeSolidaire.nombreFormate(2,","," ")}else{f.soldeSolidaire="0".nombreFormate(2,","," ")}f.sigleMonetaire=gSigleMonetaire;var e=new CompteZeybuTemplate();$("#contenu").replaceWith(c.affectEntete($(e.rechercheListeOperation.template(f))));c.recherche(d)}else{Infobulle.generer(f,"")}}},"json")};this.affectEntete=function(b){b=this.affectControleDatepicker(b);b=this.affectRechercheListeOperation(b);b=this.exportListeOperation(b);b=gCommunVue.comHoverBtn(b);return b};this.affectControleDatepicker=function(b){b=gCommunVue.comLienDatepicker("dateDebut","dateFin",b);b.find("#dateDebut, #dateFin").datepicker("option","yearRange","1900:c");return b};this.affectRechercheListeOperation=function(b){var c=this;b.find("#btn-rechercher-liste-operation").click(function(){var d=new RechercheListeOperationVO();d.dateDebut=$("#dateDebut").val().dateFrToDb();d.dateFin=$("#dateFin").val().dateFrToDb();d.idMarche=$("#idMarche").val();var e=new CompteZeybuValid();var f=e.validRechercheListeOperation(d);Infobulle.init();if(f.valid){c.recherche(d)}else{Infobulle.generer(f,"")}});return b};this.exportListeOperation=function(b){b.find("#btn-export-liste-operation").click(function(){var c=new RechercheListeOperationVO();c.dateDebut=$("#dateDebut").val().dateFrToDb();c.dateFin=$("#dateFin").val().dateFrToDb();c.idMarche=$("#idMarche").val();var d=new CompteZeybuValid();var e=d.validRechercheListeOperation(c);Infobulle.init();if(e.valid){c.fonction="export";$.download("./index.php?m=CompteZeybu&v=CompteZeybu",c)}else{Infobulle.generer(e,"")}});return b};this.recherche=function(c){var b=this;c.fonction="rechercher";$.post("./index.php?m=CompteZeybu&v=CompteZeybu","pParam="+$.toJSON(c),function(d){Infobulle.init();if(d){if(d.valid){if(c&&c.vr){Infobulle.generer(c.vr,"")}b.afficher(d)}else{Infobulle.generer(d,"")}}},"json")};this.afficher=function(e){var d=this;$(e.operation).each(function(){if(this.opeId!=null){this.opeDate=this.opeDate.extractDbDate().dateDbToFr();if(this.tppType==null){this.tppType=""}if(this.numeroCheque!=null){this.tppType+=" N°"+this.numeroCheque}if(this.opeMontant<0){this.debit=(this.opeMontant*-1).nombreFormate(2,","," ");this.credit="";this.sigleMonetaireDebit=gSigleMonetaire;this.sigleMonetaireCredit=""}else{this.debit="";this.credit=this.opeMontant.nombreFormate(2,","," ");this.sigleMonetaireDebit="";this.sigleMonetaireCredit=gSigleMonetaire}}});var c=new CompteZeybuTemplate();if(e.operation.length>0&&e.operation[0].opeId!=null){var b=$(c.InfoCompte.template(e));if(e.operation.length<31){b=this.masquerPagination(b)}else{b=this.paginnation(b)}$("#liste-operation").html(d.affect(b))}else{$("#liste-operation").html(c.listeOperationVide.template(e))}};this.affect=function(b){b=gCommunVue.comHoverBtn(b);return b};this.paginnation=function(b){b.find("#table-operation").tablesorter({headers:{0:{sorter:false},1:{sorter:false},2:{sorter:false},3:{sorter:false},4:{sorter:false}}}).tablesorterPager({container:b.find("#content-nav-liste-operation"),positionFixed:false,size:30});return b};this.masquerPagination=function(b){b.find("#content-nav-liste-operation").hide();return b};this.construct(a)}function ListeVirementZeybuVue(a){this.modifVirement=[];this.construct=function(b){$.history({vue:function(){ListeVirementZeybuVue(b)}});var c=this;var d={fonction:"listeVirement"};$.post("./index.php?m=CompteZeybu&v=Virements","pParam="+$.toJSON(d),function(e){Infobulle.init();if(e){if(e.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.afficher(e)}else{Infobulle.generer(e,"")}}},"json")};this.afficher=function(e){var d=this;var c=new CompteZeybuTemplate();e.sigleMonetaire=gSigleMonetaire;$(e.operation).each(function(){if(this.opeDate!=null){d.modifVirement.push(this.opeId);this.opeDate=this.opeDate.extractDbDate().dateDbToFr();var g={};g.sigleMonetaire=gSigleMonetaire;if(this.opeMontant<0){g.debit=(this.opeMontant*-1).nombreFormate(2,","," ");this.debit=c.montantDebit.template(g);this.credit=""}else{this.debit="";g.credit=this.opeMontant.nombreFormate(2,","," ");this.credit=c.montantCredit.template(g)}}});if(e.operation.length>0&&e.operation[0].opeId!=null){var f=c.listeVirement;var b=$(f.template(e));if(e.operation.length<21){b=this.masquerPagination(b)}else{b=this.paginnation(b)}$("#contenu").replaceWith(d.affect(b))}else{$("#contenu").replaceWith(c.listeVirementVide)}};this.affect=function(b){b=this.ajoutModification(b);b=this.affectModification(b);b=this.affectSuppression(b);b=gCommunVue.comHoverBtn(b);return b};this.paginnation=function(b){b.find("#table-operation").tablesorter({headers:{0:{sorter:false},1:{sorter:false},2:{sorter:false},3:{sorter:false},4:{sorter:false},5:{sorter:false}}}).tablesorterPager({container:b.find("#content-nav-liste-operation"),positionFixed:false,size:20});return b};this.masquerPagination=function(b){b.find("#content-nav-liste-operation").hide();return b};this.ajoutModification=function(b){var c=new CompteZeybuTemplate();$(this.modifVirement).each(function(){b.find("#td-edt-"+this).html(c.btnEdt);b.find("#td-sup-"+this).html(c.btnSup)});return b};this.affectModification=function(b){var c=this;b.find(".btn-edt-modifier").click(function(){var g=$(this).parents("tr").find(".id-operation").text();var e=new CompteZeybuTemplate();var f=e.dialogModifVirement;var d={};d.label=$(this).parents("tr").find(".cpt-label").text();d.montant=$(this).parents("tr").find(".montant").text().numberFrToDb().nombreFormate(2,",","");d.sigleMonetaire=gSigleMonetaire;var h=$(c.affectDialog($(f.template(d)))).dialog({autoOpen:true,modal:true,draggable:false,resizable:false,width:450,buttons:{Valider:function(){c.modifierVirement(this,g)},Annuler:function(){$(this).dialog("close")}},close:function(i,j){$(this).remove()}});h.find("form").submit(function(){c.modifierVirement(h,g);return false})});return b};this.modifierVirement=function(b,d){var f=this;var c=new CompteZeybuModifierVirementVO();c.id=d;c.montant=$(b).find(":input[name=montant]").val().numberFrToDb();var e=new CompteZeybuVirementValid();var g=e.validUpdate(c);Infobulle.init();if(g.valid){c.fonction="modifier";$.post("./index.php?m=CompteZeybu&v=Virements","pParam="+$.toJSON(c),function(i){Infobulle.init();if(i){if(i.valid){var k=new TemplateVR();k.valid=false;k.log.valid=false;var h=new VRerreur();h.code=ERR_308_CODE;h.message=ERR_308_MSG;k.log.erreurs.push(h);var j={vr:k};f.construct(j);$(b).dialog("close")}else{Infobulle.generer(i,"")}}},"json")}else{Infobulle.generer(g,"")}};this.affectDialog=function(b){b=gCommunVue.comNumeric(b);return b};this.affectSuppression=function(b){var c=this;b.find(".btn-edt-supprimer").click(function(){var g=$(this).parents("tr").find(".id-operation").text();var e=new CompteZeybuTemplate();var f=e.dialogSupVirement;var d={};d.label=$(this).parents("tr").find(".cpt-label").text();d.montant=$(this).parents("tr").find(".montant").text();d.sigleMonetaire=gSigleMonetaire;var h=$(f.template(d)).dialog({autoOpen:true,modal:true,draggable:false,resizable:false,width:450,buttons:{Valider:function(){c.supprimerVirement(this,g)},Annuler:function(){$(this).dialog("close")}},close:function(i,j){$(this).remove()}});h.find("form").submit(function(){c.supprimerVirement(h,g);return false})});return b};this.supprimerVirement=function(b,d){var f=this;var c=new CompteZeybuSupprimerVirementVO();c.id=d;var e=new CompteZeybuVirementValid();var g=e.validDelete(c);Infobulle.init();if(g.valid){c.fonction="supprimer";$.post("./index.php?m=CompteZeybu&v=Virements","pParam="+$.toJSON(c),function(i){Infobulle.init();if(i){if(i.valid){var k=new TemplateVR();k.valid=false;k.log.valid=false;var h=new VRerreur();h.code=ERR_309_CODE;h.message=ERR_309_MSG;k.log.erreurs.push(h);var j={vr:k};f.construct(j);$(b).dialog("close")}else{Infobulle.generer(i,"")}}},"json")}else{Infobulle.generer(g,"")}};this.construct(a)}function VirementZeybuVue(a){this.listeAdherent=[];this.listeProducteur=[];this.construct=function(b){$.history({vue:function(){VirementZeybuVue(b)}});var c=this;var d={fonction:"afficher"};$.post("./index.php?m=CompteZeybu&v=Virements","pParam="+$.toJSON(d),function(e){Infobulle.init();if(e){if(e.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}$(e.listeAdherent).each(function(){c.listeAdherent[this.adhId]=this});$(e.listeProducteur).each(function(){c.listeProducteur[this.ferId]=this});c.solde=e.solde;c.afficher(e)}else{Infobulle.generer(e,"")}}},"json")};this.afficher=function(e){var d=this;$.each(e.listeAdherent,function(){this.adhIdTri=this.adhNumero.replace("Z","")});$.each(e.listeProducteur,function(){this.ferIdTri=this.ferNumero.replace("F","")});var c=new CompteZeybuTemplate();var f=c.listeAdherent;var b=$(f.template(e));if(e.listeAdherent.length<=0||e.listeAdherent[0].adhId==null){b.find("#virement-adherent").replaceWith(c.listeAdherentVide)}if(e.listeProducteur.length<=0||e.listeProducteur[0].ferId==null){b.find("#virement-producteur").replaceWith(c.listeProducteurVide)}$("#contenu").replaceWith(d.affect(b))};this.affect=function(b){b=this.affectTri(b);b=this.affectRecherche(b);b=this.affectTabs(b);b=gCommunVue.comHoverBtn(b);b=this.affectVirementSolidaire(b);b=this.affectVirement(b);return b};this.affectTabs=function(b){b.find("#virements").tabs();return b};this.affectTri=function(b){b.find(".table-adherent").tablesorter({sortList:[[0,0]],headers:{4:{sorter:false},5:{sorter:false}}});b.find(".table-producteur").tablesorter({sortList:[[0,0]],headers:{3:{sorter:false},4:{sorter:false}}});return b};this.affectRecherche=function(b){b.find("#filter-producteur").keyup(function(){$.uiTableFilter($(".table-producteur"),this.value)});b.find("#filter-adherent").keyup(function(){$.uiTableFilter($(".table-adherent"),this.value)});b.find("#filter-form-producteur, #filter-form-adherent").submit(function(){return false});return b};this.affectVirementSolidaire=function(b){var c=this;b.find("#btn-virement-solidaire").click(function(){c.virementSolidaire(1)});b.find("#btn-virement-solidaire-inverse").click(function(){c.virementSolidaire(2)});return b};this.virementSolidaire=function(c){var e=this;var d=new CompteZeybuTemplate();var f=d.dialogVirementSolidaire;var b={};b.sigleMonetaire=gSigleMonetaire;b.type=2;if(c==1){b.cptDebit="Zeybu";b.cptCredit="Solidaire";b.idCptDebit=-1;b.idCptCredit=-2}else{b.cptDebit="Solidaire";b.cptCredit="Zeybu";b.idCptDebit=-2;b.idCptCredit=-1}var g=$(this.affectDialog($(f.template(b)))).dialog({autoOpen:true,modal:true,draggable:false,resizable:false,width:450,buttons:{Valider:function(){e.envoyerVirement(this,b)},Annuler:function(){$(this).dialog("close")}},close:function(h,i){$(this).remove()}});g.find("form").submit(function(){e.envoyerVirement(g,b);return false})};this.affectVirement=function(b){var c=this;b.find(".compte-ligne-adherent").each(function(){var d=$(this).attr("id-adherent");$(this).find(".btn-virement").click(function(){var e={};e.type=1;e.cptDebit="Zeybu";e.cptCredit=c.listeAdherent[d].cptLabel;e.idCptDebit=-1;e.idCptCredit=c.listeAdherent[d].adhIdCompte;c.virement(e)});$(this).find(".btn-virement-inverse").click(function(){var e={};e.type=1;e.cptDebit=c.listeAdherent[d].cptLabel;e.cptCredit="Zeybu";e.idCptDebit=c.listeAdherent[d].adhIdCompte;e.idCptCredit=-1;c.virement(e)})});b.find(".compte-ligne-producteur").each(function(){var d=$(this).attr("id-producteur");$(this).find(".btn-virement").click(function(){var e={};e.type=1;e.cptDebit="Zeybu";e.cptCredit=c.listeProducteur[d].cptLabel;e.idCptDebit=-1;e.idCptCredit=c.listeProducteur[d].ferIdCompte;c.virement(e)});$(this).find(".btn-virement-inverse").click(function(){var e={};e.type=1;e.cptDebit=c.listeProducteur[d].cptLabel;e.cptCredit="Zeybu";e.idCptDebit=c.listeProducteur[d].ferIdCompte;e.idCptCredit=-1;c.virement(e)})});return b};this.virement=function(b){var d=this;var c=new CompteZeybuTemplate();var e=c.dialogAjoutVirement;b.sigleMonetaire=gSigleMonetaire;var f=$(this.affectDialog($(e.template(b)))).dialog({autoOpen:true,modal:true,draggable:false,resizable:false,width:450,buttons:{Valider:function(){d.envoyerVirement(this,b)},Annuler:function(){$(this).dialog("close")}},close:function(g,h){$(this).remove()}});f.find("form").submit(function(){d.envoyerVirement(f,b);return false})};this.affectDialog=function(b){b=gCommunVue.comNumeric(b);return b};this.envoyerVirement=function(b,e){var c=new CompteZeybuAjoutVirementVO();c.idCptDebit=e.idCptDebit;c.idCptCredit=e.idCptCredit;c.type=e.type;c.montant=$(b).find(":input[name=montant]").val().numberFrToDb();var d=new CompteZeybuVirementValid();var f=d.validAjout(c);Infobulle.init();if(f.valid){c.fonction="ajout";$.post("./index.php?m=CompteZeybu&v=Virements","pParam="+$.toJSON(c),function(h){Infobulle.init();if(h){if(h.valid){var i=new TemplateVR();i.valid=false;i.log.valid=false;var g=new VRerreur();g.code=ERR_307_CODE;g.message=ERR_307_MSG;i.log.erreurs.push(g);Infobulle.generer(i,"");$(b).dialog("close")}else{Infobulle.generer(h,"")}}},"json")}else{Infobulle.generer(f,"")}};this.construct(a)};