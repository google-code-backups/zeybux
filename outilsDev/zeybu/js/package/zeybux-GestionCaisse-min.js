function GestionCaisseTemplate(){this.etatCaisseDebut='<div id="contenu"><div class="com-widget-window ui-widget ui-widget-content ui-corner-all"><div class="com-widget-header ui-widget ui-widget-header ui-corner-all">État de la caisse</div><div class="com-center">La caisse est ';this.etatCaisseMilieu=' : <button class="ui-state-default ui-corner-all com-button com-center" id="btn-caisse">';this.etatCaisseFin="</button></div></div></div></div>";this.caisseOuverte="ouverte";this.caisseFermee="fermée";this.boutonOuverture="Ouvrir";this.boutonFermeture="Fermer"}function GestionCaisseVue(a){this.etatCaisse=0;this.construct=function(b){$.history({vue:function(){GestionCaisseVue(b)}});var c=this;var d={fonction:"etatCaisse"};$.post("./index.php?m=GestionCaisse&v=GestionCaisse","pParam="+$.toJSON(d),function(e){Infobulle.init();if(e){if(e.valid){if(b&&b.vr){Infobulle.generer(b.vr,"")}c.afficher(e)}else{Infobulle.generer(e,"")}}},"json")};this.afficher=function(e){var d=this;this.etatCaisse=e.etat;var c=new GestionCaisseTemplate();var b=c.etatCaisseDebut;if(e.etat==1){b+=c.caisseOuverte}else{b+=c.caisseFermee}b+=c.etatCaisseMilieu;if(e.etat==1){b+=c.boutonFermeture}else{b+=c.boutonOuverture}b+=c.etatCaisseFin;b=$(b);$("#contenu").replaceWith(d.affect(b))};this.affect=function(b){b=affectChangerEtatCaisse(b);b=gCommunVue.comHoverBtn(b);return b};this.affectChangerEtatCaisse=function(b){if(this.etatCaisse==1){b=this.affectFermerCaisse(b)}else{b=this.affectOuvrirCaisse(b)}return b};this.affectFermerCaisse=function(b){var c=this;b.find("#btn-caisse").click(function(){var d={fonction:"fermerCaisse"};$.post("./index.php?m=GestionCaisse&v=GestionCaisse","pParam="+$.toJSON(d),function(e){Infobulle.init();if(e){if(e.valid){c.construct()}else{Infobulle.generer(e,"")}}},"json")});return b};this.affectOuvrirCaisse=function(b){var c=this;b.find("#btn-caisse").click(function(){var d={fonction:"ouvrirCaisse"};$.post("./index.php?m=GestionCaisse&v=GestionCaisse","pParam="+$.toJSON(d),function(e){Infobulle.init();if(e){if(e.valid){c.construct()}else{Infobulle.generer(e,"")}}},"json")});return b};this.construct(a)};