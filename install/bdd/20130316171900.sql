create or replace view view_reservation as
select `com_commande`.`com_id` AS `com_id`,`pro_produit`.`pro_id` AS `pro_id`,`sto_stock`.`sto_id` AS `sto_id`,`sto_stock`.`sto_quantite` AS `sto_quantite`,`pro_produit`.`pro_unite_mesure` AS `pro_unite_mesure`,`sto_stock`.`sto_type` AS `sto_type`,`sto_stock`.`sto_id_compte` AS `sto_id_compte`,`dcom_detail_commande`.`dcom_id` AS `dcom_id`,`adh_adherent`.`adh_id` AS `adh_id`,`adh_adherent`.`adh_nom` AS `adh_nom`,`adh_adherent`.`adh_prenom` AS `adh_prenom`,`adh_adherent`.`adh_telephone_principal` AS `adh_telephone_principal`,`cpt_compte`.`cpt_label` AS `cpt_label` from ((((((`com_commande` join `pro_produit` on((`com_commande`.`com_id` = `pro_produit`.`pro_id_commande`))) join `dcom_detail_commande` on((`dcom_detail_commande`.`dcom_id_produit` = `pro_produit`.`pro_id`))) join `sto_stock` on((`dcom_detail_commande`.`dcom_id` = `sto_stock`.`sto_id_detail_commande`))) join `adh_adherent` on((`adh_adherent`.`adh_id_compte` = `sto_stock`.`sto_id_compte`))) join `ope_operation` on((`com_commande`.`com_id` = `ope_operation`.`ope_id_commande`))) join `cpt_compte` on(((`cpt_compte`.`cpt_id` = `sto_stock`.`sto_id_compte`) and (`ope_operation`.`ope_id_compte` = `cpt_compte`.`cpt_id`)))) 
where adh_etat = 1 and ((`sto_stock`.`sto_type` = 0) and (`sto_stock`.`sto_id_compte` <> 0) and (`com_commande`.`com_archive` in (0,1)) and (`ope_operation`.`ope_type_paiement` = 0));

